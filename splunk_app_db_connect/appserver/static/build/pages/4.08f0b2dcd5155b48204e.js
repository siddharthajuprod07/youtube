webpackJsonp([4],{"views/shared/map/Master":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),SplunkI18N=__webpack_require__("stubs/i18n"),_=__webpack_require__("require/underscore"),SplunkUtil=__webpack_require__("shim/splunk.util"),sprintf=SplunkUtil.sprintf,Color=__webpack_require__("contrib/jg_lib/graphics/Color"),FunctionUtil=__webpack_require__("contrib/jg_lib/utils/FunctionUtil"),BaseModel=__webpack_require__("models/Base"),ExternalLegend=__webpack_require__("splunk/charting/ExternalLegend"),Map=__webpack_require__("splunk/mapping/Map"),ChoroplethLayer=__webpack_require__("splunk/mapping/layers/ChoroplethLayer"),PieMarkerLayer=__webpack_require__("splunk/mapping/layers/PieMarkerLayer"),LatLonBoundsParser=__webpack_require__("splunk/mapping/parsers/LatLonBoundsParser"),LatLonParser=__webpack_require__("splunk/mapping/parsers/LatLonParser"),ColorCodes=__webpack_require__("splunk/palettes/ColorCodes"),FieldColorPalette=__webpack_require__("splunk/palettes/FieldColorPalette"),ListColorPalette=__webpack_require__("splunk/palettes/ListColorPalette"),ArrayParser=__webpack_require__("splunk/parsers/ArrayParser"),BooleanParser=__webpack_require__("splunk/parsers/BooleanParser"),ColorParser=__webpack_require__("splunk/parsers/ColorParser"),NumberParser=__webpack_require__("splunk/parsers/NumberParser"),ObjectParser=__webpack_require__("splunk/parsers/ObjectParser"),StringParser=__webpack_require__("splunk/parsers/StringParser"),VisualizationBase=(__webpack_require__("splunk/mapping/utils/GeoJsonUtils"),__webpack_require__("views/shared/viz/Base")),console=__webpack_require__("util/console"),ResetZoomControl=__webpack_require__("splunk/mapping/controls/ResetZoomControl"),NumericAxis=__webpack_require__("splunk/mapping/axis/NumericAxis"),NumericLegend=__webpack_require__("splunk/mapping/controls/NumericalLegend"),GeneralUtils=__webpack_require__("util/general_utils"),CategoricalVisualLegend=__webpack_require__("splunk/mapping/controls/CategoricalVisualLegend"),themeUtils=__webpack_require__("util/theme_utils"),_DEFAULT_DATA_PARAMS=(__webpack_require__("views/shared/map/Master.pcss"),{output_mode:"json_cols",show_metadata:"true",offset:"0"}),_DEFAULT_PROPERTY_VALUES={fieldColors:"",seriesColors:"["+ColorCodes.toPrefixed(ColorCodes.CATEGORICAL,"0x").join(",")+"]","data.maxClusters":"100",showTiles:"1","tileLayer.tileOpacity":"1","tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles/{z}/{x}/{y}","tileLayer.subdomains":"[a,b,c]","tileLayer.minZoom":"0","tileLayer.maxZoom":"7","tileLayer.invertY":"false","tileLayer.attribution":"","map.scrollZoom":0,"map.panning":!0,"markerLayer.markerOpacity":"1","markerLayer.markerMinSize":"10","markerLayer.markerMaxSize":"50",drilldown:"all","choroplethLayer.colorMode":"auto","choroplethLayer.maximumColor":"0xAF575A","choroplethLayer.minimumColor":"0x2F25BA","choroplethLayer.neutralPoint":"0","choroplethLayer.shapeOpacity":"0.75","choroplethLayer.colorBins":"5","choroplethLayer.showBorder":"1",layerType:"marker"},_THEMABLE_PROPERTY_VALUES="dark"===themeUtils.getCurrentTheme()?{"tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles-dark/{z}/{x}/{y}"}:{"tileLayer.url":"/splunkd/__raw/services/mbtiles/splunk-tiles/{z}/{x}/{y}"},_THEMED_DEFAULT_PROPERTY_VALUES=_.extend({},_DEFAULT_PROPERTY_VALUES,_THEMABLE_PROPERTY_VALUES),_R_PROPERTY_PREFIX=/^display\.visualizations\.mapping\./;return VisualizationBase.extend({moduleId:module.id,_map:null,_markerLayer:null,_choroplethLayer:null,_externalLegend:null,_fieldColorPalette:null,_seriesColorPalette:null,_choroplethColorPalette:null,_choroplethColorMode:null,_choroplethAutoDetectedColorMode:"sequential",_choroplethMinimumColor:Color.fromNumber(0),_choroplethNeutralColor:Color.fromNumber(16777215),_choroplethMaximumColor:Color.fromNumber(0),_choroplethNullColor:Color.fromNumber(13750737),_numericLegend:null,_numericAxis:null,_propertyValues:null,_booleanParser:null,_numberParser:null,_stringParser:null,_colorParser:null,_numberArrayParser:null,_stringArrayParser:null,_colorArrayParser:null,_numberObjectParser:null,_colorObjectParser:null,_latLonParser:null,_latLonBoundsParser:null,_maxClusters:100,_maxShapes:1e4,_isPrinting:!1,_prePrintCenter:null,_prePrintZoom:0,_drilldown:"all",_layerType:null,initialize:function(options){this.model.config||(this.model.config=new BaseModel),VisualizationBase.prototype.initialize.apply(this,arguments),this.options=options||{},this.$el.width(this.options.width||"100%"),this.$el.height(this.options.height||"100%");var configShapeLimit=parseInt(SplunkUtil.getConfigValue("CHOROPLETH_SHAPE_LIMIT",this._maxShapes)||0,10);_.isNaN(configShapeLimit)||(this._maxShapes=configShapeLimit),this._map_boundsChanged=FunctionUtil.bind(this._map_boundsChanged,this),this._map_mapClicked=FunctionUtil.bind(this._map_mapClicked,this),this._propertyValues={},this._booleanParser=BooleanParser.getInstance(),this._numberParser=NumberParser.getInstance(),this._stringParser=StringParser.getInstance(),this._colorParser=ColorParser.getInstance(),this._numberArrayParser=ArrayParser.getInstance(this._numberParser),this._stringArrayParser=ArrayParser.getInstance(this._stringParser),this._colorArrayParser=ArrayParser.getInstance(this._colorParser),this._numberObjectParser=ObjectParser.getInstance(this._numberParser),this._colorObjectParser=ObjectParser.getInstance(this._colorParser),this._latLonParser=LatLonParser.getInstance(),this._latLonBoundsParser=LatLonBoundsParser.getInstance(),this._seriesColorPalette=new ListColorPalette,this._fieldColorPalette=new FieldColorPalette(null,this._seriesColorPalette),this._externalLegend=new ExternalLegend,this._categoricalVisualLegend=new CategoricalVisualLegend,this._externalLegend.connect(),this._markerLayer=new PieMarkerLayer,this._markerLayer.set("legend",this._externalLegend),this._markerLayer.set("markerColorPalette",this._fieldColorPalette),this._numericAxis=new NumericAxis,this._numericLegend=new NumericLegend,this._choroplethColorPalette=new ListColorPalette(null,(!0)),this._updateChoroplethColorPalette(),this._choroplethLayer=new ChoroplethLayer,this._choroplethLayer.set("colorPalette",this._choroplethColorPalette),this._numericLegend.set("axis",this._numericAxis),this._categoricalVisualLegend.set("colorPalette",this._fieldColorPalette),this._categoricalVisualLegend.set("legend",this._externalLegend),this._choroplethLayer.set("legend",this._externalLegend),this._numericLegend.set("colorPalette",this._choroplethColorPalette),this._map=new Map,this._updateDataBounds(),this._map.formatNumber=this._formatNumber,this._map.formatDegrees=this._formatDegrees;var originalZoom=this.model.config.get("display.visualizations.mapping.map.zoom"),originalCenter=this.model.config.get("display.visualizations.mapping.map.center");this._map.on("boundsChanged",this._map_boundsChanged.bind(this)),this._map.on("mapClicked",this._map_mapClicked),this._map.appendTo(this.$el),this._map.fitWorld(!0),this._reset_zoom=new ResetZoomControl({originalZoom:originalZoom,originalCenter:originalCenter}),this._map.addControl(this._reset_zoom),this.$el.find(".leaflet-top").css("z-index","50"),this.$el.on("mouseenter",".legend-elem",function(e){var fieldName=$(e.currentTarget).data().fieldName;this._choroplethLayer.set("selectedField",""+fieldName),this._numericLegend.set("selectedField",""+fieldName),this._categoricalVisualLegend.set("selectedField",""+fieldName)}.bind(this)),this.$el.on("mouseleave",".legend-elem",function(e){this._choroplethLayer.set("selectedField",null),this._numericLegend.set("selectedField",null),this._categoricalVisualLegend.set("selectedField",null)}.bind(this))},getCenter:function(){return this._map.get("center").normalize()},getZoom:function(){return this._map.get("zoom")},getLatLonBounds:function(){return this._map.getLatLonBounds().normalize()},getScrollWheelZoom:function(){return this._map.leafletMap.scrollWheelZoom._enabled},getPostProcessSearch:function(){var bounds=this._map.getLatLonBounds().normalize();return"marker"===this._layerType?"geofilter south="+bounds.s+" west="+bounds.w+" north="+bounds.n+" east="+bounds.e+" maxclusters="+this._maxClusters:"geomfilter min_y="+bounds.s+" min_x="+bounds.w+" max_y="+bounds.n+" max_x="+bounds.e},hasNonZeroBounds:function(){var bounds=this._map.getLatLonBounds().normalize();return!(0===bounds.s&&0===bounds.w&&0===bounds.n&&0===bounds.e)},getResultsCount:function(){return"marker"===this._layerType?this._maxClusters:this._maxShapes},formatData:function(){var extractedData=null,searchResults=this.getPrimaryDataSource().searchResults;extractedData=searchResults.has("rows")?this._extractRowData(searchResults):this._extractColumnData(searchResults),console.debug("Updating map data to",extractedData);var values=[];if(this._layerType=this.model.config.get("display.visualizations.mapping.type"),"marker"===this._layerType&&this._markerLayer)this._markerLayer.set("data",extractedData?extractedData.data:null),this._markerLayer.set("fields",extractedData?this._filterFields(extractedData.fields):null);else if("choropleth"===this._layerType&&this._choroplethLayer){if(!_(extractedData.fields).contains("geom"))return this._choroplethLayer.set("featureIdFieldName",null),this._choroplethLayer.set("data",null),void this._choroplethLayer.set("fields",null);var filteredFields,featureIdField=extractedData.data[0]._featureIdField;if(featureIdField&&(filteredFields=_.union([featureIdField],this._filterFields(extractedData.fields))),filteredFields&&filteredFields.length>1){for(var fieldToExtract=filteredFields[1],j=0;j<extractedData.data.length;j++)values.push(extractedData.data[j][fieldToExtract]);values.length>0&&(this._choroplethAutoDetectedColorMode=GeneralUtils.valuesAreNumeric(values)?"sequential":"categorical"),this.model.config.set({autoDetectedColorMode:this._choroplethAutoDetectedColorMode},{"transient":!0}),"auto"===this._choroplethColorMode&&this._updateChoroplethToMatchColorMode()}this._choroplethLayer.set("featureIdFieldName",filteredFields?filteredFields[0]:null),this._choroplethLayer.set("data",extractedData?extractedData.data:null),this._choroplethLayer.set("fields",extractedData?filteredFields:null)}else console.log("cannot update layer data because of incorrect layerType, OR the _layerType hasn't been initialized!")},provideScaleValues:function(data,config){var emptyScale={color:[]};if("choropleth"!==this._layerType)return emptyScale;var choroplethFields=this._choroplethLayer.get("fields"),featureIdField=this._choroplethLayer.get("featureIdFieldName");if(!choroplethFields||!featureIdField)return emptyScale;var countField=ChoroplethLayer.parseFieldTypes(choroplethFields,featureIdField).count,countData=_(this._choroplethLayer.get("data")).pluck(countField);return{color:countData}},updateView:function(data,props,async){var p,curValues=(async(),this._propertyValues),newValues={};for(p in curValues)curValues.hasOwnProperty(p)&&(newValues[p]=null);var defaultValues=_THEMED_DEFAULT_PROPERTY_VALUES;for(p in defaultValues)defaultValues.hasOwnProperty(p)&&(newValues[p]=defaultValues[p]);var stateValue,stateValues=this.model.config?this.model.config.toJSON():{};for(p in stateValues)stateValues.hasOwnProperty(p)&&_R_PROPERTY_PREFIX.test(p)&&(stateValue=stateValues[p],null!=stateValue&&""!==stateValue&&(newValues[p.replace(_R_PROPERTY_PREFIX,"")]=stateValue));newValues.hasOwnProperty("map.zoom")&&(this._setMapProperty("map.zoom",newValues["map.zoom"]),this._reset_zoom.setOriginalZoom(newValues["map.zoom"])),newValues.hasOwnProperty("map.center")&&(this._setMapProperty("map.center",newValues["map.center"]),this._reset_zoom.setOriginalCenter(newValues["map.center"])),newValues.hasOwnProperty("map.fitBounds")&&this._setMapProperty("map.fitBounds",newValues["map.fitBounds"]);var newColorMode=newValues["choroplethLayer.colorMode"];if("auto"===newColorMode||"sequential"===newColorMode||"divergent"===newColorMode||"categorical"===newColorMode?this._choroplethColorMode=newColorMode:delete newValues["choroplethLayer.colorMode"],"divergent"!==this._getComputedColorMode()&&(newValues["choroplethLayer.minimumColor"]=null,newValues["choroplethLayer.neutralPoint"]=null),"categorical"!==this._getComputedColorMode()&&this.getScale("color")){var sharedColorScale=this.getScale("color");this._choroplethLayer.set("sharedMinimum",sharedColorScale.get("actualMinimum")),this._choroplethLayer.set("sharedMaximum",sharedColorScale.get("actualMaximum"))}else this._choroplethLayer.set("sharedMinimum",-(1/0)),this._choroplethLayer.set("sharedMaximum",1/0);for(p in newValues)newValues.hasOwnProperty(p)&&this._setMapProperty(p,newValues[p])},onAddedToDocument:function(){this._map.updateSize()},remove:function(){return this._map.off("boundsChanged",this._map_boundsChanged),this._map.off("mapClicked",this._map_mapClicked),this._map.dispose(),this._markerLayer.off("rendered",this._onDataLayerRendered,this),this._choroplethLayer.off("rendered",this._onDataLayerRendered,this),this._externalLegend.close(),VisualizationBase.prototype.remove.apply(this,arguments)},onShow:function(){this._map.updateSize(),this._map.validate(),VisualizationBase.prototype.onShow.call(this)},_updateDataBounds:function(){var model=this.model.config;if(model){var bounds=this._map.getLatLonBounds().normalize();model.set({"display.visualizations.mapping.data.bounds":this._latLonBoundsParser.valueToString(bounds)})}},_needsPropertyUpdate:function(changedProperties){if(!changedProperties)return!1;for(var p in changedProperties)if(changedProperties.hasOwnProperty(p)&&"display.visualizations.mapping.data.bounds"!==p)return!0;return!1},_extractRowData:function(model){var extractedData={},fields=this._getNormalizedFieldNames(model),rows=model.get("rows");if(fields&&rows){var numEntries,row,obj,i,j,numFields=fields.length,numRows=rows.length;for(extractedData.fields=fields.concat(),extractedData.data=[],i=0;i<numRows;i++){for(row=rows[i],numEntries=Math.min(row.length,numFields),obj={},j=0;j<numEntries;j++)obj[fields[j]]=row[j];extractedData.data.push(obj)}}return extractedData},_extractColumnData:function(model){var extractedData={},fields=this._getNormalizedFieldNames(model),columns=model.get("columns");if(fields&&columns){var obj,i,j,numColumns=Math.min(fields.length,columns.length),numRows=numColumns>0?columns[0].length:0;for(i=1;i<numColumns;i++)numRows=Math.min(numRows,columns[i].length);for(extractedData.fields=fields.slice(0,numColumns),extractedData.data=[],i=0;i<numRows;i++){for(obj={},j=0;j<numColumns;j++)obj[fields[j]]=columns[j][i];extractedData.data.push(obj)}}return extractedData},_getNormalizedFieldNames:function(model){return _(model.get("fields")).map(function(field){return _.isString(field)?field:field.name})},_filterFields:function(fields){if(!fields)return null;for(var field,filteredFields=[],i=0,l=fields.length;i<l;i++)field=fields[i],field&&"_"!==field.charAt(0)&&filteredFields.push(field);return filteredFields},_setMapProperty:function(propertyName,propertyValue){if(propertyValue=null!=propertyValue?String(propertyValue):null,this._propertyValues[propertyName]!=propertyValue)switch(null!=propertyValue?this._propertyValues[propertyName]=propertyValue:delete this._propertyValues[propertyName],propertyName){case"fieldColors":var fieldColors=_.extend({NULL:this._choroplethNullColor},this._colorObjectParser.stringToValue(propertyValue));this._fieldColorPalette.set("fieldColors",fieldColors);break;case"seriesColors":this._seriesColorPalette.set("colors",this._colorArrayParser.stringToValue(propertyValue));break;case"data.maxClusters":var maxClusters=this._numberParser.stringToValue(propertyValue);this._maxClusters=maxClusters<1/0?Math.max(Math.floor(maxClusters),64):100,this._updateDataParams();break;case"map.center":var center=this._latLonParser.stringToValue(propertyValue);center&&this._map.set("center",center);break;case"map.zoom":var zoom=this._numberParser.stringToValue(propertyValue);isNaN(zoom)||this._map.set("zoom",zoom);break;case"map.fitBounds":var fitBounds=this._latLonBoundsParser.stringToValue(propertyValue);fitBounds&&this._map.fitBounds(fitBounds);break;case"map.scrollZoom":var scrollWheelZoom=this._booleanParser.stringToValue(propertyValue);scrollWheelZoom?this._map.leafletMap.scrollWheelZoom.enable():this._map.leafletMap.scrollWheelZoom.disable();break;case"map.panning":var panning=this._booleanParser.stringToValue(propertyValue);panning?this._map.leafletMap.dragging.enable():this._map.leafletMap.dragging.disable();break;case"drilldown":this._drilldown=this._stringParser.stringToValue(propertyValue);break;case"showTiles":this._map.set("showTiles",this._booleanParser.stringToValue(propertyValue));break;case"tileLayer.tileOpacity":this._map.set("tileOpacity",this._numberParser.stringToValue(propertyValue));break;case"tileLayer.url":this._map.set("tileURL",this._resolveURL(propertyValue));break;case"tileLayer.subdomains":this._map.set("tileSubdomains",this._stringArrayParser.stringToValue(propertyValue));break;case"tileLayer.minZoom":this._map.set("tileMinZoom",this._numberParser.stringToValue(propertyValue));break;case"tileLayer.maxZoom":this._map.set("tileMaxZoom",this._numberParser.stringToValue(propertyValue));break;case"tileLayer.invertY":this._map.set("tileInvertY",this._booleanParser.stringToValue(propertyValue));break;case"tileLayer.attribution":this._map.set("tileAttribution",this._stringParser.stringToValue(propertyValue));break;case"markerLayer.markerOpacity":this._markerLayer.set("markerOpacity",this._numberParser.stringToValue(propertyValue));break;case"markerLayer.markerMinSize":this._markerLayer.set("markerMinSize",this._numberParser.stringToValue(propertyValue));break;case"markerLayer.markerMaxSize":this._markerLayer.set("markerMaxSize",this._numberParser.stringToValue(propertyValue));break;case"choroplethLayer.colorMode":var computedColorMode=this._getComputedColorMode();"sequential"!==computedColorMode&&"divergent"!==computedColorMode||this._updateChoroplethColorPalette(),this._updateChoroplethToMatchColorMode();break;case"choroplethLayer.maximumColor":this._choroplethMaximumColor=this._colorParser.stringToValue(propertyValue),this._updateChoroplethColorPalette();break;case"choroplethLayer.minimumColor":this._choroplethMinimumColor=this._colorParser.stringToValue(propertyValue),this._updateChoroplethColorPalette();break;case"choroplethLayer.colorBins":var numBins=this._numberParser.stringToValue(propertyValue);this._choroplethLayer.set("bins",numBins),this._numericLegend.set("bins",numBins);break;case"choroplethLayer.neutralPoint":var neutralPoint=null!=propertyValue?this._numberParser.stringToValue(propertyValue):NaN;this._choroplethLayer.set("neutralPoint",neutralPoint),this._numericLegend.set("neutralPoint",neutralPoint);break;case"choroplethLayer.shapeOpacity":this._choroplethLayer.set("shapeOpacity",this._numberParser.stringToValue(propertyValue));break;case"choroplethLayer.showBorder":var show=this._booleanParser.stringToValue(propertyValue);this._choroplethLayer.set("borderWidth",show?1:0);break;case"legend.placement":var isVisible="none"!==propertyValue;this._numericLegend.set("isVisible",isVisible),this._categoricalVisualLegend.set("isVisible",isVisible);break;case"type":"marker"===propertyValue?(this._map.removeLayer(this._choroplethLayer),this._choroplethLayer.off("rendered",this._onDataLayerRendered,this),this._map.addLayer(this._markerLayer),this._markerLayer.on("rendered",this._onDataLayerRendered,this),this._map.removeControl(this._numericLegend),this._map.removeControl(this._categoricalVisualLegend),this._updateDataParams()):"choropleth"===propertyValue?(this._map.removeLayer(this._markerLayer),this._markerLayer.off("rendered",this._onDataLayerRendered,this),this._map.addLayer(this._choroplethLayer),this._choroplethLayer.on("rendered",this._onDataLayerRendered,this),this._updateChoroplethToMatchColorMode(),this._updateDataParams()):console.log("cannot initialize customize layer because of incorrect _layerType!")}},_updateChoroplethColorPalette:function(){"divergent"===this._getComputedColorMode()?this._choroplethColorPalette.set("colors",[this._choroplethMinimumColor,this._choroplethNeutralColor,this._choroplethMaximumColor]):this._choroplethColorPalette.set("colors",[this._choroplethNeutralColor,this._choroplethMaximumColor])},_updateChoroplethToMatchColorMode:function(){var colorMode=this._getComputedColorMode();"categorical"===colorMode?(this._map.isCategorical=!0,this._choroplethLayer.set("axis",null),this._choroplethLayer.set("legend",this._externalLegend),this._choroplethLayer.set("colorPalette",this._fieldColorPalette),this._map.removeControl(this._numericLegend),this._map.addControl(this._categoricalVisualLegend)):(this._map.isCategorical=!1,this._choroplethLayer.set("legend",null),this._choroplethLayer.set("axis",this._numericAxis),this._choroplethLayer.set("colorPalette",this._choroplethColorPalette),this._map.removeControl(this._categoricalVisualLegend),this._map.addControl(this._numericLegend))},_getComputedColorMode:function(){return"auto"===this._choroplethColorMode?this._choroplethAutoDetectedColorMode:this._choroplethColorMode},_resolveURL:function(propertyValue){var propertyValue2=propertyValue?SplunkUtil.trim(propertyValue):propertyValue;if(propertyValue2&&"/"===propertyValue2.charAt(0)){var hadTrailingSlash="/"===propertyValue2.charAt(propertyValue2.length-1);propertyValue2=SplunkUtil.make_url(propertyValue2);var hasTrailingSlash="/"===propertyValue2.charAt(propertyValue2.length-1);hasTrailingSlash!=hadTrailingSlash&&(propertyValue2=hadTrailingSlash?propertyValue2+"/":propertyValue2.substring(0,propertyValue2.length-1)),propertyValue=propertyValue2}return propertyValue},_formatNumber:function(num){var pos=Math.abs(num);return pos>0&&(pos<.001||pos>=1e9)?SplunkI18N.format_scientific(num,"##0E0"):SplunkI18N.format_decimal(num)},_formatDegrees:function(degrees,orientation){var deg=Math.abs(degrees),degInt=Math.floor(deg),degStr=""+degInt,min=60*(deg-degInt),minInt=Math.floor(min),minStr=minInt<10?"0"+minInt:""+minInt,sec=60*(min-minInt),secInt=Math.floor(sec),secStr=secInt<10?"0"+secInt:""+secInt,dirStr="";return degrees>0?dirStr="ns"===orientation?_("N").t():_("E").t():degrees<0&&(dirStr="ns"===orientation?_("S").t():_("W").t()),secInt>0?sprintf("%(degrees)s°%(minutes)s'%(seconds)s\"%(direction)s",{degrees:degStr,minutes:minStr,seconds:secStr,direction:dirStr}):minInt>0?sprintf("%(degrees)s°%(minutes)s'%(direction)s",{degrees:degStr,minutes:minStr,direction:dirStr}):sprintf("%(degrees)s°%(direction)s",{degrees:degStr,direction:dirStr})},onConfigChange:function(changedAttributes){var updateNeeded=_(changedAttributes).chain().keys().any(function(key){return 0===key.indexOf("display.visualizations.mapping.")}).value();updateNeeded&&(changedAttributes.hasOwnProperty("display.visualizations.mapping.type")&&this.invalidate("formatDataPass"),this.invalidate("updateViewPass"))},_shouldUpdateViewOnDataChange:function(){return!1},_map_boundsChanged:function(e){this._isPrinting||(this._updateDataBounds(),this._updateDataParams(),this.model.config.set({currentMapZoom:this.getZoom(),currentMapCenter:this.getCenter().clone()},{"transient":!0}),this.trigger("boundsChanged",{}))},_map_mapClicked:function(e){this._isPrinting||"none"===this._drilldown||this.trigger("drilldown",{data:e.data,fields:e.fields,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,type:"geoviz"})},onPrintStart:function(e){this._isPrinting||(this._isPrinting=!0,this._prePrintCenter=this._map.get("center"),this._prePrintZoom=this._map.get("zoom"),this._map.updateSize(),this._map.validate())},onPrintEnd:function(e){this._isPrinting&&(this._map.set("center",this._prePrintCenter),this._map.set("zoom",this._prePrintZoom),this._prePrintCenter=null,this._prePrintZoom=0,this._isPrinting=!1,this._map.updateSize(),this._map.validate())},_onDataLayerRendered:function(){this._map.off("tilesLoaded.change",this._handleTileLoadOnce,this),this._map.get("tilesLoaded")?this._onViewUpdated():this._map.on("tilesLoaded.change",this._handleTileLoadOnce,this)},_handleTileLoadOnce:function(){this._onViewUpdated(),this._map.off("tilesLoaded.change",this._handleTileLoadOnce,this)},_updateDataParams:function(){this._layerType=this.model.config.get("display.visualizations.mapping.type"),this._layerType&&this.hasNonZeroBounds()&&this.getPrimaryDataSource().updateFetchParams(_.extend({},_DEFAULT_DATA_PARAMS,{search:this.getPostProcessSearch(),count:String(this.getResultsCount())}))}},{DEFAULT_PROPERTY_VALUES:_THEMED_DEFAULT_PROPERTY_VALUES})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},917:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(458)(),exports.push([module.id,".leaflet-image-layer,.leaflet-layer,.leaflet-map-pane,.leaflet-marker-icon,.leaflet-marker-pane,.leaflet-marker-shadow,.leaflet-overlay-pane,.leaflet-overlay-pane svg,.leaflet-popup-pane,.leaflet-shadow-pane,.leaflet-tile,.leaflet-tile-pane,.leaflet-zoom-box{position:absolute}.leaflet-container{overflow:hidden;outline:0}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-moz-user-select:none;-webkit-user-select:none;user-select:none}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-clickable{cursor:pointer}.leaflet-dragging,.leaflet-dragging .leaflet-clickable{cursor:move}.leaflet-container img{max-width:none!important}.leaflet-container img.leaflet-image-layer{max-width:15000px!important}.leaflet-tile-pane{z-index:2}.leaflet-objects-pane{z-index:3}.leaflet-overlay-pane{z-index:4}.leaflet-shadow-pane{z-index:5}.leaflet-marker-pane{z-index:6}.leaflet-popup-pane{z-index:7}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0}.leaflet-control{position:relative;z-index:7;pointer-events:auto}.leaflet-bottom,.leaflet-top{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-control-zoom{border-radius:7px;padding:5px;background:rgba(0,0,0,.25)}.leaflet-control-zoom a{background-color:hsla(0,0%,100%,.75)}.leaflet-control-layers a,.leaflet-control-zoom a{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-control-zoom a{border-radius:4px;width:19px;height:19px}.leaflet-control-zoom a:hover{background-color:#fff}.leaflet-touch .leaflet-control-zoom a{width:27px;height:27px}.leaflet-control-zoom-in{background-image:url("+__webpack_require__("contrib/leaflet/images/zoom-in.png")+");margin-bottom:5px}.leaflet-control-zoom-out{background-image:url("+__webpack_require__("contrib/leaflet/images/zoom-out.png")+")}.leaflet-control-layers{box-shadow:0 1px 7px #999;background:#f8f8f9;border-radius:8px}.leaflet-control-layers a{background-image:url("+__webpack_require__("contrib/leaflet/images/layers.png")+");width:36px;height:36px}.leaflet-touch .leaflet-control-layers a{width:44px;height:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif;color:#333;background:#fff}.leaflet-control-layers input{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-container .leaflet-control-attribution{background-color:hsla(0,0%,100%,.7);box-shadow:0 0 5px #bbb;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font:11px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;color:#000;line-height:1;font-size:10px;padding-bottom:2px;text-shadow:1px 1px 1px #fff;background-color:hsla(0,0%,100%,.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;padding-top:1px;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-control-layers{border:5px solid #bbb}.leaflet-fade-anim .leaflet-popup,.leaflet-fade-anim .leaflet-tile{opacity:0;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup,.leaflet-fade-anim .leaflet-tile-loaded{opacity:1}.leaflet-zoom-anim .leaflet-zoom-animated{transition:transform .25s cubic-bezier(.25,.1,.25,.75)}.leaflet-pan-anim .leaflet-tile,.leaflet-touching .leaflet-zoom-animated,.leaflet-zoom-anim .leaflet-tile{transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-popup{position:absolute;text-align:center}.leaflet-popup-content-wrapper{padding:1px;text-align:left}.leaflet-popup-content{margin:14px 20px}.leaflet-popup-tip-container{margin:0 auto;width:40px;height:20px;position:relative;overflow:hidden}.leaflet-popup-tip{width:15px;height:15px;padding:1px;margin:-8px auto 0;transform:rotate(45deg)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 5px 0 0;text-align:center;width:18px;height:14px;font:16px/14px Tahoma,Verdana,sans-serif;color:#c3c3c3;text-decoration:none;font-weight:700}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-container{background:#ddd}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #05f;background:#fff;opacity:.5}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-editing-icon{border-radius:2px}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 10px #888;-moz-box-shadow:0 3px 10px #888;-webkit-box-shadow:0 3px 14px #999}.leaflet-popup-content-wrapper{border-radius:20px}.leaflet-popup-content{font:12px/1.4 Helvetica Neue,Arial,Helvetica,sans-serif}",""])},918:function(module,exports){(function(){!function(e,t){var n,r;typeof exports!=t+""?n=exports:(r=e.L,n={},n.noConflict=function(){return e.L=r,this},e.L=n),n.version="0.4.5",n.Util={extend:function(e){for(var i,t=Array.prototype.slice.call(arguments,1),n=0,r=t.length;n<r;n++){i=t[n]||{};for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return e},bind:function(e,t){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,n||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(n){return n[t]=n[t]||++e,n[t]}}(),limitExecByInterval:function(e,t,n){var r,i;return function s(){var o=arguments;return r?void(i=!0):(r=!0,setTimeout(function(){r=!1,i&&(s.apply(n,o),i=!1)},t),e.apply(n,o),void 0)}},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},splitWords:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(e,t){return e.options=n.Util.extend({},e.options,t),e.options},getParamString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return"?"+t.join("&")},template:function(e,t){
return e.replace(/\{ *([\w_]+) *\}/g,function(e,n){var r=t[n];if(!t.hasOwnProperty(n))throw Error("No value provided for variable "+e);return r})},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var n,r,i=["webkit","moz","o","ms"];for(n=0;n<i.length&&!r;n++)r=e[i[n]+t];return r}function r(t){return e.setTimeout(t,1e3/60)}var i=e.requestAnimationFrame||t("RequestAnimationFrame")||r,s=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};n.Util.requestAnimFrame=function(t,s,o,u){return t=n.Util.bind(t,s),o&&i===r?void t():i.call(e,t,u)},n.Util.cancelAnimFrame=function(t){t&&s.call(e,t)}}(),n.Class=function(){},n.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=t,t.prototype=i;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(t[s]=this[s]);return e.statics&&(n.Util.extend(t,e.statics),delete e.statics),e.includes&&(n.Util.extend.apply(null,[i].concat(e.includes)),delete e.includes),e.options&&i.options&&(e.options=n.Util.extend({},i.options,e.options)),n.Util.extend(i,e),t},n.Class.include=function(e){n.Util.extend(this.prototype,e)},n.Class.mergeOptions=function(e){n.Util.extend(this.prototype.options,e)};var i="_leaflet_events";n.Mixin={},n.Mixin.Events={addEventListener:function(e,t,r){var o,u,a,s=this[i]=this[i]||{};if("object"==typeof e){for(o in e)e.hasOwnProperty(o)&&this.addEventListener(o,e[o],t);return this}for(e=n.Util.splitWords(e),u=0,a=e.length;u<a;u++)s[e[u]]=s[e[u]]||[],s[e[u]].push({action:t,context:r||this});return this},hasEventListeners:function(e){return i in this&&e in this[i]&&this[i][e].length>0},removeEventListener:function(e,t,r){var o,u,a,f,l,s=this[i];if("object"==typeof e){for(o in e)e.hasOwnProperty(o)&&this.removeEventListener(o,e[o],t);return this}for(e=n.Util.splitWords(e),u=0,a=e.length;u<a;u++)if(this.hasEventListeners(e[u]))for(f=s[e[u]],l=f.length-1;l>=0;l--)(!t||f[l].action===t)&&(!r||f[l].context===r)&&f.splice(l,1);return this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;for(var r=n.Util.extend({type:e,target:this},t),s=this[i][e].slice(),o=0,u=s.length;o<u;o++)s[o].action.call(s[o].context||this,r);return this}},n.Mixin.Events.on=n.Mixin.Events.addEventListener,n.Mixin.Events.off=n.Mixin.Events.removeEventListener,n.Mixin.Events.fire=n.Mixin.Events.fireEvent,function(){var r=navigator.userAgent.toLowerCase(),i=!!e.ActiveXObject,s=i&&!e.XMLHttpRequest,o=r.indexOf("webkit")!==-1,u=r.indexOf("gecko")!==-1,a=r.indexOf("chrome")!==-1,f=e.opera,l=r.indexOf("android")!==-1,c=r.search("android [23]")!==-1,h=typeof orientation!=t+"",p=document.documentElement,d=i&&"transition"in p.style,v=o&&"WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix,m=u&&"MozPerspective"in p.style,g=f&&"OTransition"in p.style,y=!e.L_NO_TOUCH&&function(){var e="ontouchstart";if(e in p)return!0;var t=document.createElement("div"),n=!1;return!!t.setAttribute&&(t.setAttribute(e,"return;"),"function"==typeof t[e]&&(n=!0),t.removeAttribute(e),t=null,n)}(),b="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)").matches;n.Browser={ua:r,ie:i,ie6:s,webkit:o,gecko:u,opera:f,android:l,android23:c,chrome:a,ie3d:d,webkit3d:v,gecko3d:m,opera3d:g,any3d:!e.L_DISABLE_3D&&(d||v||m||g),mobile:h,mobileWebkit:h&&o,mobileWebkit3d:h&&v,mobileOpera:h&&f,touch:y,retina:b}}(),n.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},n.Point.prototype={add:function(e){return this.clone()._add(n.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(n.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e,t){return new n.Point(this.x/e,this.y/e,t)},multiplyBy:function(e,t){return new n.Point(this.x*e,this.y*e,t)},distanceTo:function(e){e=n.point(e);var t=e.x-this.x,r=e.y-this.y;return Math.sqrt(t*t+r*r)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},clone:function(){return new n.Point(this.x,this.y)},toString:function(){return"Point("+n.Util.formatNum(this.x)+", "+n.Util.formatNum(this.y)+")"}},n.point=function(e,t,r){return e instanceof n.Point?e:e instanceof Array?new n.Point(e[0],e[1]):isNaN(e)?e:new n.Point(e,t,r)},n.Bounds=n.Class.extend({initialize:function(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])},extend:function(e){return e=n.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new n.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new n.Point(this.min.x,this.max.y)},getTopRight:function(){return new n.Point(this.max.x,this.min.y)},contains:function(e){var t,r;return e="number"==typeof e[0]||e instanceof n.Point?n.point(e):n.bounds(e),e instanceof n.Bounds?(t=e.min,r=e.max):t=r=e,t.x>=this.min.x&&r.x<=this.max.x&&t.y>=this.min.y&&r.y<=this.max.y},intersects:function(e){e=n.bounds(e);var t=this.min,r=this.max,i=e.min,s=e.max,o=s.x>=t.x&&i.x<=r.x,u=s.y>=t.y&&i.y<=r.y;return o&&u}}),n.bounds=function(e,t){return!e||e instanceof n.Bounds?e:new n.Bounds(e,t)},n.Transformation=n.Class.extend({initialize:function(e,t,n,r){this._a=e,this._b=t,this._c=n,this._d=r},transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new n.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}}),n.DomUtil={get:function(e){return"string"==typeof e?document.getElementById(e):e},getStyle:function(e,t){var n=e.style[t];if(!n&&e.currentStyle&&(n=e.currentStyle[t]),!n||"auto"===n){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n},getViewportOffset:function(e){var t=0,r=0,i=e,s=document.body;do{if(t+=i.offsetTop||0,r+=i.offsetLeft||0,i.offsetParent===s&&"absolute"===n.DomUtil.getStyle(i,"position"))break;if("fixed"===n.DomUtil.getStyle(i,"position")){t+=s.scrollTop||0,r+=s.scrollLeft||0;break}i=i.offsetParent}while(i);i=e;do{if(i===s)break;t-=i.scrollTop||0,r-=i.scrollLeft||0,i=i.parentNode}while(i);return new n.Point(r,t)},create:function(e,t,n){var r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=n.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(e,t){return e.className.length>0&&RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){n.DomUtil.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){function n(e,n){return n===t?"":e}e.className=e.className.replace(/(\S+)\s*/g,n).replace(/(^\s+|\s+$)/,"")},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if(n.Browser.ie){var r=!1,i="DXImageTransform.Microsoft.Alpha";try{r=e.filters.item(i)}catch(s){}t=Math.round(100*t),r?(r.Enabled=100!==t,r.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}},testProp:function(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1},getTranslateString:function(e){var t=n.Browser.webkit3d,r="translate"+(t?"3d":"")+"(",i=(t?",0":"")+")";return r+e.x+"px,"+e.y+"px"+i},getScaleString:function(e,t){var r=n.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),i=" scale("+e+") ";return r+i},setPosition:function(e,t,r){e._leaflet_pos=t,!r&&n.Browser.any3d?(e.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(t),n.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden")):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},n.Util.extend(n.DomUtil,{TRANSITION:n.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:n.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])}),n.LatLng=function(e,t,n){var r=parseFloat(e),i=parseFloat(t);if(isNaN(r)||isNaN(i))throw Error("Invalid LatLng object: ("+e+", "+t+")");n!==!0&&(r=Math.max(Math.min(r,90),-90),i=(i+180)%360+(i<-180||180===i?180:-180)),this.lat=r,this.lng=i},n.Util.extend(n.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),n.LatLng.prototype={equals:function(e){if(!e)return!1;e=n.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=n.LatLng.MAX_MARGIN},toString:function(){return"LatLng("+n.Util.formatNum(this.lat)+", "+n.Util.formatNum(this.lng)+")"},distanceTo:function(e){e=n.latLng(e);var t=6378137,r=n.LatLng.DEG_TO_RAD,i=(e.lat-this.lat)*r,s=(e.lng-this.lng)*r,o=this.lat*r,u=e.lat*r,a=Math.sin(i/2),f=Math.sin(s/2),l=a*a+f*f*Math.cos(o)*Math.cos(u);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}},n.latLng=function(e,t,r){return e instanceof n.LatLng?e:e instanceof Array?new n.LatLng(e[0],e[1]):isNaN(e)?e:new n.LatLng(e,t,r)},n.LatLngBounds=n.Class.extend({initialize:function(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])},extend:function(e){return e="number"==typeof e[0]||e instanceof n.LatLng?n.latLng(e):n.latLngBounds(e),e instanceof n.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new n.LatLng(e.lat,e.lng,(!0)),this._northEast=new n.LatLng(e.lat,e.lng,(!0))):e instanceof n.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,r=this._northEast,i=Math.abs(t.lat-r.lat)*e,s=Math.abs(t.lng-r.lng)*e;return new n.LatLngBounds(new n.LatLng(t.lat-i,t.lng-s),new n.LatLng(r.lat+i,r.lng+s))},getCenter:function(){return new n.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new n.LatLng(this._northEast.lat,this._southWest.lng,(!0))},getSouthEast:function(){return new n.LatLng(this._southWest.lat,this._northEast.lng,(!0))},contains:function(e){e="number"==typeof e[0]||e instanceof n.LatLng?n.latLng(e):n.latLngBounds(e);var i,s,t=this._southWest,r=this._northEast;return e instanceof n.LatLngBounds?(i=e.getSouthWest(),s=e.getNorthEast()):i=s=e,i.lat>=t.lat&&s.lat<=r.lat&&i.lng>=t.lng&&s.lng<=r.lng},intersects:function(e){e=n.latLngBounds(e);var t=this._southWest,r=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),o=s.lat>=t.lat&&i.lat<=r.lat,u=s.lng>=t.lng&&i.lng<=r.lng;return o&&u},toBBoxString:function(){var e=this._southWest,t=this._northEast;return[e.lng,e.lat,t.lng,t.lat].join(",")},equals:function(e){return!!e&&(e=n.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast()))}}),n.latLngBounds=function(e,t){return!e||e instanceof n.LatLngBounds?e:new n.LatLngBounds(e,t)},n.Projection={},n.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=n.LatLng.DEG_TO_RAD,r=this.MAX_LATITUDE,i=Math.max(Math.min(r,e.lat),-r),s=e.lng*t,o=i*t;return o=Math.log(Math.tan(Math.PI/4+o/2)),new n.Point(s,o)},unproject:function(e){var t=n.LatLng.RAD_TO_DEG,r=e.x*t,i=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new n.LatLng(i,r,(!0))}},n.Projection.LonLat={project:function(e){return new n.Point(e.lng,e.lat)},unproject:function(e){return new n.LatLng(e.y,e.x,(!0))}},n.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)}},n.CRS.EPSG3857=n.Util.extend({},n.CRS,{code:"EPSG:3857",projection:n.Projection.SphericalMercator,transformation:new n.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),n=6378137;return t.multiplyBy(n)}}),n.CRS.EPSG900913=n.Util.extend({},n.CRS.EPSG3857,{code:"EPSG:900913"}),n.CRS.EPSG4326=n.Util.extend({},n.CRS,{code:"EPSG:4326",projection:n.Projection.LonLat,transformation:new n.Transformation(1/360,.5,-1/360,.5)}),n.Map=n.Class.extend({includes:n.Mixin.Events,options:{crs:n.CRS.EPSG3857,fadeAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23,trackResize:!0,markerZoomAnimation:n.DomUtil.TRANSITION&&n.Browser.any3d},initialize:function(e,r){r=n.Util.setOptions(this,r),this._initContainer(e),this._initLayout(),this._initHooks(),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.center&&r.zoom!==t&&this.setView(n.latLng(r.center),r.zoom,!0),this._initLayers(r.layers)},setView:function(e,t){return this._resetView(n.latLng(e),this._limitZoom(t)),this},setZoom:function(e){return this.setView(this.getCenter(),e)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(e){var t=this.getBoundsZoom(e);return this.setView(n.latLngBounds(e).getCenter(),t)},fitWorld:function(){var e=new n.LatLng((-60),(-170)),t=new n.LatLng(85,179);return this.fitBounds(new n.LatLngBounds(e,t))},panTo:function(e){return this.setView(e,this._zoom)},panBy:function(e){return this.fire("movestart"),this._rawPanBy(n.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){if(e=n.latLngBounds(e),this.options.maxBounds=e,!e)return this._boundsMinZoom=null,this;var t=this.getBoundsZoom(e,!0);return this._boundsMinZoom=t,this._loaded&&(this._zoom<t?this.setView(e.getCenter(),t):this.panInsideBounds(e)),this},panInsideBounds:function(e){e=n.latLngBounds(e);var t=this.getBounds(),r=this.project(t.getSouthWest()),i=this.project(t.getNorthEast()),s=this.project(e.getSouthWest()),o=this.project(e.getNorthEast()),u=0,a=0;return i.y<o.y&&(a=o.y-i.y),i.x>o.x&&(u=o.x-i.x),r.y>s.y&&(a=s.y-r.y),r.x<s.x&&(u=s.x-r.x),this.panBy(new n.Point(u,a,(!0)))},addLayer:function(e){var t=n.Util.stamp(e);if(this._layers[t])return this;this._layers[t]=e,e.options&&!isNaN(e.options.maxZoom)&&(this._layersMaxZoom=Math.max(this._layersMaxZoom||0,e.options.maxZoom)),e.options&&!isNaN(e.options.minZoom)&&(this._layersMinZoom=Math.min(this._layersMinZoom||1/0,e.options.minZoom)),this.options.zoomAnimation&&n.TileLayer&&e instanceof n.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this));var r=function(){e.onAdd(this),this.fire("layeradd",{layer:e})};return this._loaded?r.call(this):this.on("load",r,this),this},removeLayer:function(e){var t=n.Util.stamp(e);if(this._layers[t])return e.onRemove(this),delete this._layers[t],this.options.zoomAnimation&&n.TileLayer&&e instanceof n.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:e})},hasLayer:function(e){var t=n.Util.stamp(e);return this._layers.hasOwnProperty(t)},invalidateSize:function(e){var t=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var r=t.subtract(this.getSize()).divideBy(2,!0);return e===!0?this.panBy(r):(this._rawPanBy(r),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n.Util.bind(this.fire,this,"moveend"),200)),this},addHandler:function(e,t){if(t)return this[e]=new t(this),this.options[e]&&this[e].enable(),this},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),r=this.unproject(e.getTopRight());return new n.LatLngBounds(t,r)},getMinZoom:function(){var e=this.options.minZoom||0,t=this._layersMinZoom||0,n=this._boundsMinZoom||0;return Math.max(e,t,n)},getMaxZoom:function(){var e=this.options.maxZoom===t?1/0:this.options.maxZoom,n=this._layersMaxZoom===t?1/0:this._layersMaxZoom;return Math.min(e,n)},getBoundsZoom:function(e,t){e=n.latLngBounds(e);var a,f,l,r=this.getSize(),i=this.options.minZoom||0,s=this.getMaxZoom(),o=e.getNorthEast(),u=e.getSouthWest(),c=!0;t&&i--;do i++,f=this.project(o,i),l=this.project(u,i),a=new n.Point(Math.abs(f.x-l.x),Math.abs(l.y-f.y)),c=t?a.x<r.x||a.y<r.y:a.x<=r.x&&a.y<=r.y;while(c&&i<=s);return c&&t?null:t?i:i-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new n.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size},getPixelBounds:function(){var e=this._getTopLeftPoint();return new n.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,r){return r=r===t?this._zoom:r,this.options.crs.latLngToPoint(n.latLng(e),r)},unproject:function(e,r){return r=r===t?this._zoom:r,this.options.crs.pointToLatLng(n.point(e),r)},layerPointToLatLng:function(e){var t=n.point(e).add(this._initialTopLeftPoint);return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(n.latLng(e))._round();return t._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(e){return n.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return n.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(n.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(n.latLng(e)))},mouseEventToContainerPoint:function(e){return n.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=n.DomUtil.get(e);if(t._leaflet)throw Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;e.innerHTML="",n.DomUtil.addClass(e,"leaflet-container"),n.Browser.touch&&n.DomUtil.addClass(e,"leaflet-touch"),this.options.fadeAnimation&&n.DomUtil.addClass(e,"leaflet-fade-anim");var t=n.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),this._objectsPane=e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(n.DomUtil.addClass(e.markerPane,t),n.DomUtil.addClass(e.shadowPane,t),n.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return n.DomUtil.create("div",e,t||this._objectsPane)},_initializers:[],_initHooks:function(){var e,t;for(e=0,t=this._initializers.length;e<t;e++)this._initializers[e].call(this)},_initLayers:function(e){e=e?e instanceof Array?e:[e]:[],this._layers={},this._tileLayersNum=0;var t,n;for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_resetView:function(e,t,r,i){var s=this._zoom!==t;i||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),r?this._initialTopLeftPoint._add(this._getMapPanePos()):n.DomUtil.setPosition(this._mapPane,new n.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum,this.fire("viewreset",{hard:!r}),this.fire("move"),(s||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!r}),this._loaded||(this._loaded=!0,this.fire("load"))},_rawPanBy:function(e){n.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_initEvents:function(){if(n.DomEvent){n.DomEvent.on(this._container,"click",this._onMouseClick,this);var r,i,t=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(r=0,i=t.length;r<i;r++)n.DomEvent.on(this._container,t[r],this._fireMouseEvent,this);this.options.trackResize&&n.DomEvent.on(e,"resize",this._onResize,this)}},_onResize:function(){n.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=n.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(e){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&n.DomEvent.preventDefault(e);var r=this.mouseEventToContainerPoint(e),i=this.containerPointToLayerPoint(r),s=this.layerPointToLatLng(i);this.fire(t,{latlng:s,layerPoint:i,containerPoint:r,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(n.Util.bind(this._clearTileBg,this),500))},_getMapPanePos:function(){return n.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var n=this.getSize().divideBy(2);return this.project(e,t)._subtract(n)._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewTopLeftPoint(n,t).add(this._getMapPanePos());return this.project(e,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize().divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),n.Map.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initializers.push(n)},n.map=function(e,t){return new n.Map(e,t)},n.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(e){var t=n.LatLng.DEG_TO_RAD,r=this.MAX_LATITUDE,i=Math.max(Math.min(r,e.lat),-r),s=this.R_MAJOR,o=this.R_MINOR,u=e.lng*t*s,a=i*t,f=o/s,l=Math.sqrt(1-f*f),c=l*Math.sin(a);c=Math.pow((1-c)/(1+c),.5*l);var h=Math.tan(.5*(.5*Math.PI-a))/c;return a=-o*Math.log(h),new n.Point(u,a)},unproject:function(e){for(var d,t=n.LatLng.RAD_TO_DEG,r=this.R_MAJOR,i=this.R_MINOR,s=e.x*t/r,o=i/r,u=Math.sqrt(1-o*o),a=Math.exp(-e.y/i),f=Math.PI/2-2*Math.atan(a),l=15,c=1e-7,h=l,p=.1;Math.abs(p)>c&&--h>0;)d=u*Math.sin(f),p=Math.PI/2-2*Math.atan(a*Math.pow((1-d)/(1+d),.5*u))-f,f+=p;return new n.LatLng(f*t,s,(!0))}},n.CRS.EPSG3395=n.Util.extend({},n.CRS,{code:"EPSG:3395",projection:n.Projection.Mercator,transformation:function(){var e=n.Projection.Mercator,t=e.R_MAJOR,r=e.R_MINOR;return new n.Transformation(.5/(Math.PI*t),.5,-.5/(Math.PI*r),.5)}()}),n.TileLayer=n.Class.extend({includes:n.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:n.Browser.mobile,updateWhenIdle:n.Browser.mobile},initialize:function(e,t){t=n.Util.setOptions(this,t),t.detectRetina&&n.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),this._url=e;var r=this.options.subdomains;"string"==typeof r&&(this.options.subdomains=r.split(""))},onAdd:function(e){this._map=e,this._initContainer(),this._createTileProto(),e.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=n.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._panes.tilePane.removeChild(this._container),e.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==t&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){for(var i,n=e.getElementsByClassName("leaflet-layer"),r=-t(1/0,-(1/0)),s=0,o=n.length;s<o;s++)n[s]!==this._container&&(i=parseInt(n[s].style.zIndex,10),isNaN(i)||(r=t(r,i)));this._container.style.zIndex=isFinite(r)?r+t(1,-1):""},_updateOpacity:function(){n.DomUtil.setOpacity(this._container,this.options.opacity);var e,t=this._tiles;if(n.Browser.webkit)for(e in t)t.hasOwnProperty(e)&&(t[e].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var e=this._map._panes.tilePane;this._container&&!e.empty||(this._container=n.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity())},_resetCallback:function(e){this._reset(e.hard)},_reset:function(e){var t,n=this._tiles;for(t in n)n.hasOwnProperty(t)&&this.fire("tileunload",{tile:n[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),e&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(e){if(!this._map._panTransition||!this._map._panTransition._inProgress){var t=this._map.getPixelBounds(),r=this._map.getZoom(),i=this.options.tileSize;if(!(r>this.options.maxZoom||r<this.options.minZoom)){var s=new n.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),o=new n.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),u=new n.Bounds(s,o);this._addTilesFromCenterOut(u),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(u)}}},_addTilesFromCenterOut:function(e){var i,s,o,t=[],r=e.getCenter();for(i=e.min.y;i<=e.max.y;i++)for(s=e.min.x;s<=e.max.x;s++)o=new n.Point(s,i),this._tileShouldBeLoaded(o)&&t.push(o);var u=t.length;if(0!==u){t.sort(function(e,t){return e.distanceTo(r)-t.distanceTo(r)});var a=document.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=u,s=0;s<u;s++)this._addTile(t[s],a);this._container.appendChild(a)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;if(!this.options.continuousWorld){var t=this._getWrapTileNum();if(this.options.noWrap&&(e.x<0||e.x>=t)||e.y<0||e.y>=t)return!1}return!0},_removeOtherTiles:function(e){var t,n,r,i;for(i in this._tiles)this._tiles.hasOwnProperty(i)&&(t=i.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),(n<e.min.x||n>e.max.x||r<e.min.y||r>e.max.y)&&this._removeTile(i))},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(n.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._container&&this._container.removeChild(t),n.Browser.android||(t.src=n.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var r=this._getTilePos(e),i=this._getTile();n.DomUtil.setPosition(i,r,n.Browser.chrome||n.Browser.android23),this._tiles[e.x+":"+e.y]=i,this._loadTile(i,e),i.parentNode!==this._container&&t.appendChild(i)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+e.zoomOffset},_getTilePos:function(e){var t=this._map.getPixelOrigin(),n=this.options.tileSize;return e.multiplyBy(n).subtract(t)},getTileUrl:function(e){return this._adjustTilePoint(e),n.Util.template(this._url,n.Util.extend({s:this._getSubdomain(e),z:this._getZoomForUrl(),x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(e){var t=this._getWrapTileNum();!this.options.continuousWorld&&!this.options.noWrap&&(e.x=(e.x%t+t)%t),this.options.tms&&(e.y=t-e.y-1)},_getSubdomain:function(e){var t=(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_createTileProto:function(){var e=this._tileImg=n.DomUtil.create("img","leaflet-tile");e.galleryimg="no";var t=this.options.tileSize;e.style.width=t+"px",e.style.height=t+"px"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(e){},_createTile:function(){var e=this._tileImg.cloneNode(!1);return e.onselectstart=e.onmousemove=n.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,e.src=this.getTileUrl(t)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(e){var t=this._layer;this.src!==n.Util.emptyImageUrl&&(n.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(e){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var n=t.options.errorTileUrl;n&&(this.src=n),t._tileLoaded()}}),n.tileLayer=function(e,t){return new n.TileLayer(e,t)},n.TileLayer.WMS=n.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var r=n.Util.extend({},this.defaultWmsParams);t.detectRetina&&n.Browser.retina?r.width=r.height=2*this.options.tileSize:r.width=r.height=this.options.tileSize;for(var i in t)this.options.hasOwnProperty(i)||(r[i]=t[i]);this.wmsParams=r,n.Util.setOptions(this,t)},onAdd:function(e){var t=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[t]=e.options.crs.code,n.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e,t){var r=this._map,i=r.options.crs,s=this.options.tileSize,o=e.multiplyBy(s),u=o.add(new n.Point(s,s)),a=i.project(r.unproject(o,t)),f=i.project(r.unproject(u,t)),l=[a.x,f.y,f.x,a.y].join(","),c=n.Util.template(this._url,{s:this._getSubdomain(e)});return c+n.Util.getParamString(this.wmsParams)+"&bbox="+l},setParams:function(e,t){return n.Util.extend(this.wmsParams,e),t||this.redraw(),this}}),n.tileLayer.wms=function(e,t){return new n.TileLayer.WMS(e,t)},n.TileLayer.Canvas=n.TileLayer.extend({options:{async:!1},
initialize:function(e){n.Util.setOptions(this,e)},redraw:function(){var e,t=this._tiles;for(e in t)t.hasOwnProperty(e)&&this._redrawTile(t[e])},_redrawTile:function(e){this.drawTile(e,e._tilePoint,e._zoom)},_createTileProto:function(){var e=this._canvasProto=n.DomUtil.create("canvas","leaflet-tile"),t=this.options.tileSize;e.width=t,e.height=t},_createTile:function(){var e=this._canvasProto.cloneNode(!1);return e.onselectstart=e.onmousemove=n.Util.falseFn,e},_loadTile:function(e,t,n){e._layer=this,e._tilePoint=t,e._zoom=n,this.drawTile(e,t,n),this.options.async||this.tileDrawn(e)},drawTile:function(e,t,n){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),n.tileLayer.canvas=function(e){return new n.TileLayer.Canvas(e)},n.ImageOverlay=n.Class.extend({includes:n.Mixin.Events,options:{opacity:1},initialize:function(e,t,r){this._url=e,this._bounds=n.latLngBounds(t),n.Util.setOptions(this,r)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&n.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},_initImage:function(){this._image=n.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&n.Browser.any3d?n.DomUtil.addClass(this._image,"leaflet-zoom-animated"):n.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),n.Util.extend(this._image,{galleryimg:"no",onselectstart:n.Util.falseFn,onmousemove:n.Util.falseFn,onload:n.Util.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,r=this._image,i=t.getZoomScale(e.zoom),s=this._bounds.getNorthWest(),o=this._bounds.getSouthEast(),u=t._latLngToNewLayerPoint(s,e.zoom,e.center),a=t._latLngToNewLayerPoint(o,e.zoom,e.center).subtract(u),f=t.latLngToLayerPoint(o).subtract(t.latLngToLayerPoint(s)),l=u.add(a.subtract(f).divideBy(2));r.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),r=this._map.latLngToLayerPoint(this._bounds.getSouthEast()).subtract(t);n.DomUtil.setPosition(e,t),e.style.width=r.x+"px",e.style.height=r.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){n.DomUtil.setOpacity(this._image,this.options.opacity)}}),n.imageOverlay=function(e,t,r){return new n.ImageOverlay(e,t,r)},n.Icon=n.Class.extend({options:{className:""},initialize:function(e){n.Util.setOptions(this,e)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(e){var t=this._getIconUrl(e);if(!t){if("icon"===e)throw Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(t);return this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var s,r=this.options,i=n.point(r[t+"Size"]);s="shadow"===t?n.point(r.shadowAnchor||r.iconAnchor):n.point(r.iconAnchor),!s&&i&&(s=i.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+r.className,s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e){var t;return n.Browser.ie6?(t=document.createElement("div"),t.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'")'):(t=document.createElement("img"),t.src=e),t},_getIconUrl:function(e){return this.options[e+"Url"]}}),n.icon=function(e){return new n.Icon(e)},n.Icon.Default=n.Icon.extend({options:{iconSize:new n.Point(25,41),iconAnchor:new n.Point(13,41),popupAnchor:new n.Point(1,(-34)),shadowSize:new n.Point(41,41)},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];var r=n.Icon.Default.imagePath;if(!r)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return r+"/marker-"+e+".png"}}),n.Icon.Default.imagePath=function(){var n,r,i,s,e=document.getElementsByTagName("script"),t=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(n=0,r=e.length;n<r;n++)if(i=e[n].src,s=i.match(t))return i.split(t)[0]+"/images"}(),n.Marker=n.Class.extend({includes:n.Mixin.Events,options:{icon:new n.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1},initialize:function(e,t){n.Util.setOptions(this,t),this._latlng=n.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._removeIcon(),this.closePopup&&this.closePopup(),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){this._latlng=n.latLng(e),this.update(),this._popup&&this._popup.setLatLng(e)},setZIndexOffset:function(e){this.options.zIndexOffset=e,this.update()},setIcon:function(e){this._map&&this._removeIcon(),this.options.icon=e,this._map&&(this._initIcon(),this.update())},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}},_initIcon:function(){var e=this.options,t=this._map,r=t.options.zoomAnimation&&t.options.markerZoomAnimation,i=r?"leaflet-zoom-animated":"leaflet-zoom-hide",s=!1;this._icon||(this._icon=e.icon.createIcon(),e.title&&(this._icon.title=e.title),this._initInteraction(),s=this.options.opacity<1,n.DomUtil.addClass(this._icon,i)),this._shadow||(this._shadow=e.icon.createShadow(),this._shadow&&(n.DomUtil.addClass(this._shadow,i),s=this.options.opacity<1)),s&&this._updateOpacity();var o=this._map._panes;o.markerPane.appendChild(this._icon),this._shadow&&o.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var e=this._map._panes;e.markerPane.removeChild(this._icon),this._shadow&&e.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(e){n.DomUtil.setPosition(this._icon,e),this._shadow&&n.DomUtil.setPosition(this._shadow,e),this._icon.style.zIndex=e.y+this.options.zIndexOffset},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout"];n.DomUtil.addClass(e,"leaflet-clickable"),n.DomEvent.on(e,"click",this._onMouseClick,this);for(var r=0;r<t.length;r++)n.DomEvent.on(e,t[r],this._fireMouseEvent,this);n.Handler.MarkerDrag&&(this.dragging=new n.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){n.DomEvent.stopPropagation(e),this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this.fire(e.type,{originalEvent:e})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e}),"mousedown"!==e.type&&n.DomEvent.stopPropagation(e)},setOpacity:function(e){this.options.opacity=e,this._map&&this._updateOpacity()},_updateOpacity:function(){n.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&n.DomUtil.setOpacity(this._shadow,this.options.opacity)}}),n.marker=function(e,t){return new n.Marker(e,t)},n.DivIcon=n.Icon.extend({options:{iconSize:new n.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var e=document.createElement("div"),t=this.options;return t.html&&(e.innerHTML=t.html),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),n.divIcon=function(e){return new n.DivIcon(e)},n.Map.mergeOptions({closePopupOnClick:!0}),n.Popup=n.Class.extend({includes:n.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new n.Point(0,6),autoPanPadding:new n.Point(5,5),className:""},initialize:function(e,t){n.Util.setOptions(this,e),this._source=t},onAdd:function(e){this._map=e,this._container||this._initLayout(),this._updateContent();var t=e.options.fadeAnimation;t&&n.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on("viewreset",this._updatePosition,this),n.Browser.any3d&&e.on("zoomanim",this._zoomAnimation,this),e.options.closePopupOnClick&&e.on("preclick",this._close,this),this._update(),t&&n.DomUtil.setOpacity(this._container,1)},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),n.Util.falseFn(this._container.offsetWidth),e.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),e.options.fadeAnimation&&n.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(e){return this._latlng=n.latLng(e),this._update(),this},setContent:function(e){return this._content=e,this._update(),this},_close:function(){var e=this._map;e&&(e._popup=null,e.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var r,e="leaflet-popup",t=this._container=n.DomUtil.create("div",e+" "+this.options.className+" leaflet-zoom-animated");this.options.closeButton&&(r=this._closeButton=n.DomUtil.create("a",e+"-close-button",t),r.href="#close",r.innerHTML="&#215;",n.DomEvent.on(r,"click",this._onCloseButtonClick,this));var i=this._wrapper=n.DomUtil.create("div",e+"-content-wrapper",t);n.DomEvent.disableClickPropagation(i),this._contentNode=n.DomUtil.create("div",e+"-content",i),n.DomEvent.on(this._contentNode,"mousewheel",n.DomEvent.stopPropagation),this._tipContainer=n.DomUtil.create("div",e+"-tip-container",t),this._tip=n.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var r=e.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),t.width=r+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,s=this.options.maxHeight,o="leaflet-popup-scrolled";s&&i>s?(t.height=s+"px",n.DomUtil.addClass(e,o)):n.DomUtil.removeClass(e,o),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng),t=n.Browser.any3d,r=this.options.offset;t&&n.DomUtil.setPosition(this._container,e),this._containerBottom=-r.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+r.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);n.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,r=this._containerWidth,i=new n.Point(this._containerLeft,-t-this._containerBottom);n.Browser.any3d&&i._add(n.DomUtil.getPosition(this._container));var s=e.layerPointToContainerPoint(i),o=this.options.autoPanPadding,u=e.getSize(),a=0,f=0;s.x<0&&(a=s.x-o.x),s.x+r>u.x&&(a=s.x+r-u.x+o.x),s.y<0&&(f=s.y-o.y),s.y+t>u.y&&(f=s.y+t-u.y+o.y),(a||f)&&e.panBy(new n.Point(a,f))}},_onCloseButtonClick:function(e){this._close(),n.DomEvent.stop(e)}}),n.popup=function(e,t){return new n.Popup(e,t)},n.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(e,t){var r=n.point(this.options.icon.options.popupAnchor)||new n.Point(0,0);return r=r.add(n.Popup.prototype.options.offset),t&&t.offset&&(r=r.add(t.offset)),t=n.Util.extend({offset:r},t),this._popup||this.on("click",this.openPopup,this),this._popup=new n.Popup(t,this).setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup)),this}}),n.Map.include({openPopup:function(e){return this.closePopup(),this._popup=e,this.addLayer(e).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),n.LayerGroup=n.Class.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;t<n;t++)this.addLayer(e[t])},addLayer:function(e){var t=n.Util.stamp(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=n.Util.stamp(e);return delete this._layers[t],this._map&&this._map.removeLayer(e),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var n,r,t=Array.prototype.slice.call(arguments,1);for(n in this._layers)this._layers.hasOwnProperty(n)&&(r=this._layers[n],r[e]&&r[e].apply(r,t));return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var n in this._layers)this._layers.hasOwnProperty(n)&&e.call(t,this._layers[n])}}),n.layerGroup=function(e){return new n.LayerGroup(e)},n.FeatureGroup=n.LayerGroup.extend({includes:n.Mixin.Events,addLayer:function(e){return this._layers[n.Util.stamp(e)]?this:(e.on("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this),n.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent),this)},removeLayer:function(e){return e.off("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this),n.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent?this.invoke("unbindPopup"):this},bindPopup:function(e){return this._popupContent=e,this.invoke("bindPopup",e)},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new n.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof n.Marker?t.getLatLng():t.getBounds())},this),e},_propagateEvent:function(e){e.layer=e.target,e.target=this,this.fire(e.type,e)}}),n.featureGroup=function(e){return new n.FeatureGroup(e)},n.Path=n.Class.extend({includes:[n.Mixin.Events],statics:{CLIP_PADDING:n.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(e.innerWidth,e.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){n.Util.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this._map=null,n.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return n.Util.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),n.Map.include({_updatePathViewport:function(){var e=n.Path.CLIP_PADDING,t=this.getSize(),r=n.DomUtil.getPosition(this._mapPane),i=r.multiplyBy(-1)._subtract(t.multiplyBy(e)),s=i.add(t.multiplyBy(1+2*e));this._pathViewport=new n.Bounds(i,s)}}),n.Path.SVG_NS="http://www.w3.org/2000/svg",n.Browser.svg=!!document.createElementNS&&!!document.createElementNS(n.Path.SVG_NS,"svg").createSVGRect,n.Path=n.Path.extend({statics:{SVG:n.Browser.svg},bringToFront:function(){return this._container&&this._map._pathRoot.appendChild(this._container),this},bringToBack:function(){if(this._container){var e=this._map._pathRoot;e.insertBefore(this._container,e.firstChild)}return this},getPathString:function(){},_createElement:function(e){return document.createElementNS(n.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(n.Browser.svg||!n.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),n.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)n.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||(this._fireMouseEvent(e),n.DomEvent.stopPropagation(e))},_fireMouseEvent:function(e){if(this.hasEventListeners(e.type)){"contextmenu"===e.type&&n.DomEvent.preventDefault(e);var t=this._map,r=t.mouseEventToContainerPoint(e),i=t.containerPointToLayerPoint(r),s=t.layerPointToLatLng(i);this.fire(e.type,{latlng:s,layerPoint:i,containerPoint:r,originalEvent:e})}}}),n.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=n.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&n.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),r=this._getCenterOffset(e.center).divideBy(1-1/t),i=this.containerPointToLayerPoint(this.getSize().multiplyBy(-n.Path.CLIP_PADDING)),s=i.add(r).round();this._pathRoot.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(s.multiplyBy(-1).add(n.DomUtil.getPosition(this._pathRoot)).multiplyBy(t).add(s))+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,r=e.max,i=r.x-t.x,s=r.y-t.y,o=this._pathRoot,u=this._panes.overlayPane;n.Browser.mobileWebkit&&u.removeChild(o),n.DomUtil.setPosition(o,t),o.setAttribute("width",i),o.setAttribute("height",s),o.setAttribute("viewBox",[t.x,t.y,i,s].join(" ")),n.Browser.mobileWebkit&&u.appendChild(o)}}}),n.Path.include({bindPopup:function(e,t){return this._popup&&this._popup.options===t||(this._popup=new n.Popup(t,this)),this._popup.setContent(e),this._openPopupAdded||(this.on("click",this._openPopup,this),this._openPopupAdded=!0),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),n.Browser.vml=function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(n){return!1}}(),n.Path=n.Browser.svg||!n.Browser.vml?n.Path:n.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");n.DomUtil.addClass(e,"leaflet-vml-shape"),this.options.clickable&&n.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,n=this.options,r=this._container;r.stroked=n.stroke,r.filled=n.fill,n.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",r.appendChild(e)),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=n.dashArray.replace(/ *, */g," "):e.dashStyle=""):e&&(r.removeChild(e),this._stroke=null),n.fill?(t||(t=this._fill=this._createElement("fill"),r.appendChild(t)),t.color=n.fillColor||n.color,t.opacity=n.fillOpacity):t&&(r.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),n.Map.include(n.Browser.svg||!n.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=document.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),n.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),n.Path=n.Path.SVG&&!e.L_PREFER_CANVAS||!n.Browser.canvas?n.Path:n.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return n.Util.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&(n.Util.cancelAnimFrame(this._fireMapMoveEnd),this._updateRequest=n.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color)},_drawPath:function(){var e,t,r,i,s,o;for(this._ctx.beginPath(),e=0,r=this._parts.length;e<r;e++){for(t=0,i=this._parts[e].length;t<i;t++)s=this._parts[e][t],o=(0===t?"move":"line")+"To",this._ctx[o](s.x,s.y);this instanceof n.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(t.fillOpacity<1&&(e.globalAlpha=t.fillOpacity),e.fill()),t.stroke&&(t.opacity<1&&(e.globalAlpha=t.opacity),e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(e){this._containsPoint(e.layerPoint)&&this.fire("click",e)}}),n.Map.include(n.Path.SVG&&!e.L_PREFER_CANVAS||!n.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=document.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,r=e.max.subtract(t),i=this._pathRoot;n.DomUtil.setPosition(i,t),i.width=r.x,i.height=r.y,i.getContext("2d").translate(-t.x,-t.y)}}}),n.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,n){var r=e.length,i=typeof Uint8Array!=t+""?Uint8Array:Array,s=new i(r);s[0]=s[r-1]=1,this._simplifyDPStep(e,s,n,0,r-1);var o,u=[];for(o=0;o<r;o++)s[o]&&u.push(e[o]);return u},_simplifyDPStep:function(e,t,n,r,i){var o,u,a,s=0;for(u=r+1;u<=i-1;u++)a=this._sqClosestPointOnSegment(e[u],e[r],e[i],!0),a>s&&(o=u,s=a);s>n&&(t[o]=1,this._simplifyDPStep(e,t,n,r,o),this._simplifyDPStep(e,t,n,o,i))},_reducePoints:function(e,t){for(var n=[e[0]],r=1,i=0,s=e.length;r<s;r++)this._sqDist(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<s-1&&n.push(e[s-1]),n},clipSegment:function(e,t,n,r){var o=(n.min,n.max,r?this._lastCode:this._getBitCode(e,n)),u=this._getBitCode(t,n);for(this._lastCode=u;;){if(!(o|u))return[e,t];if(o&u)return!1;var a=o||u,f=this._getEdgeIntersection(e,t,a,n),l=this._getBitCode(f,n);a===o?(e=f,o=l):(t=f,u=l)}},_getEdgeIntersection:function(e,t,r,i){var s=t.x-e.x,o=t.y-e.y,u=i.min,a=i.max;return 8&r?new n.Point(e.x+s*(a.y-e.y)/o,a.y):4&r?new n.Point(e.x+s*(u.y-e.y)/o,u.y):2&r?new n.Point(a.x,e.y+o*(a.x-e.x)/s):1&r?new n.Point(u.x,e.y+o*(u.x-e.x)/s):void 0},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},_sqClosestPointOnSegment:function(e,t,r,i){var l,s=t.x,o=t.y,u=r.x-s,a=r.y-o,f=u*u+a*a;return f>0&&(l=((e.x-s)*u+(e.y-o)*a)/f,l>1?(s=r.x,o=r.y):l>0&&(s+=u*l,o+=a*l)),u=e.x-s,a=e.y-o,i?u*u+a*a:new n.Point(s,o)}},n.Polyline=n.Path.extend({initialize:function(e,t){n.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e),n.Handler.PolyEdit&&(this.editing=new n.Handler.PolyEdit(this),this.options.editable&&this.editing.enable())},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;e<t;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,n="";e<t;e++)n+=this._getPathPartStr(this._parts[e]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(n.latLng(e)),this.redraw()},spliceLatLngs:function(e,t){var n=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),n},closestLayerPoint:function(e){for(var i,s,t=1/0,r=this._parts,o=null,u=0,a=r.length;u<a;u++)for(var f=r[u],l=1,c=f.length;l<c;l++){i=f[l-1],s=f[l];var h=n.LineUtil._sqClosestPointOnSegment(e,i,s,!0);h<t&&(t=h,o=n.LineUtil._sqClosestPointOnSegment(e,i,s))}return o&&(o.distance=Math.sqrt(t)),o},getBounds:function(){for(var e=new n.LatLngBounds,t=this.getLatLngs(),r=0,i=t.length;r<i;r++)e.extend(t[r]);return e},onAdd:function(e){n.Path.prototype.onAdd.call(this,e),this.editing&&this.editing.enabled()&&this.editing.addHooks()},onRemove:function(e){this.editing&&this.editing.enabled()&&this.editing.removeHooks(),n.Path.prototype.onRemove.call(this,e)},_convertLatLngs:function(e){var t,r;for(t=0,r=e.length;t<r;t++){if(e[t]instanceof Array&&"number"!=typeof e[t][0])return;e[t]=n.latLng(e[t])}return e},_initEvents:function(){n.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var o,t=n.Path.VML,r=0,i=e.length,s="";r<i;r++)o=e[r],t&&o._round(),s+=(r?"L":"M")+o.x+" "+o.y;return s},_clipPoints:function(){var r,i,s,e=this._originalPoints,t=e.length;if(this.options.noClip)return void(this._parts=[e]);this._parts=[];var o=this._parts,u=this._map._pathViewport,a=n.LineUtil;for(r=0,i=0;r<t-1;r++)s=a.clipSegment(e[r],e[r+1],u,r),s&&(o[i]=o[i]||[],o[i].push(s[0]),s[1]===e[r+1]&&r!==t-2||(o[i].push(s[1]),i++))},_simplifyPoints:function(){for(var e=this._parts,t=n.LineUtil,r=0,i=e.length;r<i;r++)e[r]=t.simplify(e[r],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),n.Path.prototype._updatePath.call(this))}}),n.polyline=function(e,t){return new n.Polyline(e,t)},n.PolyUtil={},n.PolyUtil.clipPolygon=function(e,t){var s,u,a,f,l,c,h,p,d,o=(t.min,t.max,[1,4,2,8]),v=n.LineUtil;for(u=0,h=e.length;u<h;u++)e[u]._code=v._getBitCode(e[u],t);for(f=0;f<4;f++){for(p=o[f],s=[],u=0,h=e.length,a=h-1;u<h;a=u++)l=e[u],c=e[a],l._code&p?c._code&p||(d=v._getEdgeIntersection(c,l,p,t),d._code=v._getBitCode(d,t),s.push(d)):(c._code&p&&(d=v._getEdgeIntersection(c,l,p,t),d._code=v._getBitCode(d,t),s.push(d)),s.push(l));e=s}return e},n.Polygon=n.Polyline.extend({options:{fill:!0},initialize:function(e,t){n.Polyline.prototype.initialize.call(this,e,t),e&&e[0]instanceof Array&&"number"!=typeof e[0][0]&&(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1))},projectLatlngs:function(){if(n.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(var e=0,t=this._holes.length;e<t;e++){this._holePoints[e]=[];for(var i=0,s=this._holes[e].length;i<s;i++)this._holePoints[e][i]=this._map.latLngToLayerPoint(this._holes[e][i])}},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var r=0,i=this._parts.length;r<i;r++){var s=n.PolyUtil.clipPolygon(this._parts[r],this._map._pathViewport);s.length&&t.push(s)}this._parts=t}},_getPathPartStr:function(e){var t=n.Polyline.prototype._getPathPartStr.call(this,e);return t+(n.Browser.svg?"z":"x")}}),n.polygon=function(e,t){return new n.Polygon(e,t)},function(){function e(e){return n.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var n=0,r=t.length;for(this.eachLayer(function(e){n<r?e.setLatLngs(t[n++]):this.removeLayer(e)},this);n<r;)this.addLayer(new e(t[n++],this._options));return this}})}n.MultiPolyline=e(n.Polyline),n.MultiPolygon=e(n.Polygon),n.multiPolyline=function(e,t){return new n.MultiPolyline(e,t)},n.multiPolygon=function(e,t){return new n.MultiPolygon(e,t)}}(),n.Rectangle=n.Polygon.extend({initialize:function(e,t){n.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=n.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]}}),n.rectangle=function(e,t){return new n.Rectangle(e,t)},n.Circle=n.Path.extend({initialize:function(e,t,r){n.Path.prototype.initialize.call(this,r),this._latlng=n.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=n.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw();
},projectLatlngs:function(){var e=this._getLngRadius(),t=new n.LatLng(this._latlng.lat,this._latlng.lng-e,(!0)),r=this._map.latLngToLayerPoint(t);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-r.x),1)},getBounds:function(){var e=this._map,t=this._radius*Math.cos(Math.PI/4),r=e.project(this._latlng),i=new n.Point(r.x-t,r.y+t),s=new n.Point(r.x+t,r.y-t),o=e.unproject(i),u=e.unproject(s);return new n.LatLngBounds(o,u)},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":n.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLngRadius:function(){var e=40075017,t=e*Math.cos(n.LatLng.DEG_TO_RAD*this._latlng.lat);return this._mRadius/t*360},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,n=this._point;return n.x-t>e.max.x||n.y-t>e.max.y||n.x+t<e.min.x||n.y+t<e.min.y}}),n.circle=function(e,t,r){return new n.Circle(e,t,r)},n.CircleMarker=n.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){n.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(e){return this._radius=e,this.redraw()}}),n.circleMarker=function(e,t){return new n.CircleMarker(e,t)},n.Polyline.include(n.Path.CANVAS?{_containsPoint:function(e,t){var r,i,s,o,u,a,f,l=this.options.weight/2;for(n.Browser.touch&&(l+=10),r=0,o=this._parts.length;r<o;r++)for(f=this._parts[r],i=0,u=f.length,s=u-1;i<u;s=i++)if((t||0!==i)&&(a=n.LineUtil.pointToSegmentDistance(e,f[s],f[i]),a<=l))return!0;return!1}}:{}),n.Polygon.include(n.Path.CANVAS?{_containsPoint:function(e){var r,i,s,o,u,a,f,l,t=!1;if(n.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(o=0,f=this._parts.length;o<f;o++)for(r=this._parts[o],u=0,l=r.length,a=l-1;u<l;a=u++)i=r[u],s=r[a],i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(t=!t);return t}}:{}),n.Circle.include(n.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,n=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+n}}:{}),n.GeoJSON=n.FeatureGroup.extend({initialize:function(e,t){n.Util.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var r,i,t=e instanceof Array?e:e.features;if(t){for(r=0,i=t.length;r<i;r++)this.addData(t[r]);return this}var s=this.options;if(!s.filter||s.filter(e)){var o=n.GeoJSON.geometryToLayer(e,s.pointToLayer);return o.feature=e,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(e,o),this.addLayer(o)}},resetStyle:function(e){var t=this.options.style;t&&this._setLayerStyle(e,t)},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),n.Util.extend(n.GeoJSON,{geometryToLayer:function(e,t){var o,u,a,f,l,r="Feature"===e.type?e.geometry:e,i=r.coordinates,s=[];switch(r.type){case"Point":return o=this.coordsToLatLng(i),t?t(e,o):new n.Marker(o);case"MultiPoint":for(a=0,f=i.length;a<f;a++)o=this.coordsToLatLng(i[a]),l=t?t(e,o):new n.Marker(o),s.push(l);return new n.FeatureGroup(s);case"LineString":return u=this.coordsToLatLngs(i),new n.Polyline(u);case"Polygon":return u=this.coordsToLatLngs(i,1),new n.Polygon(u);case"MultiLineString":return u=this.coordsToLatLngs(i,1),new n.MultiPolyline(u);case"MultiPolygon":return u=this.coordsToLatLngs(i,2),new n.MultiPolygon(u);case"GeometryCollection":for(a=0,f=r.geometries.length;a<f;a++)l=this.geometryToLayer(r.geometries[a],t),s.push(l);return new n.FeatureGroup(s);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e,t){var r=parseFloat(e[t?0:1]),i=parseFloat(e[t?1:0]);return new n.LatLng(r,i,(!0))},coordsToLatLngs:function(e,t,n){var r,s,o,i=[];for(s=0,o=e.length;s<o;s++)r=t?this.coordsToLatLngs(e[s],t-1,n):this.coordsToLatLng(e[s],n),i.push(r);return i}}),n.geoJson=function(e,t){return new n.GeoJSON(e,t)},n.DomEvent={addListener:function(e,t,r,i){var u,a,f,s=n.Util.stamp(r),o="_leaflet_"+t+s;return e[o]?this:(u=function(t){return r.call(i||e,t||n.DomEvent._getEvent())},n.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener?this.addDoubleTapListener(e,u,s):("addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",u,!1),e.addEventListener(t,u,!1)):"mouseenter"===t||"mouseleave"===t?(a=u,f="mouseenter"===t?"mouseover":"mouseout",u=function(t){if(n.DomEvent._checkMouse(e,t))return a(t)},e.addEventListener(f,u,!1)):e.addEventListener(t,u,!1):"attachEvent"in e&&e.attachEvent("on"+t,u),e[o]=u,this))},removeListener:function(e,t,r){var i=n.Util.stamp(r),s="_leaflet_"+t+i,o=e[s];if(o)return n.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,i):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",o,!1),e.removeEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1):e.removeEventListener(t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[s]=null,this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},disableClickPropagation:function(e){var t=n.DomEvent.stopPropagation;return n.DomEvent.addListener(e,n.Draggable.START,t).addListener(e,"click",t).addListener(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return n.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){var r=document.body,i=document.documentElement,s=e.pageX?e.pageX:e.clientX+r.scrollLeft+i.scrollLeft,o=e.pageY?e.pageY:e.clientY+r.scrollTop+i.scrollTop,u=new n.Point(s,o);return t?u._subtract(n.DomUtil.getViewportOffset(t)):u},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e},_getEvent:function(){var t=e.event;if(!t)for(var n=arguments.callee.caller;n&&(t=n.arguments[0],!t||e.Event!==t.constructor);)n=n.caller;return t}},n.DomEvent.on=n.DomEvent.addListener,n.DomEvent.off=n.DomEvent.removeListener,n.Draggable=n.Class.extend({includes:n.Mixin.Events,statics:{START:n.Browser.touch?"touchstart":"mousedown",END:n.Browser.touch?"touchend":"mouseup",MOVE:n.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){this._enabled||(n.DomEvent.on(this._dragStartTarget,n.Draggable.START,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(n.DomEvent.off(this._dragStartTarget,n.Draggable.START,this._onDown),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!(!n.Browser.touch&&e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)){if(this._simulateClick=!0,e.touches&&e.touches.length>1)return void(this._simulateClick=!1);var t=e.touches&&1===e.touches.length?e.touches[0]:e,r=t.target;n.DomEvent.preventDefault(e),n.Browser.touch&&"a"===r.tagName.toLowerCase()&&n.DomUtil.addClass(r,"leaflet-active"),this._moved=!1,this._moving||(this._startPos=this._newPos=n.DomUtil.getPosition(this._element),this._startPoint=new n.Point(t.clientX,t.clientY),n.DomEvent.on(document,n.Draggable.MOVE,this._onMove,this),n.DomEvent.on(document,n.Draggable.END,this._onUp,this))}},_onMove:function(e){if(!(e.touches&&e.touches.length>1)){var t=e.touches&&1===e.touches.length?e.touches[0]:e,r=new n.Point(t.clientX,t.clientY),i=r.subtract(this._startPoint);(i.x||i.y)&&(n.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,n.Browser.touch||(n.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(i),this._moving=!0,n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),n.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(e){if(this._simulateClick&&e.changedTouches){var t=e.changedTouches[0],r=t.target,i=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===r.tagName.toLowerCase()&&n.DomUtil.removeClass(r,"leaflet-active"),i<n.Draggable.TAP_TOLERANCE&&this._simulateEvent("click",t)}n.Browser.touch||(n.DomUtil.enableTextSelection(),this._restoreCursor()),n.DomEvent.off(document,n.Draggable.MOVE,this._onMove),n.DomEvent.off(document,n.Draggable.END,this._onUp),this._moved&&(n.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1},_setMovingCursor:function(){n.DomUtil.addClass(document.body,"leaflet-dragging")},_restoreCursor:function(){n.DomUtil.removeClass(document.body,"leaflet-dragging")},_simulateEvent:function(t,n){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,e,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(r)}}),n.Handler=n.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),n.Map.mergeOptions({dragging:!0,inertia:!n.Browser.android23,inertiaDeceleration:3e3,inertiaMaxSpeed:1500,inertiaThreshold:n.Browser.touch?32:14,worldCopyJump:!0}),n.Map.Drag=n.Handler.extend({addHooks:function(){if(!this._draggable){this._draggable=new n.Draggable(this._map._mapPane,this._map._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);var e=this._map.options;e.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),this._map.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e.fire("movestart").fire("dragstart"),e._panTransition&&e._panTransition._onTransitionEnd(!0),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint(new n.LatLng(0,0));this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project(new n.LatLng(0,180)).x},_onPreDrag:function(){var t=(this._map,this._worldWidth),n=Math.round(t/2),r=this._initialWorldOffset,i=this._draggable._newPos.x,s=(i-n+r)%t+n-r,o=(i+n+r)%t-n-r,u=Math.abs(s+r)<Math.abs(o+r)?s:o;this._draggable._newPos.x=u},_onDragEnd:function(){var e=this._map,r=e.options,i=+new Date-this._lastTime,s=!r.inertia||i>r.inertiaThreshold||this._positions[0]===t;if(s)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),u=(this._lastTime+i-this._times[0])/1e3,a=o.multiplyBy(.58/u),f=a.distanceTo(new n.Point(0,0)),l=Math.min(r.inertiaMaxSpeed,f),c=a.multiplyBy(l/f),h=l/r.inertiaDeceleration,p=c.multiplyBy(-h/2).round(),d={duration:h,easing:"ease-out"};n.Util.requestAnimFrame(n.Util.bind(function(){this._map.panBy(p,d)},this))}e.fire("dragend"),r.maxBounds&&n.Util.requestAnimFrame(this._panInsideMaxBounds,e,!0,e._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),n.Map.addInitHook("addHandler","dragging",n.Map.Drag),n.Map.mergeOptions({doubleClickZoom:!0}),n.Map.DoubleClickZoom=n.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(e){this.setView(e.latlng,this._zoom+1)}}),n.Map.addInitHook("addHandler","doubleClickZoom",n.Map.DoubleClickZoom),n.Map.mergeOptions({scrollWheelZoom:!n.Browser.touch}),n.Map.ScrollWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(e){var t=n.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),clearTimeout(this._timer),this._timer=setTimeout(n.Util.bind(this._performZoom,this),40),n.DomEvent.preventDefault(e)},_performZoom:function(){var e=this._map,t=Math.round(this._delta),n=e.getZoom();if(t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0,t){var r=n+t,i=this._getCenterForScrollWheelZoom(this._lastMousePos,r);e.setView(i,r)}},_getCenterForScrollWheelZoom:function(e,t){var n=this._map,r=n.getZoomScale(t),i=n.getSize().divideBy(2),s=e.subtract(i).multiplyBy(1-1/r),o=n._getTopLeftPoint().add(i).add(s);return n.unproject(o)}}),n.Map.addInitHook("addHandler","scrollWheelZoom",n.Map.ScrollWheelZoom),n.Util.extend(n.DomEvent,{addDoubleTapListener:function(e,t,n){function l(e){if(1===e.touches.length){var t=Date.now(),n=t-(r||t);o=e.touches[0],i=n>0&&n<=s,r=t}}function c(e){i&&(o.type="dblclick",t(o),r=null)}var r,o,i=!1,s=250,u="_leaflet_",a="touchstart",f="touchend";return e[u+a+n]=l,e[u+f+n]=c,e.addEventListener(a,l,!1),e.addEventListener(f,c,!1),this},removeDoubleTapListener:function(e,t){var n="_leaflet_";return e.removeEventListener(e,e[n+"touchstart"+t],!1),e.removeEventListener(e,e[n+"touchend"+t],!1),this}}),n.Map.mergeOptions({touchZoom:n.Browser.touch&&!n.Browser.android23}),n.Map.TouchZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var r=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]),s=t._getCenterLayerPoint();this._startCenter=r.add(i).divideBy(2,!0),this._startDist=r.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),n.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),n.DomEvent.preventDefault(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length){var t=this._map,r=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]);this._scale=r.distanceTo(i)/this._startDist,this._delta=r.add(i).divideBy(2,!0).subtract(this._startCenter),1!==this._scale&&(this._moved||(n.DomUtil.addClass(t._mapPane,"leaflet-zoom-anim leaflet-touching"),t.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),n.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),r=e.layerPointToLatLng(t);e.fire("zoomanim",{center:r,zoom:e.getScaleZoom(this._scale)}),e._tileBg.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(this._delta)+" "+n.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(e){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,n.DomUtil.removeClass(t._mapPane,"leaflet-touching"),n.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var r=this._getScaleOrigin(),i=t.layerPointToLatLng(r),s=t.getZoom(),o=t.getScaleZoom(this._scale)-s,u=o>0?Math.ceil(o):Math.floor(o),a=t._limitZoom(s+u);t.fire("zoomanim",{center:i,zoom:a}),t._runAnimation(i,a,t.getZoomScale(a)/this._scale,r,!0)}},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),n.Map.addInitHook("addHandler","touchZoom",n.Map.TouchZoom),n.Map.mergeOptions({boxZoom:!0}),n.Map.BoxZoom=n.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){n.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(e){return!(!e.shiftKey||1!==e.which&&1!==e.button)&&(n.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),this._box=n.DomUtil.create("div","leaflet-zoom-box",this._pane),n.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",n.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).preventDefault(e),this._map.fire("boxzoomstart"),void 0)},_onMouseMove:function(e){var t=this._startLayerPoint,r=this._box,i=this._map.mouseEventToLayerPoint(e),s=i.subtract(t),o=new n.Point(Math.min(i.x,t.x),Math.min(i.y,t.y));n.DomUtil.setPosition(r,o),r.style.width=Math.abs(s.x)-4+"px",r.style.height=Math.abs(s.y)-4+"px"},_onMouseUp:function(e){this._pane.removeChild(this._box),this._container.style.cursor="",n.DomUtil.enableTextSelection(),n.DomEvent.off(document,"mousemove",this._onMouseMove).off(document,"mouseup",this._onMouseUp);var t=this._map,r=t.mouseEventToLayerPoint(e),i=new n.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(r));t.fitBounds(i),t.fire("boxzoomend",{boxZoomBounds:i})}}),n.Map.addInitHook("addHandler","boxZoom",n.Map.BoxZoom),n.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),n.Map.Keyboard=n.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;e.tabIndex===-1&&(e.tabIndex="0"),n.DomEvent.addListener(e,"focus",this._onFocus,this).addListener(e,"blur",this._onBlur,this).addListener(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;n.DomEvent.removeListener(e,"focus",this._onFocus,this).removeListener(e,"blur",this._onBlur,this).removeListener(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var r,i,t=this._panKeys={},n=this.keyCodes;for(r=0,i=n.left.length;r<i;r++)t[n.left[r]]=[-1*e,0];for(r=0,i=n.right.length;r<i;r++)t[n.right[r]]=[e,0];for(r=0,i=n.down.length;r<i;r++)t[n.down[r]]=[0,e];for(r=0,i=n.up.length;r<i;r++)t[n.up[r]]=[0,-1*e]},_setZoomOffset:function(e){var r,i,t=this._zoomKeys={},n=this.keyCodes;for(r=0,i=n.zoomIn.length;r<i;r++)t[n.zoomIn[r]]=e;for(r=0,i=n.zoomOut.length;r<i;r++)t[n.zoomOut[r]]=-e},_addHooks:function(){n.DomEvent.addListener(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){n.DomEvent.removeListener(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode;if(this._panKeys.hasOwnProperty(t))this._map.panBy(this._panKeys[t]);else{if(!this._zoomKeys.hasOwnProperty(t))return;this._map.setZoom(this._map.getZoom()+this._zoomKeys[t])}n.DomEvent.stop(e)}}),n.Map.addInitHook("addHandler","keyboard",n.Map.Keyboard),n.Handler.MarkerDrag=n.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new n.Draggable(e,e).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(e){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(e){var t=n.DomUtil.getPosition(this._marker._icon);this._marker._shadow&&n.DomUtil.setPosition(this._marker._shadow,t),this._marker._latlng=this._marker._map.layerPointToLatLng(t),this._marker.fire("move").fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),n.Handler.PolyEdit=n.Handler.extend({options:{icon:new n.DivIcon({iconSize:new n.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(e,t){this._poly=e,n.Util.setOptions(this,t)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new n.LayerGroup),this._markers=[];var t,r,i,s,e=this._poly._latlngs;for(t=0,i=e.length;t<i;t++)s=this._createMarker(e[t],t),s.on("click",this._onMarkerClick,this),this._markers.push(s);var o,u;for(t=0,r=i-1;t<i;r=t++)(0!==t||n.Polygon&&this._poly instanceof n.Polygon)&&(o=this._markers[r],u=this._markers[t],this._createMiddleMarker(o,u),this._updatePrevNext(o,u))},_createMarker:function(e,t){var r=new n.Marker(e,{draggable:!0,icon:this.options.icon});return r._origLatLng=e,r._index=t,r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(r),r},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(e){var t=e.target;n.Util.extend(t._origLatLng,t._latlng),t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t)),t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next)),this._poly.redraw()},_onMarkerClick:function(e){if(!(this._poly._latlngs.length<3)){var t=e.target,n=t._index;t._prev&&t._next&&(this._createMiddleMarker(t._prev,t._next),this._updatePrevNext(t._prev,t._next)),this._markerGroup.removeLayer(t),t._middleLeft&&this._markerGroup.removeLayer(t._middleLeft),t._middleRight&&this._markerGroup.removeLayer(t._middleRight),this._markers.splice(n,1),this._poly.spliceLatLngs(n,1),this._updateIndexes(n,-1),this._poly.fire("edit")}},_updateIndexes:function(e,t){this._markerGroup.eachLayer(function(n){n._index>e&&(n._index+=t)})},_createMiddleMarker:function(e,t){var i,s,o,n=this._getMiddleLatLng(e,t),r=this._createMarker(n);r.setOpacity(.6),e._middleRight=t._middleLeft=r,s=function(){var s=t._index;r._index=s,r.off("click",i).on("click",this._onMarkerClick,this),n.lat=r.getLatLng().lat,n.lng=r.getLatLng().lng,this._poly.spliceLatLngs(s,0,n),this._markers.splice(s,0,r),r.setOpacity(1),this._updateIndexes(s,1),t._index++,this._updatePrevNext(e,r),this._updatePrevNext(r,t)},o=function(){r.off("dragstart",s,this),r.off("dragend",o,this),this._createMiddleMarker(e,r),this._createMiddleMarker(r,t)},i=function(){s.call(this),o.call(this),this._poly.fire("edit")},r.on("click",i,this).on("dragstart",s,this).on("dragend",o,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(e,t){e._next=t,t._prev=e},_getMiddleLatLng:function(e,t){var n=this._poly._map,r=n.latLngToLayerPoint(e.getLatLng()),i=n.latLngToLayerPoint(t.getLatLng());return n.layerPointToLatLng(r._add(i).divideBy(2))}}),n.Control=n.Class.extend({options:{position:"topright"},initialize:function(e){n.Util.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),r=this.getPosition(),i=e._controlCorners[r];return n.DomUtil.addClass(t,"leaflet-control"),r.indexOf("bottom")!==-1?i.insertBefore(t,i.firstChild):i.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),n=e._controlCorners[t];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this}}),n.control=function(e){return new n.Control(e)},n.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function i(i,s){var o=t+i+" "+t+s;e[i+s]=n.DomUtil.create("div",o,r)}var e=this._controlCorners={},t="leaflet-",r=this._controlContainer=n.DomUtil.create("div",t+"control-container",this._container);i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")}}),n.Control.Zoom=n.Control.extend({options:{position:"topleft"},onAdd:function(e){var t="leaflet-control-zoom",r=n.DomUtil.create("div",t);return this._createButton("Zoom in",t+"-in",r,e.zoomIn,e),this._createButton("Zoom out",t+"-out",r,e.zoomOut,e),r},_createButton:function(e,t,r,i,s){var o=n.DomUtil.create("a",t,r);return o.href="#",o.title=e,n.DomEvent.on(o,"click",n.DomEvent.stopPropagation).on(o,"click",n.DomEvent.preventDefault).on(o,"click",i,s).on(o,"dblclick",n.DomEvent.stopPropagation),o}}),n.Map.mergeOptions({zoomControl:!0}),n.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new n.Control.Zoom,this.addControl(this.zoomControl))}),n.control.zoom=function(e){return new n.Control.Zoom(e)},n.Control.Attribution=n.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>'},initialize:function(e){n.Util.setOptions(this,e),this._attributions={}},onAdd:function(e){return this._container=n.DomUtil.create("div","leaflet-control-attribution"),n.DomEvent.disableClickPropagation(this._container),e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){if(e)return this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this},removeAttribution:function(e){if(e)return this._attributions[e]--,this._update(),this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions.hasOwnProperty(t)&&this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" &#8212; ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),n.Map.mergeOptions({attributionControl:!0}),n.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new n.Control.Attribution).addTo(this))}),n.control.attribution=function(e){return new n.Control.Attribution(e)},n.Control.Scale=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",r=n.DomUtil.create("div",t),i=this.options;return this._addScales(i,t,r),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),this._update(),r},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,r){e.metric&&(this._mScale=n.DomUtil.create("div",t+"-line",r)),e.imperial&&(this._iScale=n.DomUtil.create("div",t+"-line",r))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180),r=n*(e.getNorthEast().lng-e.getSouthWest().lng)/180,i=this._map.getSize(),s=this.options,o=0;i.x>0&&(o=r*(s.maxWidth/i.x)),this._updateScales(s,o)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=t<1e3?t+" m":t/1e3+" km"},_updateImperial:function(e){var r,i,s,t=3.2808399*e,n=this._iScale;t>5280?(r=t/5280,i=this._getRoundNum(r),n.style.width=this._getScaleWidth(i/r)+"px",n.innerHTML=i+" mi"):(s=this._getRoundNum(t),n.style.width=this._getScaleWidth(s/t)+"px",n.innerHTML=s+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),n.control.scale=function(e){return new n.Control.Scale(e)},n.Control.Layers=n.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,r){n.Util.setOptions(this,r),this._layers={},this._lastZIndex=0;for(var i in e)e.hasOwnProperty(i)&&this._addLayer(e[i],i);for(i in t)t.hasOwnProperty(i)&&this._addLayer(t[i],i,!0)},onAdd:function(e){return this._initLayout(),this._update(),this._container},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=n.Util.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=n.DomUtil.create("div",e);n.Browser.touch?n.DomEvent.on(t,"click",n.DomEvent.stopPropagation):n.DomEvent.disableClickPropagation(t);var r=this._form=n.DomUtil.create("form",e+"-list");if(this.options.collapsed){n.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._layersLink=n.DomUtil.create("a",e+"-toggle",t);i.href="#",i.title="Layers",n.Browser.touch?n.DomEvent.on(i,"click",n.DomEvent.stopPropagation).on(i,"click",n.DomEvent.preventDefault).on(i,"click",this._expand,this):n.DomEvent.on(i,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=n.DomUtil.create("div",e+"-base",r),this._separator=n.DomUtil.create("div",e+"-separator",r),this._overlaysList=n.DomUtil.create("div",e+"-overlays",r),t.appendChild(r)},_addLayer:function(e,t,r){var i=n.Util.stamp(e);this._layers[i]={layer:e,name:t,overlay:r},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e=!1,t=!1;for(var n in this._layers)if(this._layers.hasOwnProperty(n)){var r=this._layers[n];this._addItem(r),t=t||r.overlay,e=e||!r.overlay}this._separator.style.display=t&&e?"":"none"}},_createRadioElement:function(e,t){var n='<input type="radio" name="'+e+'"';t&&(n+=' checked="checked"'),n+="/>";var r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var r,t=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?(r=document.createElement("input"),r.type="checkbox",r.defaultChecked=i):r=this._createRadioElement("leaflet-base-layers",i),r.layerId=n.Util.stamp(e.layer),n.DomEvent.on(r,"click",this._onInputClick,this);var s=document.createTextNode(" "+e.name);t.appendChild(r),t.appendChild(s);var o=e.overlay?this._overlaysList:this._baseLayersList;o.appendChild(t)},_onInputClick:function(){var e,t,n,r=this._form.getElementsByTagName("input"),i=r.length;for(e=0;e<i;e++)t=r[e],n=this._layers[t.layerId],t.checked?this._map.addLayer(n.layer,!n.overlay):this._map.removeLayer(n.layer)},_expand:function(){n.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),n.control.layers=function(e,t,r){return new n.Control.Layers(e,t,r)},n.Transition=n.Class.extend({includes:n.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:n.DomUtil.setPosition
},implemented:function(){return n.Transition.NATIVE||n.Transition.TIMER}},options:{easing:"ease",duration:.5},_setProperty:function(e,t){var r=n.Transition.CUSTOM_PROPS_SETTERS;e in r?r[e](this._el,t):this._el.style[e]=t}}),n.Transition=n.Transition.extend({statics:function(){var e=n.DomUtil.TRANSITION,t="webkitTransition"===e||"OTransition"===e?e+"End":"transitionend";return{NATIVE:!!e,TRANSITION:e,PROPERTY:e+"Property",DURATION:e+"Duration",EASING:e+"TimingFunction",END:t,CUSTOM_PROPS_PROPERTIES:{position:n.Browser.any3d?n.DomUtil.TRANSFORM:"top, left"}}}(),options:{fakeStepInterval:100},initialize:function(e,t){this._el=e,n.Util.setOptions(this,t),n.DomEvent.on(e,n.Transition.END,this._onTransitionEnd,this),this._onFakeStep=n.Util.bind(this._onFakeStep,this)},run:function(e){var t,r=[],i=n.Transition.CUSTOM_PROPS_PROPERTIES;for(t in e)e.hasOwnProperty(t)&&(t=i[t]?i[t]:t,t=this._dasherize(t),r.push(t));this._el.style[n.Transition.DURATION]=this.options.duration+"s",this._el.style[n.Transition.EASING]=this.options.easing,this._el.style[n.Transition.PROPERTY]="all";for(t in e)e.hasOwnProperty(t)&&this._setProperty(t,e[t]);n.Util.falseFn(this._el.offsetWidth),this._inProgress=!0,n.Browser.mobileWebkit&&(this.backupEventFire=setTimeout(n.Util.bind(this._onBackupFireEnd,this),1.2*this.options.duration*1e3)),n.Transition.NATIVE?(clearInterval(this._timer),this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval)):this._onTransitionEnd()},_dasherize:function(){function t(e){return"-"+e.toLowerCase()}var e=/([A-Z])/g;return function(n){return n.replace(e,t)}}(),_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(e){this._inProgress&&(this._inProgress=!1,clearInterval(this._timer),this._el.style[n.Transition.TRANSITION]="",clearTimeout(this.backupEventFire),delete this.backupEventFire,this.fire("step"),e&&e.type&&this.fire("end"))},_onBackupFireEnd:function(){var e=document.createEvent("Event");e.initEvent(n.Transition.END,!0,!1),this._el.dispatchEvent(e)}}),n.Transition=n.Transition.NATIVE?n.Transition:n.Transition.extend({statics:{getTime:Date.now||function(){return+new Date},TIMER:!0,EASINGS:{linear:function(e){return e},"ease-out":function(e){return e*(2-e)}},CUSTOM_PROPS_GETTERS:{position:n.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(e,t){this._el=e,n.Util.extend(this.options,t),this._easing=n.Transition.EASINGS[this.options.easing]||n.Transition.EASINGS["ease-out"],this._step=n.Util.bind(this._step,this),this._interval=Math.round(1e3/this.options.fps)},run:function(e){this._props={};var t=n.Transition.CUSTOM_PROPS_GETTERS,r=n.Transition.UNIT_RE;this.fire("start");for(var i in e)if(e.hasOwnProperty(i)){var s={};if(i in t)s.from=t[i](this._el);else{var o=this._el.style[i].match(r);s.from=parseFloat(o[0]),s.unit=o[1]}s.to=e[i],this._props[i]=s}clearInterval(this._timer),this._timer=setInterval(this._step,this._interval),this._startTime=n.Transition.getTime()},_step:function(){var e=n.Transition.getTime(),t=e-this._startTime,r=1e3*this.options.duration;t<r?this._runFrame(this._easing(t/r)):(this._runFrame(1),this._complete())},_runFrame:function(e){var r,i,s,t=n.Transition.CUSTOM_PROPS_SETTERS;for(r in this._props)this._props.hasOwnProperty(r)&&(i=this._props[r],r in t?(s=i.to.subtract(i.from).multiplyBy(e).add(i.from),t[r](this._el,s)):this._el.style[r]=(i.to-i.from)*e+i.from+i.unit);this.fire("step")},_complete:function(){clearInterval(this._timer),this.fire("end")}}),n.Map.include(n.Transition&&n.Transition.implemented()?{setView:function(e,t,n){t=this._limitZoom(t);var r=this._zoom!==t;if(this._loaded&&!n&&this._layers){var i=r?this._zoomToIfClose&&this._zoomToIfClose(e,t):this._panByIfClose(e);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){return e=n.point(e),e.x||e.y?(this._panTransition||(this._panTransition=new n.Transition(this._mapPane),this._panTransition.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.Util.setOptions(this._panTransition,n.Util.extend({duration:.25},t)),this.fire("movestart"),n.DomUtil.addClass(this._mapPane,"leaflet-pan-anim"),this._panTransition.run({position:n.DomUtil.getPosition(this._mapPane).subtract(e)}),this):this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){n.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(e){var t=this._getCenterOffset(e)._floor();return!!this._offsetIsWithinView(t)&&(this.panBy(t),!0)},_offsetIsWithinView:function(e,t){var n=t||1,r=this.getSize();return Math.abs(e.x)<=r.x*n&&Math.abs(e.y)<=r.y*n}}:{}),n.Map.mergeOptions({zoomAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23&&!n.Browser.mobileOpera}),n.DomUtil.TRANSITION&&n.Map.addInitHook(function(){n.DomEvent.on(this._mapPane,n.Transition.END,this._catchTransitionEnd,this)}),n.Map.include(n.DomUtil.TRANSITION?{_zoomToIfClose:function(e,t){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e).divideBy(1-1/r);if(!this._offsetIsWithinView(i,1))return!1;n.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:e,zoom:t});var s=this._getCenterLayerPoint().add(i);return this._prepareTileBg(),this._runAnimation(e,t,r,s),!0},_catchTransitionEnd:function(e){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(e,t,r,i,s){this._animateToCenter=e,this._animateToZoom=t,this._animatingZoom=!0;var o=n.DomUtil.TRANSFORM,u=this._tileBg;clearTimeout(this._clearTileBgTimer),n.Util.falseFn(u.offsetWidth);var a=n.DomUtil.getScaleString(r,i),f=u.style[o];u.style[o]=s?f+" "+a:a+" "+f},_prepareTileBg:function(){var e=this._tilePane,t=this._tileBg;if(t&&this._getLoadedTilesPercentage(t)>.5&&this._getLoadedTilesPercentage(e)<.5)return e.style.visibility="hidden",e.empty=!0,this._stopLoadingImages(e),void 0;t||(t=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),t.style.zIndex=1),t.style[n.DomUtil.TRANSFORM]="",t.style.visibility="hidden",t.empty=!0,e.empty=!1,this._tilePane=this._panes.tilePane=t;var r=this._tileBg=e;n.DomUtil.addClass(r,"leaflet-zoom-animated"),this._stopLoadingImages(r)},_getLoadedTilesPercentage:function(e){var n,r,t=e.getElementsByTagName("img"),i=0;for(n=0,r=t.length;n<r;n++)t[n].complete&&i++;return i/r},_stopLoadingImages:function(e){var r,i,s,t=Array.prototype.slice.call(e.getElementsByTagName("img"));for(r=0,i=t.length;r<i;r++)s=t[r],s.complete||(s.onload=n.Util.falseFn,s.onerror=n.Util.falseFn,s.src=n.Util.emptyImageUrl,s.parentNode.removeChild(s))},_onZoomTransitionEnd:function(){this._restoreTileFront(),n.Util.falseFn(this._tileBg.offsetWidth),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),n.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){!this._animatingZoom&&!this.touchZoom._zooming&&(this._tileBg.innerHTML="")}}:{}),n.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locationOptions=n.Util.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=n.Util.bind(this._handleGeolocationResponse,this),r=n.Util.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=180*e.coords.accuracy/4e7,r=2*t,i=e.coords.latitude,s=e.coords.longitude,o=new n.LatLng(i,s),u=new n.LatLng(i-t,s-r),a=new n.LatLng(i+t,s+r),f=new n.LatLngBounds(u,a),l=this._locationOptions;if(l.setView){var c=Math.min(this.getBoundsZoom(f),l.maxZoom);this.setView(o,c)}this.fire("locationfound",{latlng:o,bounds:f,accuracy:e.coords.accuracy})}})}(this)}).call(window)},919:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(458)(),exports.push([module.id,".splunk-mapping-Map .leaflet-popup-content-wrapper{padding:6px 12px;border-radius:3px;background:#000;box-shadow:0 3px 10px #888}.splunk-mapping-Map .leaflet-popup-content{color:#fff;font-family:Splunk Platform Sans,Proxima Nova,Roboto,Droid,Helvetica Neue,Helvetica,Arial,sans-serif;margin:0}.splunk-mapping-Map .map-tooltip-table{border:0 none;border-spacing:0;border-collapse:collapse}.splunk-mapping-Map .map-tooltip-table td{padding:0;white-space:nowrap}.splunk-mapping-Map .map-tooltip-table td.tooltip-column-left{text-align:left}.splunk-mapping-Map .map-tooltip-table td.tooltip-column-right{text-align:right}",""])},legend:function(module,exports){Splunk.Legend={_numLabels:0,_targetMap:{},_targetList:[],_labelMap:{},_labelList:[],_isLabelMapValid:!0,_timeoutID:0,_listeners:{},numLabels:function(){return this._validateLabelMap(),this._numLabels},register:function(id){if(null==id)throw new Error("Parameter id must be non-null.");var targetData=this._getOwn(this._targetMap,id);targetData||(targetData={id:id,labels:null,sortIndex:+id.match(/\d+/g).join("")},this._targetMap[id]=targetData,this._targetList.push(targetData),this._targetList.sort(function(a,b){return a.sortIndex-b.sortIndex}))},unregister:function(id){var targetData=this._getOwn(this._targetMap,id);if(targetData){for(var i=this._targetList.length-1;i>=0;i--)if(this._targetList[i]===targetData){this._targetList.splice(i,1);break}delete this._targetMap[id],this._invalidateLabelMap()}},setLabels:function(id,labels){var targetData=this._getOwn(this._targetMap,id);targetData&&(targetData.labels=labels?labels.concat():null,this._invalidateLabelMap())},getLabelIndex:function(label){this._validateLabelMap();var index=this._getOwn(this._labelMap,label);return null!=index?index:-1},getLabelAt:function(index){return this._validateLabelMap(),index=Math.floor(index),index>=0&&index<this._labelList.length?this._labelList[index]:null},addEventListener:function(event,closure){var listeners=this._getOwn(this._listeners,event);listeners||(listeners=this._listeners[event]=[]);for(var numListeners=listeners.length,i=0;i<numListeners;i++)if(listeners[i]===closure)return;listeners.push(closure)},removeEventListener:function(event,closure){var listeners=this._getOwn(this._listeners,event);if(listeners)for(var numListeners=listeners.length,i=0;i<numListeners;i++)if(listeners[i]===closure)return void listeners.splice(i,1)},dispatchEvent:function(event){var listeners=this._getOwn(this._listeners,event);if(listeners){listeners=listeners.concat();var i,eventParams=[],numArguments=arguments.length;for(i=1;i<numArguments;i++)eventParams.push(arguments[i]);var closure,numListeners=listeners.length;for(i=0;i<numListeners;i++){closure=listeners[i];try{closure.apply(null,eventParams)}catch(e){}}}},_invalidateLabelMap:function(){if(this._isLabelMapValid){this._isLabelMapValid=!1;var self=this,f=function(){self._validateLabelMap()};this._timeoutID=setTimeout(f,0)}},_validateLabelMap:function(){this._isLabelMapValid||(this._updateLabelMap(),this._isLabelMapValid=!0,clearTimeout(this._timeoutID))},_updateLabelMap:function(){var targetData,targetLabels,targetLabelsLength,targetLabel,numLabels,i,j,currentLabelList=this._labelList,changed=!1,labelMap={},labelList=[],targetList=this._targetList,targetListLength=targetList.length;for(i=0;i<targetListLength;i++)if(targetData=targetList[i],targetLabels=targetData.labels)for(targetLabelsLength=targetLabels.length,j=0;j<targetLabelsLength;j++)targetLabel=targetLabels[j],null==this._getOwn(labelMap,targetLabel)&&(labelMap[targetLabel]=labelList.length,labelList.push(targetLabel));if(numLabels=labelList.length,numLabels!==currentLabelList.length)changed=!0;else for(i=0;i<numLabels;i++)if(labelList[i]!==currentLabelList[i]){changed=!0;break}changed&&(this._labelMap=labelMap,this._labelList=labelList,this._numLabels=numLabels,this.dispatchEvent("labelIndexMapChanged"))},_getOwn:function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)?obj[key]:void 0}}},"splunk/charting/Legend":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),ChainedEvent=__webpack_require__("contrib/jg_lib/events/ChainedEvent"),Event=__webpack_require__("contrib/jg_lib/events/Event"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),MListenerTarget=__webpack_require__("contrib/jg_lib/events/MListenerTarget"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),MPropertyTarget=__webpack_require__("contrib/jg_lib/properties/MPropertyTarget"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),ArrayUtil=__webpack_require__("contrib/jg_lib/utils/ArrayUtil"),Map=__webpack_require__("contrib/jg_lib/utils/Map");return Class(module.id,Object,function(Legend,base){Class.mixin(this,MEventTarget,MListenerTarget,MObservableTarget,MPropertyTarget),this.settingLabels=new Event("settingLabels",EventData),this.labelIndexMapChanged=new ChainedEvent("labelIndexMapChanged",this.change),this.labels=new ObservableProperty("labels",Array,[]).readFilter(function(value){return value.concat()}).writeFilter(function(value){return value?value.concat():[]}).onChange(function(e){this._updateLabelMap()}),this.actualLabels=new ObservableProperty("actualLabels",Array,[]).readOnly(!0).readFilter(function(value){return value.concat()}),this._targetMap=null,this._targetList=null,this._labelMap=null,this._labelList=null,this._isSettingLabels=!1,this.constructor=function(){base.constructor.call(this),this._targetMap=new Map,this._targetList=[],this._labelMap={},this._labelList=[]},this.register=function(target){if(null==target)throw new Error("Parameter target must be non-null.");var targetData=this._targetMap.get(target);targetData||(targetData={labels:null},this._targetMap.set(target,targetData),this._targetList.push(targetData))},this.unregister=function(target){if(null==target)throw new Error("Parameter target must be non-null.");var targetData=this._targetMap.get(target);if(targetData){var targetIndex=ArrayUtil.indexOf(this._targetList,targetData);targetIndex>=0&&this._targetList.splice(targetIndex,1),this._targetMap.del(target),this._updateLabelMap()}},this.setLabels=function(target,labels){if(null==target)throw new Error("Parameter target must be non-null.");if(null!=labels&&!Class.isArray(labels))throw new Error("Parameter labels must be of type Array.");var targetData=this._targetMap.get(target);targetData&&(targetData.labels=labels?labels.concat():null,this.notifySettingLabels())},this.getLabelIndex=function(label){if(null==label)throw new Error("Parameter label must be non-null.");if(!Class.isString(label))throw new Error("Parameter label must be of type String.");var index=this.getLabelIndexOverride(label);if(index<0){var labelIndex=this._labelMap[label];index=null!=labelIndex?labelIndex:-1}return index},this.getNumLabels=function(){var value=this.getNumLabelsOverride();return value<0&&(value=this._labelList.length),value},this.notifySettingLabels=function(){if(!this._isSettingLabels)try{this._isSettingLabels=!0,this.fire(this.settingLabels,new EventData),this._updateLabelMap()}finally{this._isSettingLabels=!1}},this.notifyLabelIndexMapChanged=function(){this.fire(this.labelIndexMapChanged,new EventData)},this.getNumLabelsOverride=function(){return-1},this.getLabelIndexOverride=function(label){return-1},this.updateLabelsOverride=function(labels){return!1},this._updateLabelMap=function(){var targetData,targetLabels,targetLabel,i,j,l,m,currentLabelList=this._labelList,changed=!1,labelMap={},labelList=[],targetList=this._targetList;for(targetLabels=this.getInternal("labels"),i=0,l=targetLabels.length;i<l;i++)targetLabel=String(targetLabels[i]),null==labelMap[targetLabel]&&(labelMap[targetLabel]=labelList.length,labelList.push(targetLabel));for(i=0,l=targetList.length;i<l;i++)if(targetData=targetList[i],targetLabels=targetData.labels)for(j=0,m=targetLabels.length;j<m;j++)targetLabel=String(targetLabels[j]),null==labelMap[targetLabel]&&(labelMap[targetLabel]=labelList.length,labelList.push(targetLabel));if(labelList.length!=currentLabelList.length)changed=!0;else for(i=0,l=labelList.length;i<l;i++)if(labelList[i]!==currentLabelList[i]){changed=!0;break}changed&&(this._labelMap=labelMap,this._labelList=labelList,this.setInternal("actualLabels",labelList.concat()),this.updateLabelsOverride(labelList.concat())||this.notifyLabelIndexMapChanged())}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/events/MListenerTarget":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Event=__webpack_require__("contrib/jg_lib/events/Event"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),Class=__webpack_require__("contrib/jg_lib/Class"),TrieMap=__webpack_require__("contrib/jg_lib/utils/TrieMap"),WeakMap=__webpack_require__("contrib/jg_lib/utils/WeakMap");return Class(module.id,function(MListenerTarget){var _listeningMaps=new WeakMap,_getListeningMap=function(target,create){var listeningMap=_listeningMaps.get(target);if(!listeningMap){if(create===!1)return null;listeningMap=new TrieMap,_listeningMaps.set(target,listeningMap)}return listeningMap},_delListeningMap=function(target){_listeningMaps.del(target)};this.isListenerTarget=!0,this.listenOn=function(target,event,listener,scope,priority){if(null==target)throw new Error("Parameter target must be non-null.");if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");if(event=Event.resolve(target,event),null==listener)throw new Error("Parameter listener must be non-null.");if(!Class.isFunction(listener))throw new Error("Parameter listener must be of type Function.");if(null!=priority&&!Class.isNumber(priority))throw new Error("Parameter priority must be of type Number.");null==scope&&(scope=this);var listeningMap=_getListeningMap(this),listeningKeys=[target,event,listener,scope];return listeningMap.set(listeningKeys,listeningKeys),target.on(event,listener,scope,priority),this},this.listenOff=function(target,event,listener,scope){var listeningKeys=null;if(null!=scope){if(null==target)throw new Error("Parameter target must be non-null.");if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");if(event=Event.resolve(target,event),null==listener)throw new Error("Parameter listener must be non-null.");if(!Class.isFunction(listener))throw new Error("Parameter listener must be of type Function.");listeningKeys=[target,event,listener,scope]}else if(null!=listener){if(null==target)throw new Error("Parameter target must be non-null.");if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");if(event=Event.resolve(target,event),!Class.isFunction(listener))throw new Error("Parameter listener must be of type Function.");listeningKeys=[target,event,listener,this]}else if(null!=event){if(null==target)throw new Error("Parameter target must be non-null.");if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");event=Event.resolve(target,event),listeningKeys=[target,event]}else if(null!=target){if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");listeningKeys=[target]}var listeningMap=_getListeningMap(this,!1);if(!listeningMap)return this;var listeningList=listeningMap.values(listeningKeys);listeningMap.clear(listeningKeys),0===listeningMap.size()&&_delListeningMap(this);for(var i=0,l=listeningList.length;i<l;i++)listeningKeys=listeningList[i],listeningKeys[0].off(listeningKeys[1],listeningKeys[2],listeningKeys[3]);return this},this.isListening=function(target,event){var listeningKeys=null;if(null!=event){if(null==target)throw new Error("Parameter target must be non-null.");if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");event=Event.resolve(target,event),listeningKeys=[target,event]}else if(null!=target){if(!target.isEventTarget)throw new Error("Parameter target must have mixin "+Class.getName(MEventTarget)+".");listeningKeys=[target]}var listeningMap=_getListeningMap(this,!1);return!!listeningMap&&listeningMap.size(listeningKeys)>0}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/events/MObservableTarget":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Event=__webpack_require__("contrib/jg_lib/events/Event"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(MObservableTarget){this.isObservableTarget=!0,this.change=new Event("change",EventData)})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/MPropertyTarget":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Property=__webpack_require__("contrib/jg_lib/properties/Property"),Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(MPropertyTarget){this.isPropertyTarget=!0,this.get=function(property){return property=Property.resolve(this,property),property.get(this)},this.set=function(property,value){if(property=Property.resolve(this,property),property.readOnly())throw new Error('Property "'+property.name()+'" is read-only.');if(!property.isValidType(value))throw new Error('Value assigned to property "'+property.name()+'" must be of type '+property.getTypeName()+".");return property.set(this,value),this},this.getInternal=function(property){return property=Property.resolve(this,property),property.getInternal(this)},this.setInternal=function(property,value){if(property=Property.resolve(this,property),!property.isValidType(value))throw new Error('Value assigned to property "'+property.name()+'" must be of type '+property.getTypeName()+".");return property.setInternal(this,value),this}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/Property":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Map=__webpack_require__("contrib/jg_lib/utils/Map"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil"),UID=__webpack_require__("contrib/jg_lib/utils/UID"),WeakMap=__webpack_require__("contrib/jg_lib/utils/WeakMap");return Class(module.id,Object,function(Property,base){var _DEBUG_KEY="__DEBUG_PROPERTIES__";Property.debug=!1;var _contextMaps=new WeakMap;Property.resolve=function(target,property,strict){if(null==target)throw new Error("Parameter target must be non-null.");if(null==property)throw new Error("Parameter property must be non-null.");if(property instanceof Property)return property;if(!Class.isString(property))throw new Error("Parameter property must be of type String or "+Class.getName(Property)+".");var propertyName=property;if(propertyName.indexOf(".")<0)property=target[propertyName];else{var propertyPath=propertyName.split(".");property=target;for(var i=0,l=propertyPath.length;i<l&&(property=property[propertyPath[i]],null!=property);i++);}if(null!=property&&property instanceof Property)return property;if(strict!==!1)throw new Error('Unknown property "'+propertyName+'".');return null};var _debug=function(context){var target=context.target,debugMap=ObjectUtil.get(target,_DEBUG_KEY);debugMap||(debugMap=target[_DEBUG_KEY]={});var property=context.property,debugPropertyKey=property.name()+" #"+UID.get(property);debugMap[debugPropertyKey]=context.value};this._name=null,this._type=null,this._typeChecker=null,this._nullValue=null,this._defaultValue=null,this._readOnly=!1,this._getter=null,this._setter=null,this._readFilter=null,this._writeFilter=null,this._onRead=null,this._onWrite=null,this.constructor=function(name,type,defaultValue){if(null==name)throw new Error("Parameter name must be non-null.");if(!Class.isString(name))throw new Error("Parameter name must be of type String.");if(null!=type&&!Class.isFunction(type))throw new Error("Parameter type must be of type Function.");if(this._name=name,this._type=type||null,this._typeChecker=type?Class.getTypeChecker(type):null,type===Number?this._nullValue=NaN:type===Boolean?this._nullValue=!1:this._nullValue=null,null==defaultValue&&(defaultValue=this._nullValue),!this.isValidType(defaultValue))throw new Error("Parameter defaultValue must be of type "+this.getTypeName()+".");this._defaultValue=defaultValue},this.name=function(){return this._name},this.type=function(){return this._type},this.defaultValue=function(){return this._defaultValue},this.readOnly=function(value){if(!arguments.length)return this._readOnly;if(null!=value&&!Class.isBoolean(value))throw new Error("Parameter readOnly must be of type Boolean.");return this._readOnly=value===!0,this},this.getter=function(value){if(!arguments.length)return this._getter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter getter must be of type Function.");return this._getter=value||null,this},this.setter=function(value){if(!arguments.length)return this._setter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter setter must be of type Function.");return this._setter=value||null,this},this.readFilter=function(value){if(!arguments.length)return this._readFilter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter readFilter must be of type Function.");return this._readFilter=value||null,this},this.writeFilter=function(value){if(!arguments.length)return this._writeFilter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter writeFilter must be of type Function.");return this._writeFilter=value||null,this},this.onRead=function(value){if(!arguments.length)return this._onRead;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter onRead must be of type Function.");return this._onRead=value||null,this},this.onWrite=function(value){if(!arguments.length)return this._onWrite;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter onWrite must be of type Function.");return this._onWrite=value||null,this},this.get=function(target){this._onRead&&this._onRead.call(target);var value=this.getInternal(target);if(this._readFilter){var filterValue=this._readFilter.call(target,value);if(filterValue!==value){if(!this.isValidType(filterValue))throw new Error('Value returned from readFilter for property "'+this.name()+'" must be of type '+this.getTypeName()+".");value=filterValue}}return null==value&&(value=this._nullValue),value},this.set=function(target,value){if(null==value&&(value=this._nullValue),this._writeFilter){var filterValue=this._writeFilter.call(target,value);if(filterValue!==value){if(!this.isValidType(filterValue))throw new Error('Value returned from writeFilter for property "'+this.name()+'" must be of type '+this.getTypeName()+".");value=filterValue}}this.setInternal(target,value)&&this._onWrite&&this._onWrite.call(target)},this.getInternal=function(target){if(this._getter){var value=this._getter.call(target);if(!this.isValidType(value))throw new Error('Value returned from getter for property "'+this.name()+'" must be of type '+this.getTypeName()+".");return value}var context=this.getContext(target,!1);return context?this.readValue(context):this._defaultValue},this.setInternal=function(target,value){if(this._getter)return this._setter&&this._setter.call(target,value),!0;var context=this.getContext(target);if(context.isWriting)return!1;try{context.isWriting=!0,this.needsWrite(context,value)&&(this._setter&&this._setter.call(target,value),this.writeValue(context,value))}finally{context.isWriting=!1}return!0},this.getTypeName=function(){return this._type?Class.getName(this._type)||this._name+".type":"*"},this.isValidType=function(value){return null==value||!this._typeChecker||this._typeChecker(value)},this.getContext=function(target,create){var contextMap=_contextMaps.get(target);if(!contextMap){if(create===!1)return null;contextMap=new Map,_contextMaps.set(target,contextMap)}var context=contextMap.get(this);if(!context){if(create===!1)return null;context={target:target,property:this},contextMap.set(this,context),this.setupContext(context)}return context},this.delContext=function(target){var contextMap=_contextMaps.get(target);if(contextMap){var context=contextMap.get(this);context&&(contextMap.del(this),0===contextMap.size()&&_contextMaps.del(target),this.teardownContext(context))}},this.setupContext=function(context){context.value=this._defaultValue,context.isWriting=!1},this.teardownContext=function(context){context.value=null},this.readValue=function(context){return context.value},this.writeValue=function(context,value){context.value=value,Property.debug&&_debug(context)},this.needsWrite=function(context,value){return!0}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/ObservableProperty":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var MObservableProperty=__webpack_require__("contrib/jg_lib/properties/MObservableProperty"),Property=__webpack_require__("contrib/jg_lib/properties/Property"),Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,Property,function(ObservableProperty,base){Class.mixin(this,MObservableProperty),this.constructor=function(name,type,defaultValue){base.constructor.call(this,name,type,defaultValue),this.initChangeEvent()},this.setupContext=function(context){base.setupContext.call(this,context),this.setupDependencySupport(context)},this.teardownContext=function(context){this.teardownDependencySupport(context),base.teardownContext.call(this,context)},this.writeValue=function(context,value){var oldValue=context.value;this.teardownDependencyChangeHandler(context),base.writeValue.call(this,context,value),null!=value&&value.isEventTarget&&value.isObservableTarget&&value!==this.defaultValue()&&this.setupDependencyChangeHandler(context,[{target:value,event:value.change}]),this.notifyChange(context,oldValue,value)},this.needsWrite=function(context,value){return this.hasChange(context,context.value,value)}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/MObservableProperty":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var PropertyEventData=__webpack_require__("contrib/jg_lib/properties/PropertyEventData"),Class=__webpack_require__("contrib/jg_lib/Class"),ChainedEvent=__webpack_require__("contrib/jg_lib/events/ChainedEvent"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),ErrorUtil=__webpack_require__("contrib/jg_lib/utils/ErrorUtil"),FunctionUtil=__webpack_require__("contrib/jg_lib/utils/FunctionUtil"),Set=__webpack_require__("contrib/jg_lib/utils/Set");return Class(module.id,function(MObservableProperty){this.change=null,this.isObservableProperty=!0,this._changeComparator=null,this._onChange=null,this.changeComparator=function(value){if(!arguments.length)return this._changeComparator;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter changeComparator must be of type Function.");return this._changeComparator=value||null,this},this.onChange=function(value){if(!arguments.length)return this._onChange;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter onChange must be of type Function.");return this._onChange=value||null,this},this.initChangeEvent=function(){this.change=new PropertyChangeEvent(this)},this.setupDependencySupport=function(context){context._dependencyList=null,context._dependencyChangingSet=null,context._dependencyChangeHandler=null},this.teardownDependencySupport=function(context){this.teardownDependencyChangeHandler(context),context._dependencyChangingSet=null,context._dependencyChangeHandler=null},this.setupDependencyChangeHandler=function(context,dependencyList){if(!context._dependencyList&&0!==dependencyList.length){var target=context.target;if(target.isEventTarget&&target.isListenerTarget){dependencyList=context._dependencyList=dependencyList.concat(),context._dependencyChangingSet||(context._dependencyChangingSet=new Set);var dependencyChangeHandler=context._dependencyChangeHandler;dependencyChangeHandler||(dependencyChangeHandler=context._dependencyChangeHandler=FunctionUtil.bind(this.dependencyChangeHandler,this,context));for(var dependencyInfo,i=0,l=dependencyList.length;i<l;i++)dependencyInfo=dependencyList[i],target.listenOn(dependencyInfo.target,dependencyInfo.event,dependencyChangeHandler,this,-(1/0))}}},this.teardownDependencyChangeHandler=function(context){var dependencyList=context._dependencyList;if(dependencyList){for(var dependencyInfo,target=context.target,dependencyChangeHandler=context._dependencyChangeHandler,i=dependencyList.length-1;i>=0;i--)dependencyInfo=dependencyList[i],target.listenOff(dependencyInfo.target,dependencyInfo.event,dependencyChangeHandler,this);context._dependencyList=null}},this.dependencyChangeHandler=function(context,eventData){if(!context.isWriting&&!eventData.isPropagationStopped()){var dependencyChangingSet=context._dependencyChangingSet;if(!dependencyChangingSet.has(eventData))try{dependencyChangingSet.add(eventData),context.target.fire(this.change,eventData)}finally{dependencyChangingSet.del(eventData)}}},this.notifyChange=function(context,oldValue,newValue){var target=context.target;target.isEventTarget&&target.fire(this.change,new PropertyEventData(this,oldValue,newValue))},this.hasChange=function(context,oldValue,newValue){return this._changeComparator?!!this._changeComparator.call(context.target,oldValue,newValue):oldValue!==newValue&&(oldValue===oldValue||newValue===newValue)};var PropertyChangeEvent=Class(ChainedEvent,function(PropertyChangeEvent,base){this._property=null,this.constructor=function(property){base.constructor.call(this,property.name()+".change",MObservableTarget.change),this._property=property},this.notifyListeners=function(target,eventData){var onChange=this._property._onChange;if(onChange){var originalCurrentEvent=eventData.currentEvent,originalCurrentTarget=eventData.currentTarget;eventData.currentEvent=this,eventData.currentTarget=target;try{onChange.call(target,eventData)}catch(e){ErrorUtil.nonBlockingThrow(e)}if(eventData.currentEvent=originalCurrentEvent,eventData.currentTarget=originalCurrentTarget,eventData.isImmediatePropagationStopped())return}base.notifyListeners.call(this,target,eventData)}})})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/PropertyEventData":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),EventData=__webpack_require__("contrib/jg_lib/events/EventData");return Class(module.id,EventData,function(PropertyEventData,base){this.property=null,this.oldValue=null,this.newValue=null,this.constructor=function(property,oldValue,newValue){this.property=property,this.oldValue=oldValue,this.newValue=newValue}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/Map":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),Leaflet=(__webpack_require__("require/underscore"),__webpack_require__("shim/leaflet")),Class=__webpack_require__("contrib/jg_lib/Class"),Pass=__webpack_require__("contrib/jg_lib/async/Pass"),ChainedEvent=__webpack_require__("contrib/jg_lib/events/ChainedEvent"),Event=__webpack_require__("contrib/jg_lib/events/Event"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),ObservableArrayProperty=__webpack_require__("contrib/jg_lib/properties/ObservableArrayProperty"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),Property=__webpack_require__("contrib/jg_lib/properties/Property"),ArrayUtil=__webpack_require__("contrib/jg_lib/utils/ArrayUtil"),FunctionUtil=__webpack_require__("contrib/jg_lib/utils/FunctionUtil"),NumberUtil=__webpack_require__("contrib/jg_lib/utils/NumberUtil"),StringUtil=__webpack_require__("contrib/jg_lib/utils/StringUtil"),GenericEventData=__webpack_require__("splunk/events/GenericEventData"),LatLon=__webpack_require__("splunk/mapping/LatLon"),LatLonBounds=__webpack_require__("splunk/mapping/LatLonBounds"),ControlBase=__webpack_require__("splunk/mapping/controls/ControlBase"),LayerBase=__webpack_require__("splunk/mapping/layers/LayerBase"),VizBase=__webpack_require__("splunk/viz/VizBase"),HTMLCleaner=__webpack_require__("util/htmlcleaner");return __webpack_require__("shim/jquery.resize"),__webpack_require__("splunk/mapping/Map.pcss"),Class(module.id,VizBase,function(Map,base){this.updateLeafletMapSizePass=new Pass("updateLeafletMapSize",.001),this.updateTilesPass=new Pass("updateTiles",.002),this.boundsChanged=new ChainedEvent("boundsChanged",this.change),this.mapClicked=new Event("mapClicked",GenericEventData),this.center=new Property("center",LatLon).getter(function(){return LatLon.fromLeaflet(this.leafletMap.getCenter())}).setter(function(value){value=value&&value.isFinite()?value.clone():new LatLon,this.validate(),this.leafletMap.setView(value.toLeaflet(),this.leafletMap.getZoom(),!0),this._checkBoundsChanged(),clearTimeout(this._setCenterTimeout),this._setCenterTimeout=setTimeout(FunctionUtil.bind(function(){this.leafletMap.setView(value.toLeaflet(),this.leafletMap.getZoom(),!0),this._checkBoundsChanged()},this),500)}),this.zoom=new Property("zoom",Number).getter(function(){return this.leafletMap.getZoom()}).setter(function(value){value=value>=0&&value<1/0?value:0,this.validate(),this.leafletMap.setView(this.leafletMap.getCenter(),value,!0),this._checkBoundsChanged()}),this.tileURL=new ObservableProperty("tileURL",String,null).onChange(function(e){this.invalidate("updateTilesPass")}),this.tileSubdomains=new ObservableArrayProperty("tileSubdomains",String,["a","b","c"]).onChange(function(e){this.invalidate("updateTilesPass")}),this.tileMinZoom=new ObservableProperty("tileMinZoom",Number,0).writeFilter(function(value){return value>=0&&value<1/0?Math.floor(value):0}).onChange(function(e){this.invalidate("updateTilesPass")}),this.tileMaxZoom=new ObservableProperty("tileMaxZoom",Number,1/0).writeFilter(function(value){return value>=0&&value<1/0?Math.floor(value):1/0}).onChange(function(e){this.invalidate("updateTilesPass")}),this.tileInvertY=new ObservableProperty("tileInvertY",Boolean,(!1)).onChange(function(e){this.invalidate("updateTilesPass")}),this.tileOpacity=new ObservableProperty("tileOpacity",Number,1).writeFilter(function(value){return value>0&&value<1/0?Math.min(value,1):0}).onChange(function(e){this.invalidate("updateTilesPass")}),this.tileAttribution=new ObservableProperty("tileAttribution",String,null).onChange(function(e){this.invalidate("updateTilesPass")}),this.showTiles=new ObservableProperty("showTiles",Boolean,(!0)).onChange(function(e){this.invalidate("updateTilesPass")}),this.tilesLoaded=new ObservableProperty("tilesLoaded",Boolean,(!1)).readOnly(!0),this.leafletMap=null,this.formatNumber=null,this.formatDegrees=null,this.isCategorical=!1,this._tooltip=null,this._tooltipMetadata=null,this._tileLayer=null,this._layers=null,this._controls=null,this._width=0,this._height=0,this._bounds=null,this._setCenterTimeout=0,this._clicks=0,this._doubleClickTimeout=null,this.constructor=function(){base.constructor.call(this),this.addStyleClass("splunk-mapping-Map"),this.setStyle({position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"none"}),this.updateSize=FunctionUtil.bind(this.updateSize,this),this._leafletMap_moveend=FunctionUtil.bind(this._leafletMap_moveend,this),this._leafletMap_zoomend=FunctionUtil.bind(this._leafletMap_zoomend,this),this._self_mouseOver=FunctionUtil.bind(this._self_mouseOver,this),this._self_mouseOut=FunctionUtil.bind(this._self_mouseOut,this),this._self_mouseMove=FunctionUtil.bind(this._self_mouseMove,this),this._self_click=FunctionUtil.bind(this._self_click,this),this._self_dbl_click=FunctionUtil.bind(this._self_dbl_click,this),this.leafletMap=new Leaflet.Map(this.element,{center:new Leaflet.LatLng(0,0),zoom:0,trackResize:!1,worldCopyJump:!1}),this.leafletMap.attributionControl.setPrefix(""),this.leafletMap.on("moveend",this._leafletMap_moveend),this.leafletMap.on("zoomend",this._leafletMap_zoomend),this._tooltip=new LeafletTooltip,this._layers=[],this._controls=[],this.$element.bind("mouseover",this._self_mouseOver),this.$element.bind("mouseout",this._self_mouseOut),this.$element.bind("mousemove",this._self_mouseMove),this.$element.bind("click",this._self_click),this.$element.bind("dblclick",this._self_dbl_click)},this.updateLeafletMapSize=function(){this.isValid("updateLeafletMapSizePass")||(this.leafletMap.invalidateSize(),clearTimeout(this.leafletMap._sizeTimer),this.leafletMap.fire("moveend"),this.markValid("updateLeafletMapSizePass"))},this.updateTiles=function(){if(!this.isValid("updateTilesPass")){var leafletMap=this.leafletMap,tileLayer=this._tileLayer;tileLayer&&(tileLayer.off("load"),tileLayer.off("unload"),leafletMap.removeLayer(tileLayer),this._tileLayer=null);var tileOptions={};tileOptions.opacity=this.getInternal("tileOpacity"),tileOptions.subdomains=this.getInternal("tileSubdomains"),tileOptions.minZoom=this.getInternal("tileMinZoom"),tileOptions.maxZoom=Math.max(this.getInternal("tileMinZoom"),this.getInternal("tileMaxZoom")),tileOptions.tms=this.getInternal("tileInvertY"),tileOptions.attribution=this.getInternal("tileAttribution");var tileURL=this.getInternal("showTiles")?this.getInternal("tileURL"):null;tileURL&&(tileLayer=this._tileLayer=new Leaflet.TileLayer(tileURL,tileOptions),tileLayer.on("load",function(){this.setInternal("tilesLoaded",!0)},this),tileLayer.on("unload",function(){this.setInternal("tilesLoaded",!1)},this),leafletMap.addLayer(tileLayer,!0)),leafletMap.options.minZoom=tileOptions.minZoom,leafletMap.options.maxZoom=tileOptions.maxZoom,leafletMap.setZoom(leafletMap.getZoom()),this.markValid("updateTilesPass"),this._checkBoundsChanged()}},this.addLayer=function(layer){if(null==layer)throw new Error("Parameter layer must be non-null.");if(!(layer instanceof LayerBase))throw new Error("Parameter layer must be of type "+Class.getName(LayerBase)+".");var layers=this._layers;ArrayUtil.indexOf(layers,layer)>=0||(layers.push(layer),this.leafletMap.addLayer(layer.leafletLayer),layer.onAddedToMap(this))},this.removeLayer=function(layer){if(null==layer)throw new Error("Parameter layer must be non-null.");if(!(layer instanceof LayerBase))throw new Error("Parameter layer must be of type "+Class.getName(LayerBase)+".");var layers=this._layers,index=ArrayUtil.indexOf(layers,layer);index<0||(layer.onRemovedFromMap(this),this.leafletMap.removeLayer(layer.leafletLayer),layers.splice(index,1))},this.addControl=function(control){if(null===control)throw new Error("Parameter control must be non-null.");if(!(control instanceof ControlBase))throw new Error("Parameter control must be of type "+Class.getName(ControlBase)+".");var controls=this._controls;ArrayUtil.indexOf(controls,control)>=0||(controls.push(control),this.leafletMap.addControl(control.leafletControl),control.onAddedToMap(this))},this.removeControl=function(control){if(null===control)throw new Error("Parameter control must be non-null.");if(!(control instanceof ControlBase))throw new Error("Parameter control must be of type "+Class.getName(ControlBase)+".");var controls=this._controls,index=ArrayUtil.indexOf(controls,control);index<0||(control.onRemovedFromMap(this),this.leafletMap.removeControl(control.leafletControl),controls.splice(index,1))},this.fitWorld=function(viewportInside){if(null!=viewportInside&&!Class.isBoolean(viewportInside))throw new Error("Parameter viewportInside must be of type Boolean.");this.fitBounds(new LatLonBounds((-60),(-180),85,180),viewportInside)},this.fitBounds=function(latLonBounds,viewportInside){if(null==latLonBounds)throw new Error("Parameter latLonBounds must be non-null.");if(!(latLonBounds instanceof LatLonBounds))throw new Error("Parameter latLonBounds must be of type "+Class.getName(LatLonBounds)+".");if(null!=viewportInside&&!Class.isBoolean(viewportInside))throw new Error("Parameter viewportInside must be of type Boolean.");latLonBounds=latLonBounds.isFinite()?latLonBounds:new LatLonBounds((-60),(-180),85,180),viewportInside=viewportInside===!0,clearTimeout(this._setCenterTimeout);var zoom=this.leafletMap.getBoundsZoom(latLonBounds.toLeaflet(),viewportInside);this.leafletMap.setView(this.leafletMap.getCenter(),zoom,!0);var tl=this.leafletMap.latLngToLayerPoint(latLonBounds.getNW().toLeaflet()),br=this.leafletMap.latLngToLayerPoint(latLonBounds.getSE().toLeaflet()),centerPoint=new Leaflet.Point((tl.x+br.x)/2,(tl.y+br.y)/2),center=this.leafletMap.layerPointToLatLng(centerPoint);this.leafletMap.setView(center,zoom,!0),this._checkBoundsChanged()},this.getLatLonBounds=function(){return LatLonBounds.fromLeaflet(this.leafletMap.getBounds())},this.updateSize=function(){var width=this.$element.width(),height=this.$element.height();width===this._width&&height===this._height||this.$element.is(":visible")&&(this._width=width,this._height=height,this.leafletMap.invalidateSize(),this.invalidate("updateLeafletMapSizePass"),this._checkBoundsChanged())},this.dispose=function(){clearTimeout(this._setCenterTimeout);for(var layers=this._layers.concat(),i=layers.length-1;i>=0;i--)this.removeLayer(layers[i]);for(var controls=this._controls.concat(),j=controls.length-1;j>=0;j--)this.removeControl(controls[j]);this.$element.off("elementResize"),base.dispose.call(this)},this.onAppend=function(){this.updateSize(),this.$element.on("elementResize",this.updateSize)},this._checkBoundsChanged=function(){var oldBounds=this._bounds,newBounds=this.getLatLonBounds();oldBounds&&oldBounds.equals(newBounds)||(this._bounds=newBounds,this.fire("boundsChanged",new EventData))},this._checkBoundsDefault=function(bounds){return 0!==bounds.e&&(0!==bounds.w&&(0!==bounds.n&&0!==bounds.s))},this._updateTooltip=function(element){var tooltip=this._tooltip,metadata=this._getMetadataFromElement(element);if(metadata&&metadata!==this._tooltipMetadata){this._tooltipMetadata=metadata;var data=metadata.data,fields=metadata.fields,sliceList=metadata.sliceList,tooltipFields=metadata.tooltipFields,tooltipLatLng=metadata.tooltipLatLng,tooltipOffsetRadius=metadata.tooltipOffsetRadius;if(data&&(fields||tooltipFields)&&tooltipLatLng){var field,slice,i,l,content="";if(content+='<table class="map-tooltip-table">',sliceList){for(i=0,l=Math.min(fields.length,2);i<l;i++)field=fields[i],content+="<tr>",content+='<td class="tooltip-column-left">'+StringUtil.escapeHTML(field)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+StringUtil.escapeHTML(this._formatDegrees(data[field],0===i?"ns":"ew"))+"</td>",content+="</tr>";for(i=0,l=sliceList.length;i<l;i++)slice=sliceList[i],content+="<tr>",content+='<td class="tooltip-column-left" style="color: #'+(16777216|slice.series.color).toString(16).substring(1)+';">'+StringUtil.escapeHTML(slice.series.name)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+StringUtil.escapeHTML(this._formatNumber(slice.value))+"</td>",content+="</tr>"}else if(tooltipFields)for(i=0,l=tooltipFields.length;i<l;i++){field=tooltipFields[i];var fieldContent=data[field];fieldContent=field!==metadata.valueFieldName||this.isCategorical||isNaN(parseFloat(fieldContent))?StringUtil.escapeHTML(fieldContent):this._formatNumber(fieldContent),content+="<tr>",content+='<td class="tooltip-column-left">'+StringUtil.escapeHTML(field)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+fieldContent+"</td>",content+="</tr>"}else for(i=0,l=fields.length;i<l;i+=2)field=fields[i],content+="<tr>",content+='<td class="tooltip-column-left">'+StringUtil.escapeHTML(field)+':&nbsp;&nbsp;</td><td class="tooltip-column-right">'+StringUtil.escapeHTML(data[field])+"</td>",content+="</tr>";content+="</table>",tooltip.setLatLng(tooltipLatLng),tooltip.setOffsetRadius(tooltipOffsetRadius),tooltip.setContent(content),this.leafletMap.openPopup(tooltip)}else this.leafletMap.closePopup()}else if(!metadata&&this._tooltipMetadata){var isTooltip=$.contains(this._tooltip._container,element);isTooltip&&this._tooltip!==element||(this._tooltipMetadata=null,this.leafletMap.closePopup())}},this._getMetadataFromElement=function(element){for(;element;){if(element[LayerBase.METADATA_KEY])return element[LayerBase.METADATA_KEY];element=element.parentNode}return null},this._formatNumber=function(num){var format=this.formatNumber;return"function"==typeof format?format(Number(num)):String(num)},this._formatDegrees=function(degrees,orientation){var format=this.formatDegrees;return"function"==typeof format?format(Number(degrees),orientation):String(degrees)},this._leafletMap_moveend=function(e){this._checkBoundsChanged()},this._leafletMap_zoomend=function(e){this._checkBoundsChanged()},this._self_mouseOver=function(e){this._updateTooltip(e.target)},this._self_mouseOut=function(e){this._updateTooltip(e.relatedTarget)},this._self_mouseMove=function(e){this._updateTooltip(e.target)},this._self_dbl_click=function(e){clearTimeout(this._doubleClickTimeout)},this._self_click=function(e){if(!this.leafletMap.dragging||!this.leafletMap.dragging.moved()){var metadata=this._getMetadataFromElement(e.target);if(metadata&&metadata.data&&metadata.fields){e.preventDefault();var data={};for(var p in metadata.data)data[p]=metadata.data[p];var fields=metadata.fields.concat();clearTimeout(this._doubleClickTimeout),this._doubleClickTimeout=setTimeout(function(){this.fire("mapClicked",new GenericEventData({data:data,fields:fields,altKey:e.altKey,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,jQueryEvent:e,originalEvent:e.originalEvent}))}.bind(this),500)}}};var LeafletTooltip=Leaflet.Popup.extend({options:{paddingX:5,paddingY:5},_offsetRadius:0,initialize:function(options){options=Leaflet.Util.extend(options||{},{maxWidth:1/0,maxHeight:1/0,autoPan:!1,closeButton:!1}),Leaflet.Popup.prototype.initialize.call(this,options)},setOffsetRadius:function(offsetRadius){return this._offsetRadius=offsetRadius,this._update(),this},_initLayout:function(){Leaflet.Popup.prototype._initLayout.call(this),this._tipContainer.style.display="none",this._container.style.pointerEvents="none"},_updatePosition:function(){var map=this._map,mapTL=map.containerPointToLayerPoint(new Leaflet.Point(0,0)),mapBR=map.containerPointToLayerPoint(map.getSize()),mapLeft=mapTL.x,mapTop=mapTL.y,mapRight=mapBR.x,mapBottom=mapBR.y,container=this._container,containerWidth=container.offsetWidth,containerHeight=container.offsetHeight,is3d=Leaflet.Browser.any3d,offsetRadius=this._offsetRadius,paddingX=this.options.paddingX,paddingY=this.options.paddingY,centerPoint=map.latLngToLayerPoint(this._latlng),offsetX=centerPoint.x>(mapLeft+mapRight)/2?-containerWidth-offsetRadius-paddingX:offsetRadius+paddingX,offsetY=NumberUtil.maxMin(centerPoint.y-containerHeight/2,mapBottom-containerHeight-paddingY,mapTop+paddingY)-centerPoint.y;is3d&&Leaflet.DomUtil.setPosition(container,centerPoint);var x=offsetX+(is3d?0:centerPoint.x),y=offsetY+(is3d?0:centerPoint.y);container.style.left=Math.round(x)+"px",container.style.top=Math.round(y)+"px"}});Leaflet.Control.Attribution.include({_update:function(){if(this._map){var attribs=[];for(var i in this._attributions)this._attributions.hasOwnProperty(i)&&this._attributions[i]&&attribs.push(i);var prefixAndAttribs=[];this.options.prefix&&prefixAndAttribs.push(this.options.prefix),attribs.length&&prefixAndAttribs.push(attribs.join(", "));var text=HTMLCleaner.clean(prefixAndAttribs.join(" &#8212; "));this._container.innerHTML=text,this._container.style.display=text?"":"none"}}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"shim/leaflet":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("contrib/leaflet/leaflet.css"),__webpack_require__(918)],__WEBPACK_AMD_DEFINE_RESULT__=function(css,leaflet){return leaflet&&leaflet.Util&&(leaflet.Util.getParamString=function(obj,existingUrl){var params=[];for(var i in obj)obj.hasOwnProperty(i)&&params.push(encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return(existingUrl&&existingUrl.indexOf("?")!==-1?"&":"?")+params.join("&")}),leaflet}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/leaflet/leaflet.css":function(module,exports,__webpack_require__){var content=__webpack_require__(917);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(459)(content,{});content.locals&&(module.exports=content.locals)},920:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(458)(),exports.push([module.id,".leaflet-reset-zoom-icon{padding-top:2px;display:block;margin:auto}@media print{.leaflet-reset-zoom{display:none}}.leaflet-control-zoom-in:focus,.leaflet-control-zoom-out:focus{box-shadow:0 0 1px 2px rgba(0,164,253,.6);border-collapse:separate;outline:0;text-decoration:none}.leaflet-control-zoom-in:focus:active:not([disabled]),.leaflet-control-zoom-out:focus:active:not([disabled]){box-shadow:none}",""])},"contrib/leaflet/images/zoom-in.png":function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAMAAADXT/YiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUwRTZCRkI3NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUwRTZCRkI4NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTBFNkJGQjU2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFNkJGQjY2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7cwPMXAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAAZSURBVHjaYmBkZGRgYACR2Fj4AV69AAEGAAauACW68QgkAAAAAElFTkSuQmCC"},"contrib/leaflet/images/zoom-out.png":function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAMAAADXT/YiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5MjRDMEQ5NjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5MjRDMERBNjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTkyNEMwRDc2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTkyNEMwRDg2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uh53jAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAAVSURBVHjaYmCEAQZsLPwAr16AAAMACdgAN9MxY1IAAAAASUVORK5CYII="},"contrib/leaflet/images/layers.png":function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABJRJREFUeNqklk9IG1kcx78zk8mMhGRiYqKxJsE0CKVsWXtYFoqnHrSHWo899FLoSRYs6KE3ocUiJaFbkP4BqR4UqrCw6UFtaU+lKCsoeLGENJI/mubfmElIM5P5t5c1u7Mpaay/23uPeZ/33nz4vkfouo526vr16+jt7cWNGzdmASASidw7OjpCtVpFO3MQ7YLevn17lWGYVw6HowsAeJ4vSJJ0c3Fx8X2hUEC9Xm8J/C5obW3NQdP0a47jrvh8PlitVgBApVJBMpmEIAgfZVkeff78OV8ul6EoyulBa2trsyzLTnq9XpPT6YTZbDaM1+t1FItFpFIpRRTF8PLy8r1sNouvX7827e6boEgkcpWm6Vdut7vL4/Ggo6MDBEF8czG6rqNWqyGTySCXyxVkWb45Pz//nud5KIrSABpAKysr3Waz+Q+O46709fXBYrHAZDI17QJA0+4URUG1WkU6nYYgCB9VVR2dm5vjq9UqVFX9F7S6uhpiGGbi3LlzJofDAZqmDROpqgpRFEFRVKPNsmyjfVKyLIPneRweHiqSJD1ZWFiYKhaLIF68eDFCUdSSz+dzejwesCxrOCZd1xsKMwxjAEmSBIIgYLFYmr4RRRGZTAbJZLKoquotkyRJdLlcJkVRBAD09PQ0JqvVahBFESzLwmQyQVEUg1UEQUBRFGSzWbAsi46OjsYivnz5gmg0ilKpRNpsNrpxdI8ePfq9VCr9FggEKK/XC5IkQdM0WJYFSZItZdA0DaIoQpZlaJqGVCqFeDyu2u32uYWFhbuyLBtlePny5U+pVGqb53nmwoUL6O/vb6zypDRNAwCQJGnor9VqODg4wP7+PhwOh9Tb2/vzzMzMJ03ToOv6t2Wo1+vY2NiArusIBoPo6uoCSZJQVbUB0DQNFEVB0zQUCgXEYjEQBIGRkRGYzeaGDBMTE1MAWsuws7ODDx8+oLOzE16vF52dnQbQ8fExUqkUjo+PMTQ0hMuXL/+YDIFAAE6nE1tbW9je3obf74fH4wEAZDIZJBIJ+P1+jI2NgeM4SJJ0dhny+TzevHkDQRAAABzHYXh4GC6Xq6UMDx8+vNuUDO3IsLe3BwC4dOnSd2WYnJz81JR135Ph/1H03+hpJcOdO3fal8HlcsHv98NqtTbGdF1HpVJBIpFAPp8/mwwXL15EMBjEu3fvsLm5CZ/PZ5AhmUwiEAjg9u3bYBjm9DKcP38edrvdkAbZbBbr6+solUoAALvdjmvXrqG7u9uQEqVSCZ8/f24tw+PHj7sFQXitquovAwMD8Pv9YFnW8E92d3cBAIODg4Z+URSRSCQQjUZBUdRfHMeNTk9PZ1tefKFQaCSfzy9ZrVbnwMAA3G53SxlyuRyi0SgqlUrR5XLdun///saprvIHDx6EisXihM/nMwUCAdhsNoMM5XIZ8XgcyWRScTqdT549ezb1Q28GAJidne0WBOFPSZJ+DQaD6OvrAwCk02nEYjEwDLPFcdxYOBzOngTumZ5bMzMzI7lcbknTNOc/6V10u923wuHwRivAqUE2mw0URWF8fDwEAE+fPp1SVRXt1t8DAKzuGCketP3pAAAAAElFTkSuQmCC"},"splunk/charting/ExternalLegend":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var SplunkLegend=__webpack_require__("shim/splunk.legend"),Class=__webpack_require__("contrib/jg_lib/Class"),FunctionUtil=__webpack_require__("contrib/jg_lib/utils/FunctionUtil"),Legend=__webpack_require__("splunk/charting/Legend");return Class(module.id,Legend,function(ExternalLegend,base){var _instanceCount=0;this._id=null,this._isConnected=!1,this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,this.constructor=function(){base.constructor.call(this),this._external_setLabels=FunctionUtil.bind(this._external_setLabels,this),this._external_labelIndexMapChanged=FunctionUtil.bind(this._external_labelIndexMapChanged,this),this._id="splunk-charting-ExternalLegend-"+ ++_instanceCount},this.connect=function(){this.close(),SplunkLegend.register(this._id),SplunkLegend.addEventListener("setLabels",this._external_setLabels),SplunkLegend.addEventListener("labelIndexMapChanged",this._external_labelIndexMapChanged),this._isConnected=!0},this.close=function(){this._isConnected&&(this._isConnected=!1,SplunkLegend.removeEventListener("labelIndexMapChanged",this._external_labelIndexMapChanged),SplunkLegend.removeEventListener("setLabels",this._external_setLabels),SplunkLegend.unregister(this._id))},this.isConnected=function(){return this._isConnected},this.getNumLabelsOverride=function(){if(this._isConnected){var value=this._cachedExternalNumLabels;return value<0&&(value=this._cachedExternalNumLabels=SplunkLegend.numLabels()),value}return-1},this.getLabelIndexOverride=function(label){if(this._isConnected){var labelMap=this._cachedExternalLabelMap;labelMap||(labelMap=this._cachedExternalLabelMap={});var index=labelMap[label];return null==index&&(index=labelMap[label]=SplunkLegend.getLabelIndex(label)),index}return-1},this.updateLabelsOverride=function(labels){return!!this._isConnected&&(this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,SplunkLegend.setLabels(this._id,labels),!0)},this._external_setLabels=function(){this.notifySettingLabels()},this._external_labelIndexMapChanged=function(){this._cachedExternalNumLabels=-1,this._cachedExternalLabelMap=null,this.notifyLabelIndexMapChanged()}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/ObservableArrayProperty":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var ArrayProperty=__webpack_require__("contrib/jg_lib/properties/ArrayProperty"),MObservableProperty=__webpack_require__("contrib/jg_lib/properties/MObservableProperty"),Class=__webpack_require__("contrib/jg_lib/Class"),Set=__webpack_require__("contrib/jg_lib/utils/Set");return Class(module.id,ArrayProperty,function(ObservableArrayProperty,base){Class.mixin(this,MObservableProperty),this._defaultValueSet=null,this._itemChangeComparator=null,this.constructor=function(name,itemType,defaultValue){base.constructor.call(this,name,itemType,defaultValue);var defaultValueSet=this._defaultValueSet=new Set;if(defaultValue)for(var i=0,l=defaultValue.length;i<l;i++)defaultValueSet.add(defaultValue[i]);this.initChangeEvent()},this.itemChangeComparator=function(value){if(!arguments.length)return this._itemChangeComparator;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter itemChangeComparator must be of type Function.");return this._itemChangeComparator=value||null,this},this.setupContext=function(context){base.setupContext.call(this,context),this.setupDependencySupport(context)},this.teardownContext=function(context){this.teardownDependencySupport(context),base.teardownContext.call(this,context)},this.writeValue=function(context,value){var oldValue=context.value;if(this.teardownDependencyChangeHandler(context),base.writeValue.call(this,context,value),null!=value&&value.length>0){for(var itemValue,dependencyList=[],defaultValueSet=this._defaultValueSet,i=0,l=value.length;i<l;i++)itemValue=value[i],null!=itemValue&&itemValue.isEventTarget&&itemValue.isObservableTarget&&!defaultValueSet.has(itemValue)&&dependencyList.push({target:itemValue,event:itemValue.change});dependencyList.length>0&&this.setupDependencyChangeHandler(context,dependencyList)}this.notifyChange(context,oldValue,value)},this.needsWrite=function(context,value){return this.hasChange(context,context.value,value)},this.hasChange=function(context,oldValue,newValue){var changeComparator=this.changeComparator();if(changeComparator)return!!changeComparator.call(context.target,oldValue,newValue);if(oldValue===newValue)return!1;if(null==oldValue||null==newValue)return!0;var length=oldValue.length;if(length!==newValue.length)return!0;for(var i=0;i<length;i++)if(this.hasItemChange(context,oldValue[i],newValue[i]))return!0;return!1},this.hasItemChange=function(context,oldValue,newValue){return this._itemChangeComparator?!!this._itemChangeComparator.call(context.target,oldValue,newValue):oldValue!==newValue&&(oldValue===oldValue||newValue===newValue)}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/ArrayProperty":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Property=__webpack_require__("contrib/jg_lib/properties/Property"),Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,Property,function(ArrayProperty,base){this._itemType=null,this._itemTypeChecker=null,this._itemNullValue=null,this._allowNull=!1,this._itemReadFilter=null,this._itemWriteFilter=null,this.constructor=function(name,itemType,defaultValue){if(null!=itemType&&!Class.isFunction(itemType))throw new Error("Parameter itemType must be of type Function.");this._itemType=itemType||null,this._itemTypeChecker=itemType?Class.getTypeChecker(itemType):null,itemType===Number?this._itemNullValue=NaN:itemType===Boolean?this._itemNullValue=!1:this._itemNullValue=null,null==defaultValue&&(defaultValue=[]),base.constructor.call(this,name,Array,defaultValue)},this.itemType=function(){return this._itemType},this.allowNull=function(value){if(!arguments.length)return this._allowNull;if(null!=value&&!Class.isBoolean(value))throw new Error("Parameter allowNull must be of type Boolean.");return this._allowNull=value===!0,this},this.itemReadFilter=function(value){if(!arguments.length)return this._itemReadFilter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter itemReadFilter must be of type Function.");return this._itemReadFilter=value||null,this},this.itemWriteFilter=function(value){if(!arguments.length)return this._itemWriteFilter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter itemWriteFilter must be of type Function.");return this._itemWriteFilter=value||null,this},this.get=function(target){for(var itemValue,itemFilterValue,value=base.get.call(this,target),length=value?value.length:0,itemNullValue=this._itemNullValue,itemReadFilter=this._itemReadFilter,itemValueList=[],i=0;i<length;i++){if(itemValue=value[i],itemReadFilter&&(itemFilterValue=itemReadFilter.call(target,itemValue),itemFilterValue!==itemValue)){if(!this.isValidItemType(itemFilterValue))throw new Error('Value returned from itemReadFilter for property "'+this.name()+'" must be of type '+this.getItemTypeName()+".");itemValue=itemFilterValue}null==itemValue&&(itemValue=itemNullValue),itemValueList.push(itemValue)}return itemValueList},this.set=function(target,value){for(var itemValue,itemFilterValue,length=value?value.length:0,allowNull=this._allowNull,itemNullValue=this._itemNullValue,itemWriteFilter=this._itemWriteFilter,itemValueList=[],i=0;i<length;i++){if(itemValue=value[i],null==itemValue){if(!allowNull)continue;itemValue=itemNullValue}if(itemWriteFilter&&(itemFilterValue=itemWriteFilter.call(target,itemValue),itemFilterValue!==itemValue)){if(!this.isValidItemType(itemFilterValue))throw new Error('Value returned from itemWriteFilter for property "'+this.name()+'" must be of type '+this.getItemTypeName()+".");itemValue=itemFilterValue}itemValueList.push(itemValue)}base.set.call(this,target,itemValueList)},this.getTypeName=function(){return"Array<"+this.getItemTypeName()+">"},this.getItemTypeName=function(){return this._itemType?Class.getName(this._itemType)||this.name()+".itemType":"*"},this.isValidType=function(value){if(null==value)return!0;if(!Class.isArray(value))return!1;for(var i=0,l=value.length;i<l;i++)if(!this.isValidItemType(value[i]))return!1;return!0},this.isValidItemType=function(value){return null==value||!this._itemTypeChecker||this._itemTypeChecker(value)}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/utils/StringUtil":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(StringUtil){var _R_TRIM=/^[\s\xA0\u2028\u2029\uFEFF]+|[\s\xA0\u2028\u2029\uFEFF]+$/g,_R_UNESCAPE_HTML=/&(?:(#x[a-fA-F0-9]+)|(#[0-9]+)|([a-z]+));/g,_R_UNESCAPE_JS=/\\(?:(u[a-fA-F0-9]{4})|(x[a-fA-F0-9]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|([\w\W]))/g,_R_AMP=/&/g,_R_LT=/</g,_R_GT=/>/g,_R_QUOT=/"/g,_R_APOS=/'/g,_R_BACKSLASH=/\\/g,_R_NEWLINE=/[\n]/g,_R_RETURN=/[\r]/g,_R_TAB=/[\t]/g,_R_VTAB=/[\v]/g,_R_FEED=/[\f]/g,_R_BACKSPACE=/[\b]/g,_R_LINESEP=/[\u2028]/g,_R_PARASEP=/[\u2029]/g,_UNESCAPE_HTML_MAP={amp:"&",lt:"<",gt:">",quot:'"',apos:"'",nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏"},_UNESCAPE_JS_MAP={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\x0B",0:"\0"};StringUtil.trim=function(str){return null==str?str:(""+str).replace(_R_TRIM,"")},StringUtil.escapeHTML=function(str){return null==str?str:(""+str).replace(_R_AMP,"&amp;").replace(_R_LT,"&lt;").replace(_R_GT,"&gt;").replace(_R_QUOT,"&quot;").replace(_R_APOS,"&#39;")},StringUtil.unescapeHTML=function(str){return null==str?str:(""+str).replace(_R_UNESCAPE_HTML,function(match){var esc=arguments[3];return esc?_UNESCAPE_HTML_MAP.hasOwnProperty(esc)?_UNESCAPE_HTML_MAP[esc]:match:(esc=arguments[2])?StringUtil.fromCodePoint(parseInt(esc.substring(1),10)):(esc=arguments[1],esc?StringUtil.fromCodePoint(parseInt(esc.substring(2),16)):match)})},StringUtil.escapeJS=function(str){return null==str?str:(""+str).replace(_R_BACKSLASH,"\\\\").replace(_R_QUOT,'\\"').replace(_R_APOS,"\\'").replace(_R_NEWLINE,"\\n").replace(_R_RETURN,"\\r").replace(_R_TAB,"\\t").replace(_R_VTAB,"\\v").replace(_R_FEED,"\\f").replace(_R_BACKSPACE,"\\b").replace(_R_LINESEP,"\\u2028").replace(_R_PARASEP,"\\u2029")},StringUtil.unescapeJS=function(str){return null==str?str:(""+str).replace(_R_UNESCAPE_JS,function(match){var esc=arguments[4];return esc?_UNESCAPE_JS_MAP.hasOwnProperty(esc)?_UNESCAPE_JS_MAP[esc]:esc:(esc=arguments[3])?StringUtil.fromCodePoint(parseInt(esc,8)):(esc=arguments[2]||arguments[1],esc?StringUtil.fromCodePoint(parseInt(esc.substring(1),16)):match)})},StringUtil.fromCodePoint=function(codePoint){for(var str="",i=0,l=arguments.length;i<l;i++)codePoint=+arguments[i],codePoint>65535&&(codePoint-=65536,str+=String.fromCharCode(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),str+=String.fromCharCode(codePoint);return str}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/events/GenericEventData":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil");return Class(module.id,EventData,function(GenericEventData,base){this.constructor=function(attributes){if(null!=attributes)for(var a in attributes)!ObjectUtil.has(attributes,a)||a in this||(this[a]=attributes[a])}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/LatLon":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Leaflet=__webpack_require__("shim/leaflet"),Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,Object,function(LatLon,base){LatLon.fromLeaflet=function(latLng){return new LatLon(latLng.lat,latLng.lng)},this.lat=0,this.lon=0,this.constructor=function(lat,lon){this.lat=null!=lat?+lat:0,this.lon=null!=lon?+lon:0},this.normalize=function(center){var lat=+this.lat;lat<-90?lat=-90:lat>90&&(lat=90);var centerLon=center?center.lon:0,lon=(this.lon-centerLon)%360;return lon<-180?lon+=360:lon>180&&(lon-=360),lon+=centerLon,new LatLon(lat,lon)},this.isFinite=function(){return this.lat-this.lat===0&&this.lon-this.lon===0},this.equals=function(latLon){return this.lat==latLon.lat&&this.lon==latLon.lon},this.clone=function(){return new LatLon(this.lat,this.lon)},this.toString=function(){return"("+ +this.lat+","+ +this.lon+")"},this.toLeaflet=function(){var latLng=new Leaflet.LatLng(0,0);return latLng.lat=+this.lat,latLng.lng=+this.lon,latLng}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/LatLonBounds":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Leaflet=__webpack_require__("shim/leaflet"),Class=__webpack_require__("contrib/jg_lib/Class"),LatLon=__webpack_require__("splunk/mapping/LatLon");return Class(module.id,Object,function(LatLonBounds,base){LatLonBounds.fromLeaflet=function(latLngBounds){var sw=latLngBounds.getSouthWest(),ne=latLngBounds.getNorthEast();return new LatLonBounds(sw.lat,sw.lng,ne.lat,ne.lng)},this.s=0,this.w=0,this.n=0,this.e=0,this.constructor=function(s,w,n,e){this.s=null!=s?+s:0,this.w=null!=w?+w:0,this.n=null!=n?+n:0,this.e=null!=e?+e:0},this.getSW=function(){return new LatLon(this.s,this.w)},this.getSE=function(){return new LatLon(this.s,this.e)},this.getNW=function(){return new LatLon(this.n,this.w)},this.getNE=function(){return new LatLon(this.n,this.e)},this.getCenter=function(){return new LatLon((+this.s+ +this.n)/2,(+this.w+ +this.e)/2)},this.expand=function(latLon){var lat=+latLon.lat,lon=+latLon.lon,s=+this.s,w=+this.w,n=+this.n,e=+this.e;lat<s&&(this.s=lat),lat>n&&(this.n=lat),lon<w&&(this.w=lon),lon>e&&(this.e=lon)},this.contains=function(latLon){var lat=+latLon.lat,lon=+latLon.lon,s=+this.s,w=+this.w,n=+this.n,e=+this.e;return lat>=s&&lat<=n&&lon>=w&&lon<=e},this.normalize=function(center){var s=+this.s;s<-90?s=-90:s>90&&(s=90);var n=+this.n;n<s?n=s:n>90&&(n=90);var centerLon=center?center.lon:0,w=this.w-centerLon,e=this.e-centerLon;return e-w>=360?(w=-180,e=180):(w%=360,w<-180?w+=360:w>180&&(w-=360),e%=360,e<-180?e+=360:e>180&&(e-=360),e<w&&(e>-w?w-=360:e+=360)),w+=centerLon,e+=centerLon,new LatLonBounds(s,w,n,e)},this.isFinite=function(){return this.s-this.s===0&&this.w-this.w===0&&this.n-this.n===0&&this.e-this.e===0},this.equals=function(bounds){return this.s==bounds.s&&this.w==bounds.w&&this.n==bounds.n&&this.e==bounds.e},this.clone=function(){return new LatLonBounds(this.s,this.w,this.n,this.e)},this.toString=function(){return"("+ +this.s+","+ +this.w+","+ +this.n+","+ +this.e+")"},this.toLeaflet=function(){var sw=new Leaflet.LatLng(0,0);sw.lat=+this.s,sw.lng=+this.w;var ne=new Leaflet.LatLng(0,0);return ne.lat=+this.n,ne.lng=+this.e,new Leaflet.LatLngBounds(sw,ne)}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/controls/ControlBase":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),MPassTarget=__webpack_require__("contrib/jg_lib/async/MPassTarget"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),MListenerTarget=__webpack_require__("contrib/jg_lib/events/MListenerTarget"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),MPropertyTarget=__webpack_require__("contrib/jg_lib/properties/MPropertyTarget"),MRenderTarget=__webpack_require__("splunk/viz/MRenderTarget"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty");return Class(module.id,Object,function(ControlBase,base){Class.mixin(this,MEventTarget,MListenerTarget,MObservableTarget,MPropertyTarget,MPassTarget,MRenderTarget),this.isVisible=new ObservableProperty("isVisible",Boolean,(!0)).onChange(function(e){this.invalidate("renderPass")}),this.constructor=function(){if(this.leafletControl=this.createLeafletControl(),!this.leafletControl)throw new Error("Value returned from createLeafletControl() must be non-null.")},this.render=function(){},this.createLeafletControl=function(){throw new Error("Must implement method createLeafletControl.")},this.onAddedToMap=function(map){this.map=map},this.onRemovedFromMap=function(map){this.map=null}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/viz/MRenderTarget":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Pass=__webpack_require__("contrib/jg_lib/async/Pass");return Class(module.id,function(MRenderTarget){this.renderPass=new Pass("render",3,"topDown"),this.render=function(){}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/layers/LayerBase":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),MPassTarget=__webpack_require__("contrib/jg_lib/async/MPassTarget"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),MListenerTarget=__webpack_require__("contrib/jg_lib/events/MListenerTarget"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),MPropertyTarget=__webpack_require__("contrib/jg_lib/properties/MPropertyTarget"),Property=__webpack_require__("contrib/jg_lib/properties/Property"),FunctionUtil=__webpack_require__("contrib/jg_lib/utils/FunctionUtil"),MRenderTarget=__webpack_require__("splunk/viz/MRenderTarget");return Class(module.id,Object,function(LayerBase,base){Class.mixin(this,MEventTarget,MListenerTarget,MObservableTarget,MPropertyTarget,MPassTarget,MRenderTarget),LayerBase.METADATA_KEY="__splunk_mapping_layers_LayerBase_metadata",this.map=new Property("map",Object,null).readOnly(!0),this.leafletLayer=null,this.constructor=function(){if(this._map_boundsChanged=FunctionUtil.bind(this._map_boundsChanged,this),this.leafletLayer=this.createLeafletLayer(),!this.leafletLayer)throw new Error("Value returned from createLeafletLayer() must be non-null.")},this.render=function(){if(!this.isValid("renderPass")){var map=this.getInternal("map");map&&this.renderOverride(map),this.markValid("renderPass")}},this.createLeafletLayer=function(){throw new Error("Must implement method createLeafletLayer.")},this.renderOverride=function(map){},this.onAddedToMap=function(map){this.setInternal("map",map),map.on("boundsChanged",this._map_boundsChanged),this.invalidate("renderPass")},this.onRemovedFromMap=function(map){map.off("boundsChanged",this._map_boundsChanged),this.setInternal("map",null)},this._map_boundsChanged=function(e){this.invalidate("renderPass")}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/viz/VizBase":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),Class=__webpack_require__("contrib/jg_lib/Class"),MPassTarget=__webpack_require__("contrib/jg_lib/async/MPassTarget"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),MListenerTarget=__webpack_require__("contrib/jg_lib/events/MListenerTarget"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),MPropertyTarget=__webpack_require__("contrib/jg_lib/properties/MPropertyTarget"),Property=__webpack_require__("contrib/jg_lib/properties/Property");return Class(module.id,Object,function(VizBase,base){Class.mixin(this,MEventTarget,MListenerTarget,MObservableTarget,MPropertyTarget,MPassTarget);var _INSTANCE_KEY="__splunk_viz_VizBase_instance",_instanceCount=0;VizBase.getInstance=function(element){if(null==element)return null;if(element=$(element),0==element.length)return null;element=element[0];var instance=element[_INSTANCE_KEY];return instance instanceof VizBase?instance:null},this.id=new Property("id",String,null).readOnly(!0),this.element=null,this.$element=null,this.constructor=function(html){if(null!=html&&!Class.isString(html))throw new Error("Parameter html must be of type String.");var query=$(html?html:"<div></div>");if(0==query.length)throw new Error("Parameter html must be valid markup.");var id="splunk-viz-VizBase-"+ ++_instanceCount;this.element=query[0],this.$element=$(this.element),this.setInternal("id",id),this.addStyleClass("splunk-viz-VizBase")},this.addStyleClass=function(styleClass){this.$element.addClass(styleClass)},this.removeStyleClass=function(styleClass){this.$element.removeClass(styleClass)},this.setStyle=function(style){this.$element.css(style)},this.appendTo=function(parentElement){if(null==parentElement)throw new Error("Parameter parentElement must be non-null.");if(parentElement instanceof VizBase&&(parentElement=parentElement.element),parentElement=$(parentElement),0!=parentElement.length){parentElement=parentElement[0];var oldParent=this.element.parentNode;oldParent&&oldParent!==parentElement&&this.onRemove(),parentElement.appendChild(this.element),oldParent!==parentElement&&this.onAppend()}},this.replace=function(element){if(null==element)throw new Error("Parameter element must be non-null.");if(element instanceof VizBase&&(element=element.element),element=$(element),0!=element.length){element=element[0];var parentElement=element.parentNode;if(null!=parentElement){var oldParent=this.element.parentNode;oldParent&&oldParent!==parentElement&&this.onRemove(),parentElement.replaceChild(this.element,element),oldParent!==parentElement&&this.onAppend()}}},this.remove=function(){var element=this.element,parentElement=element.parentNode;parentElement&&(this.onRemove(),parentElement.removeChild(element))},this.dispose=function(){this.remove(),this.listenOff(),this.off(),this.markValid(),this.$element.remove()},this.getValidateDepth=function(){for(var depth=0,parentNode=this.element.parentNode;parentNode;)depth++,parentNode=parentNode.parentNode;return depth},this.onAppend=function(){},this.onRemove=function(){}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/Map.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(919);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(459)(content,{});content.locals&&(module.exports=content.locals)},"shim/splunk.legend":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/splunk"),__webpack_require__("legend")],__WEBPACK_AMD_DEFINE_RESULT__=function(Splunk){return Splunk.Legend}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/layers/ChoroplethLayer":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var _=__webpack_require__("require/underscore"),Class=__webpack_require__("contrib/jg_lib/Class"),Pass=__webpack_require__("contrib/jg_lib/async/Pass"),Event=__webpack_require__("contrib/jg_lib/events/Event"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),Rectangle=__webpack_require__("contrib/jg_lib/geom/Rectangle"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),ObjectUtil=(__webpack_require__("contrib/jg_lib/utils/NumberUtil"),__webpack_require__("contrib/jg_lib/utils/ObjectUtil")),LatLon=__webpack_require__("splunk/mapping/LatLon"),LatLonBounds=__webpack_require__("splunk/mapping/LatLonBounds"),BaseAxis=__webpack_require__("splunk/mapping/axis/BaseAxis"),LayerBase=__webpack_require__("splunk/mapping/layers/LayerBase"),VectorLayerBase=__webpack_require__("splunk/mapping/layers/VectorLayerBase"),ColorPalette=__webpack_require__("splunk/palettes/ColorPalette"),DataUtil=(__webpack_require__("splunk/palettes/ListColorPalette"),__webpack_require__("splunk/utils/DataUtil")),Path=__webpack_require__("splunk/vectors/Path"),MDataTarget=__webpack_require__("splunk/viz/MDataTarget"),MathUtil=__webpack_require__("util/math_utils");return Class(module.id,VectorLayerBase,function(ChoroplethLayer,base){Class.mixin(this,MDataTarget),ChoroplethLayer.parseFieldTypes=function(fields,featureIdFieldName){var fieldsWithoutFeatureId=featureIdFieldName?_(fields).without(featureIdFieldName):fields;return{count:fieldsWithoutFeatureId[0],geom:fieldsWithoutFeatureId[1],area:fieldsWithoutFeatureId.length>2?fieldsWithoutFeatureId[2]:null}};var _NULL_POLYGON_COLOR=13750737;this.computeContainedRangePass=new Pass("computeContainedRange",.111),this.rendered=new Event("rendered",EventData),this.axis=new ObservableProperty("axis",BaseAxis,null).onChange(function(e){e.target===this?(e.oldValue&&e.oldValue.unregister(this),e.newValue&&e.newValue.register(this),this.invalidate("processDataPass"),this.invalidate("computeContainedRangePass")):!e.property||e.property!==e.target.preliminaryMinimum&&e.property!==e.target.preliminaryMaximum?!e.property||e.property!==e.target.extendedMinimum&&e.property!==e.target.extendedMaximum?!e.property||e.property!==e.target.actualMinimum&&e.property!==e.target.actualMaximum||this.invalidate("renderPass"):this.invalidate("renderDataPass"):this.invalidate("computeContainedRangePass")}),this.bins=new ObservableProperty("bins",Number,5).writeFilter(function(value){return isNaN(value)?5:Math.min(Math.max(Math.floor(value),1),9)}).onChange(function(e){this.invalidate("renderDataPass")}),this.neutralPoint=new ObservableProperty("neutralPoint",Number,NaN).writeFilter(function(value){return value>-(1/0)&&value<1/0?value:NaN}).onChange(function(e){this.invalidate("computeContainedRangePass")}),this.sharedMinimum=new ObservableProperty("sharedMinimum",Number,(-(1/0))).writeFilter(function(value){return value>-(1/0)&&value<1/0?value:-(1/0)}).onChange(function(e){this.invalidate("computeContainedRangePass")}),this.sharedMaximum=new ObservableProperty("sharedMaximum",Number,1/0).writeFilter(function(value){return value>-(1/0)&&value<1/0?value:1/0}).onChange(function(e){this.invalidate("computeContainedRangePass")}),this.colorPalette=new ObservableProperty("colorPalette",ColorPalette,null).onChange(function(e){this.invalidate("renderDataPass")}),this.shapeOpacity=new ObservableProperty("shapeOpacity",Number,.75).writeFilter(function(value){return isNaN(value)?.75:value>=0?Math.min(value,1):0}).onChange(function(e){this.invalidate("renderDataPass")}),this.borderColor=new ObservableProperty("borderColor",Color,Color.fromNumber(15329769)).readFilter(function(value){return value.clone()}).writeFilter(function(value){return value?value.clone().normalize():Color.fromNumber(15329769)}).changeComparator(function(oldValue,newValue){return!oldValue.equals(newValue)}).onChange(function(e){this.invalidate("renderDataPass")}),this.borderOpacity=new ObservableProperty("borderOpacity",Number,.75).writeFilter(function(value){return isNaN(value)?.75:value>=0?Math.min(value,1):0}).onChange(function(e){this.invalidate("renderDataPass")}),this.borderWidth=new ObservableProperty("borderWidth",Number,1).writeFilter(function(value){return value<1/0?Math.max(value,0):0}).onChange(function(e){this.invalidate("renderDataPass")}),this.showDensity=new ObservableProperty("showDensity",Boolean,(!1)).onChange(function(e){this.invalidate("processDataPass")}),this.wrapX=new ObservableProperty("wrapX",Boolean,(!0)).onChange(function(e){this.invalidate("renderPass")}),this.wrapY=new ObservableProperty("wrapY",Boolean,(!1)).onChange(function(e){this.invalidate("renderPass")}),this.featureIdFieldName=new ObservableProperty("featureIdFieldName",String,"").onChange(function(e){this.invalidate("processDataPass")}),this.selectedField=new ObservableProperty("selectedField",String,null).onChange(function(e){this.invalidate("renderDataPass")}),this._colorPalette=null,this._polygonMap=null,this._polygonList=null,this._labelValues=[],this.constructor=function(){base.constructor.call(this),this._polygonMap={},this._polygonList=[]},this.getLatLonBounds=function(center){if(null!=center&&!(center instanceof LatLon))throw new Error("Parameter center must be of type "+Class.getName(LatLon)+".");this.validate();for(var polygon,polygonBounds,bounds=new LatLonBounds(1/0,1/0,(-(1/0)),(-(1/0))),polygonList=this._polygonList,i=0,l=polygonList.length;i<l;i++)polygon=polygonList[i],polygonBounds=polygon.getLatLonBounds(),bounds.expand(polygonBounds.getSW().normalize(center)),bounds.expand(polygonBounds.getNE().normalize(center));return bounds.isFinite()?bounds:null},this.processDataOverride=function(data,fields){this.invalidate("renderPass");var i,p,oldPolygonMap=this._polygonMap,newPolygonMap=this._polygonMap={},polygonList=this._polygonList=[],numRows=data.length,numFields=fields.length,counts=[],axis=this.getInternal("axis");if(numRows>0&&numFields>1){var obj,polygonId,valueGeom,valueCount,valueArea,polygon,showDensity=this.getInternal("showDensity"),vectorContainer=this.vectorContainer,fieldName=this.getInternal("featureIdFieldName"),parsedFields=ChoroplethLayer.parseFieldTypes(fields,fieldName),fieldCount=parsedFields.count,fieldGeom=parsedFields.geom,fieldArea=showDensity?parsedFields.area:null;for(i=0;i<numRows;i++)if(obj=data[i],null!=obj){if(valueGeom=obj[fieldGeom],polygonId=fieldName&&obj[fieldName]?obj[fieldName]:valueGeom,valueCount=null!=obj[fieldCount]?obj[fieldCount]:"NULL",counts.push(valueCount),valueArea=fieldArea?DataUtil.parseNumber(obj[fieldArea]):0,polygon=oldPolygonMap[polygonId],polygon&&polygon.geom!==valueGeom&&(polygon.dispose(),polygon=null,delete oldPolygonMap[polygonId]),!polygon){if(polygon=MultiPolygon.fromJSON(valueGeom),!polygon)continue;polygon.appendTo(vectorContainer)}delete oldPolygonMap[polygonId],newPolygonMap[polygonId]=polygon,polygonList.push(polygon),polygon.data=obj,polygon.count=valueCount,polygon.geom=valueGeom,polygon.fields=fields,polygon.tooltipFields=fieldName&&obj[fieldName]?[fieldName,fieldCount]:[fieldCount],polygon.valueFieldName=fieldCount}axis?(this._labelValues=null,axis.provideContainedValues(this,counts)):this._labelValues=counts}for(p in oldPolygonMap)ObjectUtil.has(oldPolygonMap,p)&&oldPolygonMap[p].dispose()},this.computeContainedRange=function(){var axis=this.get("axis");if(axis){var sharedMinimum=this.getInternal("sharedMinimum"),sharedMaximum=this.getInternal("sharedMaximum"),hasSharedExtremes=_.isFinite(sharedMinimum)&&_.isFinite(sharedMaximum),preliminaryMinimum=hasSharedExtremes?sharedMinimum:axis.get("preliminaryMinimum"),preliminaryMaximum=hasSharedExtremes?sharedMaximum:axis.get("preliminaryMaximum");if(!_.isFinite(preliminaryMinimum)||!_.isFinite(preliminaryMaximum))return void axis.provideContainedRange(this,NaN,NaN);var neutralPoint=this.getInternal("neutralPoint"),hasNeutralPoint=!_.isNaN(neutralPoint);if(preliminaryMaximum===preliminaryMinimum&&(!hasNeutralPoint||preliminaryMinimum===neutralPoint))return void axis.provideContainedRange(this,NaN,NaN);if(!hasNeutralPoint)return void(hasSharedExtremes?axis.provideContainedRange(this,preliminaryMinimum,preliminaryMaximum):axis.provideContainedRange(this,NaN,NaN));var maxDataDifferenceFromNeutral=Math.max(neutralPoint-preliminaryMinimum,preliminaryMaximum-neutralPoint);axis.provideContainedRange(this,neutralPoint-maxDataDifferenceFromNeutral,neutralPoint+maxDataDifferenceFromNeutral)}},this.updateLegendLabelsOverride=function(data,fields){return this.getInternal("axis")?null:this._labelValues},this.renderDataOverride=function(data,fields,legend){var axis=this.getInternal("axis");if(axis||legend){var shapeOpacity=this.getInternal("shapeOpacity"),borderColor=this.getInternal("borderColor"),borderOpacity=this.getInternal("borderOpacity"),borderWidth=this.getInternal("borderWidth"),colorPalette=this.getInternal("colorPalette"),polygonList=this._polygonList;if(axis)var extendedMin=axis.get("extendedMinimum"),extendedMax=axis.get("extendedMaximum");var bins,numericBins=this.getInternal("bins"),selectedField=this.get("selectedField");bins=axis?numericBins:legend.getNumLabels();for(var paletteRatio,polygon,polygonCount,polygonBin,polygonSelectedCount,polygonSelectedBin,paletteSpan=Math.max(bins-1,0),i=0,l=polygonList.length;i<l;i++)polygon=polygonList[i],colorPalette?axis?(polygonCount=axis.valueToAbsolute(polygon.count),polygonBin=Math.floor(MathUtil.stripFloatingPointErrors((polygonCount-extendedMin)/((extendedMax-extendedMin)/bins))),paletteRatio=paletteSpan>0?polygonBin/paletteSpan:0,selectedField?(polygonSelectedCount=axis.valueToAbsolute(selectedField),polygonSelectedBin=Math.floor(MathUtil.stripFloatingPointErrors((polygonSelectedCount-extendedMin)/((extendedMax-extendedMin)/bins))),polygonBin===polygonSelectedBin?polygon.fillColor((colorPalette.getItem(paletteRatio,paletteSpan,String(polygonCount))||new Color).toNumber()):polygon.fillColor(_NULL_POLYGON_COLOR)):isNaN(polygonCount)?polygon.fillColor(_NULL_POLYGON_COLOR):polygon.fillColor((colorPalette.getItem(paletteRatio,paletteSpan,String(polygonCount))||new Color).toNumber())):selectedField?(polygonCount=polygon.count,polygonCount===selectedField?(polygonBin=legend.getLabelIndex(polygonCount),paletteRatio=paletteSpan>0?polygonBin/paletteSpan:0,polygon.fillColor((colorPalette.getItem(paletteRatio,paletteSpan,String(polygonCount))||new Color).toNumber())):polygon.fillColor(_NULL_POLYGON_COLOR)):(polygonCount=polygon.count,polygonBin=legend.getLabelIndex(polygonCount),paletteRatio=paletteSpan>0?polygonBin/paletteSpan:0,polygon.fillColor((colorPalette.getItem(paletteRatio,paletteSpan,String(polygonCount))||new Color).toNumber())):polygon.fillColor(0),polygon.fillOpacity(shapeOpacity),borderWidth>0?(polygon.strokeColor(borderColor.toNumber()),polygon.strokeOpacity(borderOpacity),polygon.strokeWidth(borderWidth)):(polygon.strokeColor(NaN),polygon.strokeOpacity(NaN),polygon.strokeWidth(NaN));this.isValid("renderPass")&&this.fire("rendered",new EventData)}},this.renderOverride=function(map){var axis=this.getInternal("axis");base.renderOverride.call(this,map);for(var polygon,polygonPixelBounds,polygonCenter,polygonLatLng,polygonLatLngWrapped,polygonPoint,polygonPointWrapped,polygonOffsetX,polygonOffsetY,leafletMap=map.leafletMap,centerLatLng=leafletMap.getCenter(),wrapX=this.getInternal("wrapX"),wrapY=this.getInternal("wrapY"),vectorBounds=this.vectorBounds,minX=vectorBounds.minX,minY=vectorBounds.minY,maxX=vectorBounds.maxX,maxY=vectorBounds.maxY,polygonList=this._polygonList,i=0,l=polygonList.length;i<l;i++){var count=polygonList[i].count;count=axis?axis.absoluteToRelative(count):0,polygon=polygonList[i],polygon.render(leafletMap),polygonPixelBounds=polygon.getPixelBounds(),polygonCenter=polygon.getLatLonBounds().getCenter(),polygonLatLng=polygonCenter.toLeaflet(),polygonLatLngWrapped=polygonCenter.toLeaflet(),wrapX&&(polygonLatLngWrapped.lng-=centerLatLng.lng,polygonLatLngWrapped.lng%=360,polygonLatLngWrapped.lng>180?polygonLatLngWrapped.lng-=360:polygonLatLngWrapped.lng<-180&&(polygonLatLngWrapped.lng+=360),polygonLatLngWrapped.lng+=centerLatLng.lng),wrapY&&(polygonLatLngWrapped.lat-=centerLatLng.lat,polygonLatLngWrapped.lat%=180,polygonLatLngWrapped.lat>90?polygonLatLngWrapped.lat-=180:polygonLatLngWrapped.lat<-90&&(polygonLatLngWrapped.lat+=180),polygonLatLngWrapped.lat+=centerLatLng.lat),polygon.tooltipLatLng=polygonLatLngWrapped,polygonPoint=leafletMap.latLngToLayerPoint(polygonLatLng),polygonPointWrapped=leafletMap.latLngToLayerPoint(polygonLatLngWrapped),polygonOffsetX=polygonPointWrapped.x-polygonPoint.x,polygonOffsetY=polygonPointWrapped.y-polygonPoint.y,polygon.translate(polygonOffsetX,polygonOffsetY),polygonOffsetX+polygonPixelBounds.x+polygonPixelBounds.width<minX||polygonOffsetX+polygonPixelBounds.x>maxX||polygonOffsetY+polygonPixelBounds.y+polygonPixelBounds.height<minY||polygonOffsetY+polygonPixelBounds.y>maxY||count<0||count>1?polygon.display("none"):polygon.display(null)}this.fire("rendered",new EventData)};var MultiPolygon=Class(Path,function(MultiPolygon,base){MultiPolygon.fromJSON=function(json){if(null==json)return null;if("string"==typeof json&&(json=JSON.parse(json)),!json||"MultiPolygon"!==json.type)return null;var coordinates=json.coordinates;return coordinates&&(coordinates=_processCoordinates(coordinates))?(_normalizeCoordinates(coordinates),new MultiPolygon(coordinates)):null};var _processCoordinates=function(coordinates,processed,path){if(!coordinates)return null;var length=coordinates.length;if(!length)return null;if(processed||(processed=[]),2===length&&"number"==typeof coordinates[0]&&"number"==typeof coordinates[1])path?path.push(new LatLon(coordinates[1],coordinates[0])):processed.push([new LatLon(coordinates[1],coordinates[0])]);else{path=[];for(var i=0;i<length;i++)_processCoordinates(coordinates[i],processed,path);path.length>0&&processed.push(path)}return processed.length>0?processed:null},_normalizeCoordinates=function(coordinates){var path,latLon,ci,pi,pl,length=coordinates.length,lonSum=0,lonCount=0;for(ci=0;ci<length;ci++)for(path=coordinates[ci],pi=0,pl=path.length;pi<pl;pi++)latLon=path[pi],lonSum+=latLon.lon,lonCount++;var lonAvg=lonSum/lonCount;for(ci=0;ci<length;ci++)if(path=coordinates[ci],latLon=path[0],latLon.lon-lonAvg>180)for(pi=0,pl=path.length;pi<pl;pi++)latLon=path[pi],latLon.lon-=360;else if(latLon.lon-lonAvg<-180)for(pi=0,pl=path.length;pi<pl;pi++)latLon=path[pi],latLon.lon+=360};this.magnitude=0,this.scale=0,this.data=null,this.fields=null,this.tooltipFields=null,this.tooltipLatLng=null,this.tooltipOffsetRadius=0,this._coordinates=null,this._bounds=null,this._boundsPixels=new Rectangle(NaN,NaN,NaN,NaN),this.constructor=function(coordinates){if(null==coordinates)throw new Error("Parameter coordinates must be non-null.");base.constructor.call(this),this._coordinates=coordinates,this.element[LayerBase.METADATA_KEY]=this},this.getLatLonBounds=function(){var bounds=this._bounds;if(!bounds){bounds=this._bounds=new LatLonBounds(1/0,1/0,(-(1/0)),(-(1/0)));var path,ci,cl,pi,pl,coordinates=this._coordinates;for(ci=0,cl=coordinates.length;ci<cl;ci++)for(path=coordinates[ci],pi=0,pl=path.length;pi<pl;pi++)bounds.expand(path[pi])}return bounds},this.getPixelBounds=function(){return this._boundsPixels},this.render=function(leafletMap){var coordinates=this._coordinates,bounds=this.getLatLonBounds(),pointPixelsNW=leafletMap.latLngToLayerPoint(bounds.getNW().toLeaflet()),pointPixelsSE=leafletMap.latLngToLayerPoint(bounds.getSE().toLeaflet()),boundsPixels=new Rectangle(pointPixelsNW.x,pointPixelsNW.y,pointPixelsSE.x-pointPixelsNW.x,pointPixelsSE.y-pointPixelsNW.y);if(!boundsPixels.equals(this._boundsPixels)){this._boundsPixels=boundsPixels;var path,point0,pointI,ci,cl,pi,pl;for(this.beginPath(),ci=0,cl=coordinates.length;ci<cl;ci++){for(path=coordinates[ci],point0=leafletMap.latLngToLayerPoint(path[0].toLeaflet()),this.moveTo(point0.x,point0.y),pi=1,pl=path.length;pi<pl;pi++)pointI=leafletMap.latLngToLayerPoint(path[pi].toLeaflet()),this.lineTo(pointI.x,pointI.y);this.lineTo(point0.x,point0.y)}this.endPath()}},this.dispose=function(){this.element[LayerBase.METADATA_KEY]=null,base.dispose.call(this)}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/geom/Rectangle":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),NumberUtil=__webpack_require__("contrib/jg_lib/utils/NumberUtil");return Class(module.id,Object,function(Rectangle,base){var _R_PAREN_CONTENTS=/^\s*\(?([^\)]+)\)?\s*$/;Rectangle.interpolate=function(rectangle1,rectangle2,ratio){var x=NumberUtil.interpolate(rectangle1.x,rectangle2.x,ratio),y=NumberUtil.interpolate(rectangle1.y,rectangle2.y,ratio),width=NumberUtil.interpolate(rectangle1.width,rectangle2.width,ratio),height=NumberUtil.interpolate(rectangle1.height,rectangle2.height,ratio);return new Rectangle(x,y,width,height)},Rectangle.fromArray=function(arr){var length=arr.length,x=length>0?arr[0]:0,y=length>1?arr[1]:0,width=length>2?arr[2]:0,height=length>3?arr[3]:0;return new Rectangle(x,y,width,height)},Rectangle.fromString=function(str){var match=(""+str).match(_R_PAREN_CONTENTS);return match?Rectangle.fromArray(match[1].split(",")):new Rectangle},this.x=0,this.y=0,this.width=0,this.height=0,this.constructor=function(x,y,width,height){this.x=null!=x?+x:0,this.y=null!=y?+y:0,this.width=null!=width?+width:0,this.height=null!=height?+height:0},this.hasNaN=function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height)},this.hasInfinity=function(){return this.x==1/0||this.x==-(1/0)||this.y==1/0||this.y==-(1/0)||this.width==1/0||this.width==-(1/0)||this.height==1/0||this.height==-(1/0)},this.isFinite=function(){return this.x-this.x===0&&this.y-this.y===0&&this.width-this.width===0&&this.height-this.height===0},this.approxEquals=function(rectangle,threshold){return NumberUtil.approxEqual(this.x,rectangle.x,threshold)&&NumberUtil.approxEqual(this.y,rectangle.y,threshold)&&NumberUtil.approxEqual(this.width,rectangle.width,threshold)&&NumberUtil.approxEqual(this.height,rectangle.height,threshold)},this.equals=function(rectangle){return this.x==rectangle.x&&this.y==rectangle.y&&this.width==rectangle.width&&this.height==rectangle.height},this.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},this.toArray=function(){return[+this.x,+this.y,+this.width,+this.height]},this.toString=function(){return"("+ +this.x+","+ +this.y+","+ +this.width+","+ +this.height+")"}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/axis/BaseAxis":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),MPassTarget=__webpack_require__("contrib/jg_lib/async/MPassTarget"),Pass=__webpack_require__("contrib/jg_lib/async/Pass"),ChainedEvent=__webpack_require__("contrib/jg_lib/events/ChainedEvent"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),MListenerTarget=__webpack_require__("contrib/jg_lib/events/MListenerTarget"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),MPropertyTarget=__webpack_require__("contrib/jg_lib/properties/MPropertyTarget"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),Map=__webpack_require__("contrib/jg_lib/utils/Map");return Class(module.id,Object,function(BaseAxis,base){Class.mixin(this,MEventTarget,MListenerTarget,MObservableTarget,MPropertyTarget,MPassTarget),this.processContainedValuesPass=new Pass("processContainedValues",.11),this.processContainedRangePass=new Pass("processContainedRange",.12),this.processExtendedRangePass=new Pass("processExtendedRange",.13),this.processActualRangePass=new Pass("processActualRange",.14),this.absoluteMapChanged=new ChainedEvent("absoluteMapChanged",this.change),this.relativeMapChanged=new ChainedEvent("relativeMapChanged",this.change),this.minimum=new ObservableProperty("minimum",Number,NaN).writeFilter(function(value){return value>-(1/0)&&value<1/0?value:NaN}).onChange(function(e){this.invalidate("processActualRangePass")}),this.maximum=new ObservableProperty("maximum",Number,NaN).writeFilter(function(value){return value>-(1/0)&&value<1/0?value:NaN}).onChange(function(e){this.invalidate("processActualRangePass")}),this.preliminaryMinimum=new ObservableProperty("preliminaryMinimum",Number,1/0).readOnly(!0),this.preliminaryMaximum=new ObservableProperty("preliminaryMaximum",Number,(-(1/0))).readOnly(!0),this.containedMinimum=new ObservableProperty("containedMinimum",Number,1/0).readOnly(!0),this.containedMaximum=new ObservableProperty("containedMaximum",Number,(-(1/0))).readOnly(!0),this.extendedMinimum=new ObservableProperty("extendedMinimum",Number,1/0).readOnly(!0),this.extendedMaximum=new ObservableProperty("extendedMaximum",Number,(-(1/0))).readOnly(!0),this.actualMinimum=new ObservableProperty("actualMinimum",Number,1/0).readOnly(!0),this.actualMaximum=new ObservableProperty("actualMaximum",Number,(-(1/0))).readOnly(!0),this._vizStore=null,this._actualMaximum=0,this._actualMinimum=0,this.constructor=function(){this._vizStore=new Map},this.register=function(key){this._vizStore.has(key)||this._vizStore.set(key,{values:[],extendedRange:{absolute1:NaN,absolute2:NaN},containedRange:{absolute1:NaN,absolute2:NaN}})},this.unregister=function(key){this._vizStore.has(key)&&(this._vizStore.del(key),this.invalidate(this.processContainedRangePass))},this.provideContainedValues=function(key,values){var viz=this._vizStore.get(key);viz&&(viz.values=values.slice(),this._vizStore.set(key,viz),this.invalidate(this.processContainedValuesPass))},this.provideContainedRange=function(key,min,max){var viz=this._vizStore.get(key);if(min>max){var tempMax=max;max=min,min=tempMax}viz&&(viz.containedRange.absolute1=min,viz.containedRange.absolute2=max,this.invalidate(this.processContainedRangePass))},this.provideExtendedRange=function(key,min,max){var viz=this._vizStore.get(key);if(min>max){var tempMax=max;max=min,min=tempMax}viz&&(viz.extendedRange.absolute1=min,viz.extendedRange.absolute2=max,this.invalidate(this.processExtendedRangePass))},this.processContainedValues=function(){var i,visualizations=this._vizStore.values(),values=[],preliminaryMinimum=1/0,preliminaryMaximum=-(1/0);for(i=0;i<visualizations.length;i++)values=values.concat(visualizations[i].values);for(values=this.processValues(values),i=0;i<values.length;i++){var currentValue=this.valueToAbsolute(values[i]);currentValue<preliminaryMinimum&&(preliminaryMinimum=currentValue),currentValue>preliminaryMaximum&&(preliminaryMaximum=currentValue)}this.setInternal("preliminaryMinimum",preliminaryMinimum),this.setInternal("preliminaryMaximum",preliminaryMaximum),this.invalidate("processContainedRangePass")},this.processContainedRange=function(){for(var previousComputedMinimum=this.getInternal("preliminaryMinimum"),previousComputedMaximum=this.getInternal("preliminaryMaximum"),values=this._vizStore.values(),i=0;i<values.length;i++)values[i].containedRange.absolute1<previousComputedMinimum&&(previousComputedMinimum=values[i].containedRange.absolute1),values[i].containedRange.absolute2>previousComputedMaximum&&(previousComputedMaximum=values[i].containedRange.absolute2);this.setInternal("containedMaximum",previousComputedMaximum),this.setInternal("containedMinimum",previousComputedMinimum),this.invalidate("processExtendedRangePass")},this.processExtendedRange=function(){for(var previousContainedMinimum=this.getInternal("containedMinimum"),previousContainedMaximum=this.getInternal("containedMaximum"),values=this._vizStore.values(),i=0;i<values.length;i++)values[i].extendedRange.absolute1<previousContainedMinimum&&(previousContainedMinimum=values[i].extendedRange.absolute1),values[i].extendedRange.absolute2>previousContainedMaximum&&(previousContainedMaximum=values[i].extendedRange.absolute2);this.setInternal("extendedMinimum",previousContainedMinimum),this.setInternal("extendedMaximum",previousContainedMaximum),this.invalidate("processActualRangePass")},this.processActualRange=function(){var minimum=this.getInternal("minimum"),maximum=this.getInternal("maximum"),previousMin=this._actualMinimum,previousMax=this._actualMaximum;isNaN(minimum)&&(minimum=this.getInternal("extendedMinimum")),isNaN(maximum)&&(maximum=this.getInternal("extendedMaximum")),this._actualMinimum=minimum,this._actualMaximum=maximum,this.setInternal("actualMaximum",maximum),this.setInternal("actualMinimum",minimum),this._actualMaximum===previousMax&&this._actualMinimum===previousMin||this.fire("relativeMapChanged",new EventData)},this.valueToAbsolute=function(value){throw new Error("Must implement valueToAbsolute method")},this.absoluteToValue=function(absolute){throw new Error("Must implement absoluteToValue method")},this.absoluteToRelative=function(absVal){return this._actualMaximum===this._actualMinimum?0:(absVal-this._actualMinimum)/(this._actualMaximum-this._actualMinimum)},this.relativeToAbsolute=function(relativeVal){return relativeVal*(this._actualMaximum-this._actualMinimum)+this._actualMinimum},this.processValues=function(values){throw new Error("Must implement processValues mehod")}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/utils/FunctionUtil":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(FunctionUtil){var _slice=Array.prototype.slice;FunctionUtil.bind=function(func,scope){if(arguments.length<3)return function(){return func.apply(scope,arguments)};var args=_slice.call(arguments,2);return function(){return func.apply(scope,args.concat(_slice.call(arguments)))}}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Group":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),VectorElement=__webpack_require__("splunk/vectors/VectorElement");return Class(module.id,VectorElement,function(Group,base){this.constructor=function(){base.constructor.call(this)};var SVGGroup=Class(function(SVGGroup){this.constructor=function(){base.constructor.call(this,"g")}}),VMLGroup=Class(function(VMLGroup){this.constructor=function(){base.constructor.call(this,"group"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize="1,1"}});VectorElement.mixin(this,SVGGroup,VMLGroup)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/VectorElement":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,Object,function(VectorElement,base){var _HAS_SVG="function"==typeof document.createElementNS,_HAS_VML=!_HAS_SVG&&function(){try{document.namespaces.add("splvml","urn:schemas-microsoft-com:vml");var styleText=".splvml { behavior: url(#default#VML); display: inline-block; position: absolute; }",styleNode=document.createElement("style");styleNode.setAttribute("type","text/css");var headNode=document.getElementsByTagName("head")[0];return headNode.appendChild(styleNode),styleNode.styleSheet?styleNode.styleSheet.cssText=styleText:styleNode.appendChild(document.createTextNode(styleText)),!0}catch(e){return!1}}();VectorElement.mixin=function(target,sourceSVG,sourceVML){_HAS_SVG?(Class.mixin(target,sourceSVG),sourceSVG.constructor!==Object&&"function"==typeof sourceSVG.constructor&&(target.constructor=sourceSVG.constructor)):_HAS_VML&&(Class.mixin(target,sourceVML),sourceVML.constructor!==Object&&"function"==typeof sourceVML.constructor&&(target.constructor=sourceVML.constructor))},this.hasSVG=_HAS_SVG,this.hasVML=_HAS_VML,this.element=null,this.constructor=function(tagName){if(null!=tagName&&!Class.isString(tagName))throw new Error("Parameter tagName must be of type String.");this.element=this.createElement(tagName||null)},this.appendTo=function(parentElement){if(null==parentElement)throw new Error("Parameter parentElement must be non-null.");if(!(parentElement instanceof VectorElement))throw new Error("Parameter parentElement must be of type "+Class.getName(VectorElement)+".");return parentElement.element.appendChild(this.element),this},this.remove=function(){return this.element.parentNode&&this.element.parentNode.removeChild(this.element),this},this.dispose=function(){this.remove(),this.element=null},this.display=function(value){return this.element.style.display=value?value:"",this},this.visibility=function(value){return this.element.style.visibility=value?value:"",this},this.translate=function(x,y){return x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,this.element.style.left=0!=x?x+"px":"",this.element.style.top=0!=y?y+"px":"",this},this.createElement=function(tagName){var dummy=document.createElement("div");return dummy.style.position="absolute",dummy};var SVGVectorElement=Class(function(SVGVectorElement){var _NS_SVG="http://www.w3.org/2000/svg";this.display=function(value){return value?this.element.setAttribute("display",value):this.element.removeAttribute("display"),this},this.visibility=function(value){return value?this.element.setAttribute("visibility",value):this.element.removeAttribute("visibility"),this},this.translate=function(x,y){return x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,0!=x||0!=y?this.element.setAttribute("transform","translate("+x+","+y+")"):this.element.removeAttribute("transform"),this},this.createElement=function(tagName){return document.createElementNS(_NS_SVG,tagName||"g")}}),VMLVectorElement=Class(function(VMLVectorElement){this.createElement=function(tagName){return document.createElement("<splvml:"+(tagName||"group")+' class="splvml">')}});VectorElement.mixin(this,SVGVectorElement,VMLVectorElement)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Viewport":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Rectangle=__webpack_require__("contrib/jg_lib/geom/Rectangle"),VectorElement=__webpack_require__("splunk/vectors/VectorElement"),VectorUtils=__webpack_require__("splunk/vectors/VectorUtils");return Class(module.id,VectorElement,function(Viewport,base){this.constructor=function(width,height,viewBox,preserveAspectRatio){base.constructor.call(this)},this.width=function(value){return this},this.height=function(value){return this},this.viewBox=function(value){return this},this.preserveAspectRatio=function(value){return this},this.toSVGString=function(){return""};var SVGViewport=Class(function(SVGViewport){this.constructor=function(width,height,viewBox,preserveAspectRatio){base.constructor.call(this,"svg"),this.width(null!=width?width:0),this.height(null!=height?height:0),null!=viewBox&&this.viewBox(viewBox),null!=preserveAspectRatio&&this.preserveAspectRatio(preserveAspectRatio)},this.appendTo=function(parentElement){if(null==parentElement)throw new Error("Parameter parentElement must be non-null.");if(null==parentElement.appendChild)throw new Error("Parameter parentElement must be a DOM node.");return parentElement.appendChild(this.element),this},this.width=function(value){return null!=value&&value<1/0?this.element.setAttribute("width",Math.max(value,0)):this.element.setAttribute("width",0),this},this.height=function(value){return null!=value&&value<1/0?this.element.setAttribute("height",Math.max(value,0)):this.element.setAttribute("height",0),this},this.viewBox=function(value){return value&&value instanceof Rectangle&&value.isFinite()?this.element.setAttribute("viewBox",value.x+" "+value.y+" "+value.width+" "+value.height):this.element.removeAttribute("viewBox"),this},this.preserveAspectRatio=function(value){return value?this.element.setAttribute("preserveAspectRatio",value):this.element.removeAttribute("preserveAspectRatio"),this},this.toSVGString=function(){return VectorUtils.toSVGString(this.element)}}),VMLViewport=Class(function(VMLViewport){this._containerElement=null,this._width=0,this._height=0,this._viewBox=null,this.constructor=function(width,height,viewBox,preserveAspectRatio){base.constructor.call(this,"group"),this._containerElement=document.createElement("div"),this._containerElement.style.position="relative",this._containerElement.style.overflow="hidden",this._containerElement.appendChild(this.element),this.width(null!=width?width:0),this.height(null!=height?height:0),null!=viewBox&&this.viewBox(viewBox),null!=preserveAspectRatio&&this.preserveAspectRatio(preserveAspectRatio)},this.appendTo=function(parentElement){if(null==parentElement)throw new Error("Parameter parentElement must be non-null.");if(null==parentElement.appendChild)throw new Error("Parameter parentElement must be a DOM node.");return parentElement.appendChild(this._containerElement),this},this.remove=function(){return this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement),this},this.dispose=function(){base.dispose.call(this),this._containerElement=null},this.display=function(value){return this._containerElement.style.display=value?value:"",this},this.visibility=function(value){return this._containerElement.style.visibility=value?value:"",this},this.translate=function(x,y){return x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,this._containerElement.style.left=0!=x?x+"px":"",this._containerElement.style.top=0!=y?y+"px":"",this},this.width=function(value){return this._width=null!=value&&value<1/0?Math.max(value,0):0,this._updateView(),this},this.height=function(value){return this._height=null!=value&&value<1/0?Math.max(value,0):0,this._updateView(),this},this.viewBox=function(value){return this._viewBox=value&&value instanceof Rectangle&&value.isFinite()?value.clone():null,this._updateView(),this},this.preserveAspectRatio=function(value){return this},this._updateView=function(){var width=Math.round(this._width),height=Math.round(this._height),viewBox=this._viewBox,viewX=viewBox?Math.round(viewBox.x):0,viewY=viewBox?Math.round(viewBox.y):0,viewWidth=viewBox?Math.round(Math.max(viewBox.width,1)):width,viewHeight=viewBox?Math.round(Math.max(viewBox.height,1)):height,element=this.element,style=element.style,containerStyle=this._containerElement.style;style.display="none",element.coordorigin=viewX+","+viewY,element.coordsize=viewWidth+","+viewHeight,style.width=width+"px",style.height=height+"px",containerStyle.width=width+"px",containerStyle.height=height+"px",style.display=""}});VectorElement.mixin(this,SVGViewport,VMLViewport)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/VectorUtils":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(VectorUtils){VectorUtils.toSVGString=function(element){var clonedElement=element.cloneNode(!0),containerElement=document.createElement("div");containerElement.appendChild(clonedElement);var svgString=containerElement.innerHTML;return svgString=svgString.replace(/xlink:href=|href=/g,"x:href="),svgString=svgString.replace(/<image([\S\s]*?)\s*\/?>\s*(<\/image>)?/g,"<image$1></image>"),svgString=svgString.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:x="http://www.w3.org/1999/xlink"'),clonedElement=null,containerElement=null,svgString},VectorUtils.concatSVGStrings=function(){for(var svgString,viewBoxMatch,viewBox,concatString="",width=0,height=0,i=0,l=arguments.length;i<l;i++)svgString=arguments[i],viewBoxMatch=svgString.match(/^<svg[^>]*viewBox=\"([^ ]+) ([^ ]+) ([^ ]+) ([^\"]+)\"[^>]*>/),viewBoxMatch&&5==viewBoxMatch.length?(viewBox={x:Number(viewBoxMatch[1]),y:Number(viewBoxMatch[2]),width:Number(viewBoxMatch[3]),height:Number(viewBoxMatch[4])},width=Math.max(width,viewBox.width),height=Math.max(height,viewBox.height)):viewBox=null,svgString=!viewBox||0==viewBox.x&&0==viewBox.y?svgString.replace(/^<svg[^>]*>/,"<g>"):svgString.replace(/^<svg[^>]*>/,'<g transform="translate('+-viewBox.x+", "+-viewBox.y+')">'),svgString=svgString.replace(/<\/svg>$/,"</g>"),concatString+=svgString;return svgString="<svg",svgString+=' xmlns="http://www.w3.org/2000/svg"',svgString+=' xmlns:x="http://www.w3.org/1999/xlink"',svgString+=' width="'+width+'"',svgString+=' height="'+height+'"',svgString+=' viewBox="0 0 '+width+" "+height+'"',svgString+=">",svgString+=concatString,svgString+="</svg>"}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/palettes/ColorPalette":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),Palette=__webpack_require__("splunk/palettes/Palette");return Class(module.id,Palette,function(ColorPalette,base){this.constructor=function(){base.constructor.call(this,Color)}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/palettes/Palette":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),MEventTarget=__webpack_require__("contrib/jg_lib/events/MEventTarget"),MListenerTarget=__webpack_require__("contrib/jg_lib/events/MListenerTarget"),MObservableTarget=__webpack_require__("contrib/jg_lib/events/MObservableTarget"),MPropertyTarget=__webpack_require__("contrib/jg_lib/properties/MPropertyTarget"),Property=__webpack_require__("contrib/jg_lib/properties/Property"),NumberUtil=__webpack_require__("contrib/jg_lib/utils/NumberUtil");return Class(module.id,Object,function(Palette,base){Class.mixin(this,MEventTarget,MListenerTarget,MObservableTarget,MPropertyTarget),this._itemType=null,this._itemTypeChecker=null,this._itemNullValue=null,this._cachedProperties=null,this._hasChangeListener=!1,this.constructor=function(itemType){if(null==itemType)throw new Error("Parameter itemType must be non-null.");if(!Class.isFunction(itemType))throw new Error("Parameter itemType must be of type Function.");this._itemType=itemType,this._itemTypeChecker=Class.getTypeChecker(itemType),itemType===Number?this._itemNullValue=NaN:itemType===Boolean?this._itemNullValue=!1:this._itemNullValue=null},this.itemType=function(){return this._itemType},this.dispose=function(){this.listenOff(),this.off(),this._cachedProperties=null},this.getItem=function(ratio,span,value){if(null==ratio)throw new Error("Parameter ratio must be non-null.");ratio=+ratio,ratio=ratio<=1/0?NumberUtil.minMax(ratio,0,1):0,span=null!=span?+span:NaN,span=span>=0&&span<1/0?Math.floor(span):NaN,this._cachedProperties||(this._hasChangeListener||(this.on("change",this._selfChange,this,1/0),this._hasChangeListener=!0),this._cachedProperties=this._getProperties(),this.extendProperties(this._cachedProperties));var item=this.getItemOverride(this._cachedProperties,ratio,span,value);if(null==item)item=this._itemNullValue;else if(!this._itemTypeChecker(item))throw new Error("Value returned from getItemOverride must be of type "+(Class.getName(this._itemType)||"itemType")+".");return item},this.extendProperties=function(properties){},this.getItemOverride=function(properties,ratio,span,value){return null},this._getProperties=function(){var property,properties={};for(var p in this)property=this[p],property instanceof Property&&(properties[p]=this.getInternal(property));return properties},this._selfChange=function(e){this._cachedProperties=null}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/palettes/ListColorPalette":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),ObservableArrayProperty=__webpack_require__("contrib/jg_lib/properties/ObservableArrayProperty"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),ColorPalette=__webpack_require__("splunk/palettes/ColorPalette");return Class(module.id,ColorPalette,function(ListColorPalette,base){this.colors=new ObservableArrayProperty("colors",Color,[]).itemReadFilter(function(value){return value.clone()}).itemWriteFilter(function(value){return value?value.clone().normalize():new Color}).itemChangeComparator(function(oldValue,newValue){return!oldValue.equals(newValue)}),this.interpolate=new ObservableProperty("interpolate",Boolean,(!1)),this.constructor=function(colors,interpolate){base.constructor.call(this),null!=colors&&this.set("colors",colors),null!=interpolate&&this.set("interpolate",interpolate)},this.getItemOverride=function(properties,ratio,span,value){var colors=properties.colors,numColors=colors.length;if(0===numColors)return null;var index;if(span>=0?index=Math.round(span*ratio):(span=numColors-1,index=span*ratio),!properties.interpolate)return index=Math.round(index),colors[index%numColors].clone();ratio=span>0?(numColors-1)*(index/span):0;var index1=Math.floor(ratio),index2=Math.min(index1+1,numColors-1);return ratio-=index1,Color.interpolate(colors[index1],colors[index2],ratio)}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/utils/DataUtil":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),StringUtil=__webpack_require__("contrib/jg_lib/utils/StringUtil");return Class(module.id,function(DataUtil){DataUtil.parseNumber=function(value){if(null==value)return NaN;switch(typeof value){case"number":return value;case"string":return value=StringUtil.trim(value),value?Number(value):NaN;case"boolean":return value?1:0}return NaN},DataUtil.parseBoolean=function(value){if(null==value)return!1;switch(typeof value){case"boolean":return value;case"string":return value=StringUtil.trim(value.toLowerCase()),"true"===value||"t"===value||"yes"===value||"y"===value||Number(value)>0;case"number":return value>0}return!1},DataUtil.parseString=function(value){return null==value?null:String(value)}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Path":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Shape=__webpack_require__("splunk/vectors/Shape"),VectorElement=__webpack_require__("splunk/vectors/VectorElement");return Class(module.id,Shape,function(Path,base){this.constructor=function(){base.constructor.call(this)},this.beginPath=function(){return this},this.endPath=function(){return this},this.moveTo=function(x,y){return this},this.lineTo=function(x,y){return this},this.curveTo=function(cx,cy,x,y){return this};var SVGPath=Class(function(SVGPath){this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null,this.constructor=function(){base.constructor.call(this,"path")},this.beginPath=function(){return null!=this._pathData&&this.endPath(),this._pathData="",this},this.endPath=function(){return null==this._pathData?this:(this._pathData?("M"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" Z"),this.element.setAttribute("d",this._pathData.substring(1))):this.element.removeAttribute("d"),this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null,this)},this.moveTo=function(x,y){return null==this._pathData?this:(x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,this._pathData&&"M"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" Z"),"M"!==this._lastCommand&&(this._lastCommand="M"),this._penX=x,this._penY=y,this._startX=x,this._startY=y,this._pathData+=" M"+x+","+y,this)},this.lineTo=function(x,y){return null==this._pathData?this:(x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,this._lastCommand||this.moveTo(0,0),"L"!==this._lastCommand?(this._lastCommand="L",this._pathData+=" L"):this._pathData+=" ",this._penX=x,this._penY=y,this._pathData+=x+","+y,this)},this.curveTo=function(cx,cy,x,y){return null==this._pathData?this:(cx=null!=cx&&cx>-(1/0)&&cx<1/0?cx:0,cy=null!=cy&&cy>-(1/0)&&cy<1/0?cy:0,x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,this._lastCommand||this.moveTo(0,0),"Q"!==this._lastCommand?(this._lastCommand="Q",this._pathData+=" Q"):this._pathData+=" ",this._penX=x,this._penY=y,this._pathData+=cx+","+cy+" "+x+","+y,this)}}),VMLPath=Class(function(VMLPath){var _RES=64;this._pathElement=null,this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null,this.constructor=function(){base.constructor.call(this,"shape"),this._pathElement=this.createElement("path"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize=_RES+","+_RES,this.element.appendChild(this._pathElement)},this.dispose=function(){base.dispose.call(this),this._pathElement=null},this.beginPath=function(){return null!=this._pathData&&this.endPath(),this._pathData="",this},this.endPath=function(){return null==this._pathData?this:(this._pathData?("m"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" x"),this._pathElement.v=this._pathData.substring(1)):this._pathElement.v=" ",this._penX=0,this._penY=0,this._startX=0,this._startY=0,this._pathData=null,this._lastCommand=null,this)},this.moveTo=function(x,y){return null==this._pathData?this:(x=null!=x&&x>-(1/0)&&x<1/0?Math.round(x*_RES):0,y=null!=y&&y>-(1/0)&&y<1/0?Math.round(y*_RES):0,this._pathData&&"M"!==this._lastCommand&&this._penX===this._startX&&this._penY===this._startY&&(this._pathData+=" x"),"m"!==this._lastCommand&&(this._lastCommand="m"),this._penX=x,this._penY=y,this._startX=x,this._startY=y,this._pathData+=" m "+x+","+y,this)},this.lineTo=function(x,y){return null==this._pathData?this:(x=null!=x&&x>-(1/0)&&x<1/0?Math.round(x*_RES):0,y=null!=y&&y>-(1/0)&&y<1/0?Math.round(y*_RES):0,this._lastCommand||this.moveTo(0,0),"l"!==this._lastCommand?(this._lastCommand="l",this._pathData+=" l "):this._pathData+=", ",this._penX=x,this._penY=y,this._pathData+=x+","+y,this)},this.curveTo=function(cx,cy,x,y){return null==this._pathData?this:(cx=null!=cx&&cx>-(1/0)&&cx<1/0?Math.round(cx*_RES):0,cy=null!=cy&&cy>-(1/0)&&cy<1/0?Math.round(cy*_RES):0,x=null!=x&&x>-(1/0)&&x<1/0?Math.round(x*_RES):0,y=null!=y&&y>-(1/0)&&y<1/0?Math.round(y*_RES):0,this._lastCommand||this.moveTo(0,0),"qb"!==this._lastCommand&&(this._lastCommand="qb"),this._penX=x,this._penY=y,this._pathData+=" qb "+cx+","+cy+" l "+x+","+y,this)}});VectorElement.mixin(this,SVGPath,VMLPath)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Shape":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),NumberUtil=__webpack_require__("contrib/jg_lib/utils/NumberUtil"),VectorElement=__webpack_require__("splunk/vectors/VectorElement");return Class(module.id,VectorElement,function(Shape,base){this.constructor=function(tagName){base.constructor.call(this,tagName)},this.fillColor=function(value){return this},this.fillOpacity=function(value){return this},this.strokeColor=function(value){return this},this.strokeOpacity=function(value){return this},this.strokeWidth=function(value){return this},this.strokeLineCap=function(value){return this},this.strokeLineJoin=function(value){return this},this.strokeMiterLimit=function(value){return this};var SVGShape=Class(function(SVGShape){this.constructor=function(tagName){base.constructor.call(this,tagName),this.fillColor(NaN),this.strokeColor(NaN),this.strokeLineCap("none"),this.strokeLineJoin("miter")},this.fillColor=function(value){return null==value||isNaN(value)?this.element.setAttribute("fill","none"):(value=NumberUtil.minMax(Math.floor(value),0,16777215),this.element.setAttribute("fill","#"+(16777216|value).toString(16).substring(1))),this},this.fillOpacity=function(value){return null==value||isNaN(value)?this.element.removeAttribute("fill-opacity"):this.element.setAttribute("fill-opacity",NumberUtil.minMax(value,0,1)),this},this.strokeColor=function(value){return null==value||isNaN(value)?this.element.removeAttribute("stroke"):(value=NumberUtil.minMax(Math.floor(value),0,16777215),this.element.setAttribute("stroke","#"+(16777216|value).toString(16).substring(1))),this},this.strokeOpacity=function(value){return null==value||isNaN(value)?this.element.removeAttribute("stroke-opacity"):this.element.setAttribute("stroke-opacity",NumberUtil.minMax(value,0,1)),this},this.strokeWidth=function(value){return null!=value&&value<1/0?this.element.setAttribute("stroke-width",Math.max(value,1)):this.element.removeAttribute("stroke-width"),this},this.strokeLineCap=function(value){return"round"===value?this.element.setAttribute("stroke-linecap","round"):"square"===value?this.element.setAttribute("stroke-linecap","square"):this.element.removeAttribute("stroke-linecap"),this},this.strokeLineJoin=function(value){return"round"===value?this.element.setAttribute("stroke-linejoin","round"):"bevel"===value?this.element.setAttribute("stroke-linejoin","bevel"):this.element.removeAttribute("stroke-linejoin"),this},this.strokeMiterLimit=function(value){return null!=value&&value<1/0?this.element.setAttribute("stroke-miterlimit",Math.max(value,1)):this.element.removeAttribute("stroke-miterlimit"),this}}),VMLShape=Class(function(VMLShape){this._fillElement=null,this._strokeElement=null,this.constructor=function(tagName){base.constructor.call(this,tagName),this._fillElement=this.createElement("fill"),this._strokeElement=this.createElement("stroke"),this.element.appendChild(this._fillElement),this.element.appendChild(this._strokeElement),this.fillColor(NaN),this.strokeColor(NaN),this.strokeLineCap("none"),this.strokeLineJoin("miter")},this.dispose=function(){base.dispose.call(this),this._fillElement=null,this._strokeElement=null},this.fillColor=function(value){return null==value||isNaN(value)?(this._fillElement.on=!1,this._fillElement.color="#000000"):(value=NumberUtil.minMax(Math.floor(value),0,16777215),this._fillElement.on=!0,this._fillElement.color="#"+(16777216|value).toString(16).substring(1)),this},this.fillOpacity=function(value){return null==value||isNaN(value)?this._fillElement.opacity=1:this._fillElement.opacity=NumberUtil.minMax(value,0,1),this},this.strokeColor=function(value){return null==value||isNaN(value)?(this._strokeElement.on=!1,this._strokeElement.color="#000000"):(value=NumberUtil.minMax(Math.floor(value),0,16777215),this._strokeElement.on=!0,this._strokeElement.color="#"+(16777216|value).toString(16).substring(1)),this},this.strokeOpacity=function(value){return null==value||isNaN(value)?this._strokeElement.opacity=1:this._strokeElement.opacity=NumberUtil.minMax(value,0,1),this},this.strokeWidth=function(value){return null!=value&&value<1/0?this._strokeElement.weight=Math.max(value,1)+"px":this._strokeElement.weight="1px",this},this.strokeLineCap=function(value){return"round"===value?this._strokeElement.endcap="round":"square"===value?this._strokeElement.endcap="square":this._strokeElement.endcap="flat",this},this.strokeLineJoin=function(value){return"round"===value?this._strokeElement.joinstyle="round":"bevel"===value?this._strokeElement.joinstyle="bevel":this._strokeElement.joinstyle="miter",this},this.strokeMiterLimit=function(value){return null!=value&&value<1/0?this._strokeElement.miterlimit=Math.max(value,1):this._strokeElement.miterlimit=4,this}});VectorElement.mixin(this,SVGShape,VMLShape)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/viz/MDataTarget":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Pass=__webpack_require__("contrib/jg_lib/async/Pass"),ObservableArrayProperty=__webpack_require__("contrib/jg_lib/properties/ObservableArrayProperty"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),Legend=__webpack_require__("splunk/charting/Legend");return Class(module.id,function(MDataTarget){this.processDataPass=new Pass("processData",.1),this.updateLegendLabelsPass=new Pass("updateLegendLabels",.2),this.renderDataPass=new Pass("renderData",.3),this.data=new ObservableProperty("data",Array,null).onChange(function(e){this.invalidate("processDataPass")}),this.fields=new ObservableArrayProperty("fields",String,null).onChange(function(e){this.invalidate("processDataPass")}),this.legend=new ObservableProperty("legend",Legend,null).onChange(function(e){if(e.target===this){var oldLegend=e.oldValue,newLegend=e.newValue;return oldLegend&&(oldLegend.off("settingLabels",this._legend_settingLabels,this),oldLegend.unregister(this)),newLegend&&(newLegend.register(this),newLegend.on("settingLabels",this._legend_settingLabels,this)),void this.invalidate("updateLegendLabelsPass")}if(e.event===e.target.labelIndexMapChanged)return void this.invalidate("renderDataPass")}),this._cachedData=null,this._cachedFields=null,this._cachedLegend=null,this.processData=function(){if(!this.isValid("processDataPass")){this.invalidate("updateLegendLabelsPass");var data=this._cachedData=this.getInternal("data")||[],fields=this._cachedFields=this.getInternal("fields")||[];this.processDataOverride(data,fields),this.markValid("processDataPass")}},this.updateLegendLabels=function(){if(!this.isValid("updateLegendLabelsPass")){this.invalidate("renderDataPass");var legend=this._cachedLegend=this.getInternal("legend"),labels=null;legend&&(labels=this.updateLegendLabelsOverride(this._cachedData,this._cachedFields)),this.markValid("updateLegendLabelsPass"),legend&&legend.setLabels(this,labels)}},this.renderData=function(){this.isValid("renderDataPass")||(this.renderDataOverride(this._cachedData,this._cachedFields,this._cachedLegend),this.markValid("renderDataPass"))},this.processDataOverride=function(data,fields){},this.updateLegendLabelsOverride=function(data,fields){return null},this.renderDataOverride=function(data,fields,legend){},this._legend_settingLabels=function(e){this.validate("updateLegendLabelsPass"),this.updateLegendLabels()}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/layers/PieMarkerLayer":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=(__webpack_require__("shim/leaflet"),__webpack_require__("contrib/jg_lib/Class")),Event=__webpack_require__("contrib/jg_lib/events/Event"),EventData=__webpack_require__("contrib/jg_lib/events/EventData"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),NumberUtil=__webpack_require__("contrib/jg_lib/utils/NumberUtil"),LatLon=__webpack_require__("splunk/mapping/LatLon"),LatLonBounds=__webpack_require__("splunk/mapping/LatLonBounds"),LayerBase=__webpack_require__("splunk/mapping/layers/LayerBase"),VectorLayerBase=__webpack_require__("splunk/mapping/layers/VectorLayerBase"),ColorPalette=__webpack_require__("splunk/palettes/ColorPalette"),ListColorPalette=__webpack_require__("splunk/palettes/ListColorPalette"),DataUtil=__webpack_require__("splunk/utils/DataUtil"),Group=__webpack_require__("splunk/vectors/Group"),Wedge=__webpack_require__("splunk/vectors/Wedge"),MDataTarget=__webpack_require__("splunk/viz/MDataTarget");return Class(module.id,VectorLayerBase,function(PieMarkerLayer,base){Class.mixin(this,MDataTarget),this.rendered=new Event("rendered",EventData),this.markerColorPalette=new ObservableProperty("markerColorPalette",ColorPalette,new ListColorPalette([Color.fromNumber(52224),Color.fromNumber(13421568),Color.fromNumber(13369344)],(!0))).onChange(function(e){this.invalidate("renderDataPass")}),this.markerOpacity=new ObservableProperty("markerOpacity",Number,1).writeFilter(function(value){return isNaN(value)?1:value>=0&&value<=1/0?Math.min(value,1):0}).onChange(function(e){this.invalidate("renderDataPass")}),this.markerMinSize=new ObservableProperty("markerMinSize",Number,10).writeFilter(function(value){return value>=0&&value<1/0?value:0;
}).onChange(function(e){this.invalidate("renderDataPass")}),this.markerMaxSize=new ObservableProperty("markerMaxSize",Number,50).writeFilter(function(value){return value>=0&&value<1/0?value:0}).onChange(function(e){this.invalidate("renderDataPass")}),this.wrapX=new ObservableProperty("wrapX",Boolean,(!0)).onChange(function(e){this.invalidate("renderPass")}),this.wrapY=new ObservableProperty("wrapY",Boolean,(!1)).onChange(function(e){this.invalidate("renderPass")}),this._seriesList=null,this._markerList=null,this.constructor=function(){base.constructor.call(this),this._seriesList=[],this._markerList=[]},this.getLatLonBounds=function(center){if(null!=center&&!(center instanceof LatLon))throw new Error("Parameter center must be of type "+Class.getName(LatLon)+".");this.validate();for(var bounds=new LatLonBounds(1/0,1/0,(-(1/0)),(-(1/0))),markerList=this._markerList,i=0,l=markerList.length;i<l;i++)bounds.expand(markerList[i].latLon.normalize(center));return bounds.isFinite()?bounds:null},this.processDataOverride=function(data,fields){var series,marker,sliceList,numSlices,slice,i,j,seriesList=this._seriesList,numSeries=0,markerList=this._markerList,numMarkers=0,numRows=data.length,numFields=fields.length;if(numRows>0&&numFields>2){var fieldSeries,obj,valueLat,valueLon,valueSeries,mag,sum,angle1,angle2,vectorContainer=this.vectorContainer,fieldLat=fields[0],fieldLon=fields[1],magMin=1/0,magMax=-(1/0),magSpan=0;for(i=2;i<numFields;i++)fieldSeries=fields[i],numSeries<seriesList.length?series=seriesList[numSeries]:(series=new Series,seriesList.push(series)),series.name=fieldSeries,numSeries++;for(i=0;i<numRows;i++)if(obj=data[i],null!=obj&&(valueLat=DataUtil.parseNumber(obj[fieldLat]),valueLon=DataUtil.parseNumber(obj[fieldLon]),!isNaN(valueLat)&&!isNaN(valueLon))){for(numMarkers<markerList.length?marker=markerList[numMarkers]:(marker=new PieMarker,marker.appendTo(vectorContainer),markerList.push(marker)),sliceList=marker.sliceList,numSlices=0,mag=0,j=0;j<numSeries;j++)series=seriesList[j],valueSeries=DataUtil.parseNumber(obj[series.name]),isNaN(valueSeries)||valueSeries<=0||(numSlices<sliceList.length?slice=sliceList[numSlices]:(slice=new PieSlice,slice.appendTo(marker),sliceList.push(slice)),slice.series=series,slice.value=valueSeries,mag+=valueSeries,numSlices++);if(0!==numSlices){for(marker.latLon=new LatLon(valueLat,valueLon),marker.data=obj,marker.fields=fields,marker.magnitude=mag,mag<magMin&&(magMin=mag),mag>magMax&&(magMax=mag),sum=0,angle1=0,angle2=0,j=0;j<numSlices;j++)slice=sliceList[j],sum+=slice.value,angle1=angle2,angle2=360*(sum/mag),slice.startAngle=angle1-90,slice.arcAngle=angle2-angle1;for(j=sliceList.length-1;j>=numSlices;j--)slice=sliceList.pop(),slice.dispose();numMarkers++}}for(magSpan=magMax-magMin,i=0;i<numMarkers;i++)marker=markerList[i],marker.scale=magSpan>0?NumberUtil.minMax((marker.magnitude-magMin)/magSpan,0,1):1/numMarkers}for(i=markerList.length-1;i>=numMarkers;i--)marker=markerList.pop(),marker.dispose();for(i=seriesList.length-1;i>=numSeries;i--)seriesList.pop()},this.updateLegendLabelsOverride=function(data,fields){for(var seriesList=this._seriesList,numSeries=seriesList.length,labels=numSeries>0?new Array(numSeries):null,i=0;i<numSeries;i++)labels[i]=seriesList[i].name;return labels},this.renderDataOverride=function(data,fields,legend){this.invalidate("renderPass");var series,seriesIndex,seriesCount,marker,sliceList,numSlices,slice,i,j,paletteSpan,paletteRatio,seriesList=this._seriesList,numSeries=seriesList.length,markerColorPalette=this.getInternal("markerColorPalette"),markerOpacity=this.getInternal("markerOpacity"),markerMinSize=this.getInternal("markerMinSize"),markerMaxSize=this.getInternal("markerMaxSize"),markerList=this._markerList,numMarkers=markerList.length;for(seriesCount=legend?legend.getNumLabels():numSeries,paletteSpan=Math.max(seriesCount-1,0),i=0;i<numSeries;i++)series=seriesList[i],seriesIndex=legend?legend.getLabelIndex(series.name):i,paletteRatio=paletteSpan>0?seriesIndex/paletteSpan:0,series.color=markerColorPalette?(markerColorPalette.getItem(paletteRatio,paletteSpan,series.name)||new Color).toNumber():0;for(i=0;i<numMarkers;i++)for(marker=markerList[i],sliceList=marker.sliceList,numSlices=sliceList.length,marker.radius=Math.round(NumberUtil.interpolate(markerMinSize,markerMaxSize,marker.scale))/2,marker.tooltipOffsetRadius=marker.radius,marker.display("none"),j=0;j<numSlices;j++)slice=sliceList[j],slice.fillColor(slice.series.color),slice.fillOpacity(markerOpacity),slice.draw(0,0,marker.radius,marker.radius,slice.startAngle,slice.arcAngle)},this.renderOverride=function(map){base.renderOverride.call(this,map);for(var marker,markerLatLng,markerPoint,leafletMap=map.leafletMap,centerLatLng=leafletMap.getCenter(),wrapX=this.getInternal("wrapX"),wrapY=this.getInternal("wrapY"),vectorBounds=this.vectorBounds,minX=vectorBounds.minX,minY=vectorBounds.minY,maxX=vectorBounds.maxX,maxY=vectorBounds.maxY,markerList=this._markerList,i=0,l=markerList.length;i<l;i++)marker=markerList[i],markerLatLng=marker.latLon.toLeaflet(),wrapX&&(markerLatLng.lng-=centerLatLng.lng,markerLatLng.lng%=360,markerLatLng.lng>180?markerLatLng.lng-=360:markerLatLng.lng<-180&&(markerLatLng.lng+=360),markerLatLng.lng+=centerLatLng.lng),wrapY&&(markerLatLng.lat-=centerLatLng.lat,markerLatLng.lat%=180,markerLatLng.lat>90?markerLatLng.lat-=180:markerLatLng.lat<-90&&(markerLatLng.lat+=180),markerLatLng.lat+=centerLatLng.lat),marker.tooltipLatLng=markerLatLng,markerPoint=leafletMap.latLngToLayerPoint(markerLatLng),marker.translate(markerPoint.x,markerPoint.y),markerPoint.x+marker.radius<minX||markerPoint.x-marker.radius>maxX||markerPoint.y+marker.radius<minY||markerPoint.y-marker.radius>maxY?marker.display("none"):marker.display(null);this.fire("rendered",new EventData)};var Series=Class(Object,function(Series,base){this.name=null,this.color=0,this.constructor=function(){}}),PieMarker=Class(Group,function(PieMarker,base){this.sliceList=null,this.latLon=null,this.data=null,this.fields=null,this.magnitude=0,this.scale=0,this.radius=0,this.tooltipLatLng=null,this.tooltipOffsetRadius=0,this.constructor=function(){base.constructor.call(this),this.element[LayerBase.METADATA_KEY]=this,this.sliceList=[]},this.dispose=function(){for(var sliceList=this.sliceList,i=sliceList.length-1;i>=0;i--)sliceList[i].dispose();this.element[LayerBase.METADATA_KEY]=null,base.dispose.call(this)}}),PieSlice=Class(Wedge,function(PieSlice,base){this.series=null,this.value=0,this.startAngle=0,this.arcAngle=0,this.constructor=function(){base.constructor.call(this)}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Wedge":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),NumberUtil=__webpack_require__("contrib/jg_lib/utils/NumberUtil"),Shape=__webpack_require__("splunk/vectors/Shape"),VectorElement=__webpack_require__("splunk/vectors/VectorElement");return Class(module.id,Shape,function(Wedge,base){this.constructor=function(){base.constructor.call(this)},this.draw=function(x,y,radiusX,radiusY,startAngle,arcAngle){return this};var SVGWedge=Class(function(SVGWedge){this.constructor=function(){base.constructor.call(this,"path")},this.draw=function(x,y,radiusX,radiusY,startAngle,arcAngle){if(x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,radiusX=null!=radiusX&&radiusX<1/0?Math.max(radiusX,0):0,radiusY=null!=radiusY&&radiusY<1/0?Math.max(radiusY,0):0,startAngle=null!=startAngle&&startAngle>-(1/0)&&startAngle<1/0?startAngle:0,arcAngle=null==arcAngle||null==arcAngle||isNaN(arcAngle)?0:NumberUtil.minMax(arcAngle,-360,360),0==radiusX||0==radiusY||0==arcAngle)return this.element.removeAttribute("d"),this;var a1=startAngle/180*Math.PI,x1=x+Math.cos(a1)*radiusX,y1=y+Math.sin(a1)*radiusY,a2=(startAngle+arcAngle/2)/180*Math.PI,x2=x+Math.cos(a2)*radiusX,y2=y+Math.sin(a2)*radiusY,a3=(startAngle+arcAngle)/180*Math.PI,x3=x+Math.cos(a3)*radiusX,y3=y+Math.sin(a3)*radiusY,sweepFlag=arcAngle<0?0:1,pathData="";return arcAngle>-360&&arcAngle<360?(pathData+="M"+x+","+y,pathData+=" L"+x1+","+y1):pathData+="M"+x1+","+y1,pathData+=" A"+radiusX+","+radiusY+" 0 0 "+sweepFlag+" "+x2+","+y2,pathData+=" "+radiusX+","+radiusY+" 0 0 "+sweepFlag+" "+x3+","+y3,pathData+=" Z",this.element.setAttribute("d",pathData),this}}),VMLWedge=Class(function(VMLWedge){var _RES=64;this._pathElement=null,this.constructor=function(){base.constructor.call(this,"shape"),this._pathElement=this.createElement("path"),this.element.style.width="1px",this.element.style.height="1px",this.element.coordsize=_RES+","+_RES,this.element.appendChild(this._pathElement)},this.dispose=function(){base.dispose.call(this),this._pathElement=null},this.draw=function(x,y,radiusX,radiusY,startAngle,arcAngle){if(x=null!=x&&x>-(1/0)&&x<1/0?x:0,y=null!=y&&y>-(1/0)&&y<1/0?y:0,radiusX=null!=radiusX&&radiusX<1/0?Math.max(radiusX,0):0,radiusY=null!=radiusY&&radiusY<1/0?Math.max(radiusY,0):0,startAngle=null!=startAngle&&startAngle>-(1/0)&&startAngle<1/0?startAngle:0,arcAngle=null==arcAngle||null==arcAngle||isNaN(arcAngle)?0:NumberUtil.minMax(arcAngle,-360,360),0==radiusX||0==radiusY||0==arcAngle)return this._pathElement.v=" ",this;var a1=startAngle/180*Math.PI,x1=x+Math.cos(a1)*radiusX,y1=y+Math.sin(a1)*radiusY,a2=(startAngle+arcAngle/2)/180*Math.PI,x2=x+Math.cos(a2)*radiusX,y2=y+Math.sin(a2)*radiusY,a3=(startAngle+arcAngle)/180*Math.PI,x3=x+Math.cos(a3)*radiusX,y3=y+Math.sin(a3)*radiusY,left=Math.round((x-radiusX)*_RES),top=Math.round((y-radiusY)*_RES),right=Math.round((x+radiusX)*_RES),bottom=Math.round((y+radiusY)*_RES);x=Math.round(x*_RES),y=Math.round(y*_RES),x1=Math.round(x1*_RES),y1=Math.round(y1*_RES),x2=Math.round(x2*_RES),y2=Math.round(y2*_RES),x3=Math.round(x3*_RES),y3=Math.round(y3*_RES);var pathData="";return arcAngle>-360&&arcAngle<360?(pathData+="m "+x+","+y,pathData+=" l "+x1+","+y1):pathData+="m "+x1+","+y1,pathData+=arcAngle<0?" at":" wa",pathData+=" "+left+","+top+","+right+","+bottom+", "+x1+","+y1+", "+x2+","+y2,pathData+=", "+left+","+top+","+right+","+bottom+", "+x2+","+y2+", "+x3+","+y3,pathData+=" x",this._pathElement.v=pathData,this}});VectorElement.mixin(this,SVGWedge,VMLWedge)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/parsers/LatLonBoundsParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),LatLonBounds=__webpack_require__("splunk/mapping/LatLonBounds"),NumberParser=__webpack_require__("splunk/parsers/NumberParser"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils");return Class(module.id,Parser,function(LatLonBoundsParser,base){var _instance=null;LatLonBoundsParser.getInstance=function(){return _instance||(_instance=new LatLonBoundsParser),_instance},this.numberParser=null,this.constructor=function(){this.numberParser=NumberParser.getInstance()},this.stringToValue=function(str){var values=ParseUtils.prepareTuple(str);if(!values)return null;var latLonBounds=new LatLonBounds,numValues=values.length;return numValues>0&&(latLonBounds.s=this.numberParser.stringToValue(values[0])),numValues>1&&(latLonBounds.w=this.numberParser.stringToValue(values[1])),numValues>2&&(latLonBounds.n=this.numberParser.stringToValue(values[2])),numValues>3&&(latLonBounds.e=this.numberParser.stringToValue(values[3])),latLonBounds},this.valueToString=function(value){var latLonBounds=value instanceof LatLonBounds?value:null;if(!latLonBounds)return null;var str="";return str+=this.numberParser.valueToString(latLonBounds.s)+",",str+=this.numberParser.valueToString(latLonBounds.w)+",",str+=this.numberParser.valueToString(latLonBounds.n)+",",str+=this.numberParser.valueToString(latLonBounds.e),"("+str+")"}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/NumberParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils");return Class(module.id,Parser,function(NumberParser,base){var _instance=null;NumberParser.getInstance=function(){return _instance||(_instance=new NumberParser),_instance},this.stringToValue=function(str){return str=ParseUtils.trimWhiteSpace(str),str?Number(str):NaN},this.valueToString=function(value){return null!=value&&Class.isNumber(value)?String(value):String(NaN)}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/Parser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils");return Class(module.id,Object,function(Parser,base){this.constructor=function(){},this.deserialize=function(attributes){if(null==attributes)throw new Error("Parameter attributes must be non-null.");var str=ObjectUtil.get(attributes,"");return str=ParseUtils.isEmpty(str)?null:""+str,this.stringToValue(str)},this.serialize=function(value){var str=this.valueToString(value);return ParseUtils.isEmpty(str)?null:{"":str}},this.hasNestedFormat=function(){return!1},this.stringToValue=function(str){return null},this.valueToString=function(value){return null}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/ParseUtils":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(ParseUtils){var _UNESCAPE_PATTERN=/\\([.\n\r]?)/g,_ESCAPE_SLASH_PATTERN=/\\/g,_ESCAPE_QUOTE_PATTERN=/"/g,_TRIM_PATTERN=/^[\s\xA0\u2028\u2029\uFEFF]+|[\s\xA0\u2028\u2029\uFEFF]+$/g;ParseUtils.prepareArray=function(str){if(str=ParseUtils.trimWhiteSpace(str),!str)return null;var length=str.length;if(length<2)return null;if("["!=str.charAt(0))return null;if("]"!=str.charAt(length-1))return null;str=str.substring(1,length-1),length=str.length;for(var value,arr=[],index=-1;index<length;)index++,value=_readUntil(str,index,","),index+=value.length,value=ParseUtils.trimWhiteSpace(value),(value||index<length||arr.length>0)&&arr.push(ParseUtils.unescapeString(value));return arr},ParseUtils.prepareObject=function(str){if(str=ParseUtils.trimWhiteSpace(str),!str)return null;var length=str.length;if(length<2)return null;if("{"!=str.charAt(0))return null;if("}"!=str.charAt(length-1))return null;str=str.substring(1,length-1),length=str.length;for(var key,value,obj={},index=0;index<length&&(key=_readUntil(str,index,":"),index+=key.length+1,!(index>length));)value=_readUntil(str,index,","),index+=value.length+1,key=ParseUtils.unescapeString(key),key&&(obj[key]=ParseUtils.unescapeString(value));return obj},ParseUtils.prepareTuple=function(str){if(str=ParseUtils.trimWhiteSpace(str),!str)return null;var length=str.length;if(length<2)return null;if("("!=str.charAt(0))return null;if(")"!=str.charAt(length-1))return null;str=str.substring(1,length-1),length=str.length;for(var value,arr=[],index=-1;index<length;)index++,value=_readUntil(str,index,","),index+=value.length,value=ParseUtils.trimWhiteSpace(value),(value||index<length||arr.length>0)&&arr.push(ParseUtils.unescapeString(value));return arr},ParseUtils.unescapeString=function(str){if(str=ParseUtils.trimWhiteSpace(str),!str)return str;var length=str.length;return length<2?str:'"'!=str.charAt(0)?str:'"'!=str.charAt(length-1)?str:(str=str.substring(1,length-1))?str=str.replace(_UNESCAPE_PATTERN,"$1"):str},ParseUtils.escapeString=function(str){return null!=str&&Class.isString(str)?(str=str.replace(_ESCAPE_SLASH_PATTERN,"\\\\"),str=str.replace(_ESCAPE_QUOTE_PATTERN,'\\"'),'"'+str+'"'):null},ParseUtils.trimWhiteSpace=function(str){return null!=str&&Class.isString(str)?str?str.replace(_TRIM_PATTERN,""):str:null},ParseUtils.isEmpty=function(str){return null==str||""===str};var _readUntil=function(str,startIndex,endChar){for(var ch,nestBeginChar,nestEndChar,substr="",index=startIndex,length=str.length,isQuote=!1,nestLevel=0;index<length;){if(ch=str.charAt(index),isQuote)'"'==ch?isQuote=!1:"\\"==ch&&(substr+=ch,index++,ch=str.charAt(index));else if(nestLevel>0)ch==nestEndChar?nestLevel--:ch==nestBeginChar?nestLevel++:'"'==ch&&(isQuote=!0);else{if(ch==endChar)break;"["==ch?(nestLevel=1,nestBeginChar="[",nestEndChar="]"):"{"==ch?(nestLevel=1,nestBeginChar="{",nestEndChar="}"):"("==ch?(nestLevel=1,nestBeginChar="(",nestEndChar=")"):'"'==ch&&(isQuote=!0)}substr+=ch,index++}return substr}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/parsers/LatLonParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),LatLon=__webpack_require__("splunk/mapping/LatLon"),NumberParser=__webpack_require__("splunk/parsers/NumberParser"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils");return Class(module.id,Parser,function(LatLonParser,base){var _instance=null;LatLonParser.getInstance=function(){return _instance||(_instance=new LatLonParser),_instance},this.numberParser=null,this.constructor=function(){this.numberParser=NumberParser.getInstance()},this.stringToValue=function(str){var values=ParseUtils.prepareTuple(str);if(!values)return null;var latLon=new LatLon,numValues=values.length;return numValues>0&&(latLon.lat=this.numberParser.stringToValue(values[0])),numValues>1&&(latLon.lon=this.numberParser.stringToValue(values[1])),latLon},this.valueToString=function(value){var latLon=value instanceof LatLon?value:null;if(!latLon)return null;var str="";return str+=this.numberParser.valueToString(latLon.lat)+",",str+=this.numberParser.valueToString(latLon.lon),"("+str+")"}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/palettes/FieldColorPalette":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),ObservableObjectProperty=__webpack_require__("contrib/jg_lib/properties/ObservableObjectProperty"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil"),ColorPalette=__webpack_require__("splunk/palettes/ColorPalette");return Class(module.id,ColorPalette,function(FieldColorPalette,base){this.fieldColors=new ObservableObjectProperty("fieldColors",Color,{}).itemReadFilter(function(value){return value.clone()}).itemWriteFilter(function(value){return value?value.clone().normalize():new Color}).itemChangeComparator(function(oldValue,newValue){return!oldValue.equals(newValue)}),this.defaultColorPalette=new ObservableProperty("defaultColorPalette",ColorPalette,null),this.constructor=function(fieldColors,defaultColorPalette){base.constructor.call(this),null!=fieldColors&&this.set("fieldColors",fieldColors),null!=defaultColorPalette&&this.set("defaultColorPalette",defaultColorPalette)},this.getItemOverride=function(properties,ratio,span,value){if(null!=value){var color=ObjectUtil.get(properties.fieldColors,""+value);if(color)return color.clone()}var defaultColorPalette=properties.defaultColorPalette;return defaultColorPalette?defaultColorPalette.getItem(ratio,span,value):null}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/ObservableObjectProperty":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var MObservableProperty=__webpack_require__("contrib/jg_lib/properties/MObservableProperty"),ObjectProperty=__webpack_require__("contrib/jg_lib/properties/ObjectProperty"),Class=__webpack_require__("contrib/jg_lib/Class"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil"),Set=__webpack_require__("contrib/jg_lib/utils/Set");return Class(module.id,ObjectProperty,function(ObservableObjectProperty,base){Class.mixin(this,MObservableProperty),this._defaultValueSet=null,this._itemChangeComparator=null,this.constructor=function(name,itemType,defaultValue){base.constructor.call(this,name,itemType,defaultValue);var defaultValueSet=this._defaultValueSet=new Set;if(defaultValue)for(var p in defaultValue)ObjectUtil.has(defaultValue,p)&&defaultValueSet.add(defaultValue[p]);this.initChangeEvent()},this.itemChangeComparator=function(value){if(!arguments.length)return this._itemChangeComparator;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter itemChangeComparator must be of type Function.");return this._itemChangeComparator=value||null,this},this.setupContext=function(context){base.setupContext.call(this,context),this.setupDependencySupport(context)},this.teardownContext=function(context){this.teardownDependencySupport(context),base.teardownContext.call(this,context)},this.writeValue=function(context,value){var oldValue=context.value;if(this.teardownDependencyChangeHandler(context),base.writeValue.call(this,context,value),null!=value){var itemValue,dependencyList=[],defaultValueSet=this._defaultValueSet;for(var p in value)ObjectUtil.has(value,p)&&(itemValue=value[p],null!=itemValue&&itemValue.isEventTarget&&itemValue.isObservableTarget&&!defaultValueSet.has(itemValue)&&dependencyList.push({target:itemValue,event:itemValue.change}));dependencyList.length>0&&this.setupDependencyChangeHandler(context,dependencyList)}this.notifyChange(context,oldValue,value)},this.needsWrite=function(context,value){return this.hasChange(context,context.value,value)},this.hasChange=function(context,oldValue,newValue){var changeComparator=this.changeComparator();if(changeComparator)return!!changeComparator.call(context.target,oldValue,newValue);if(oldValue===newValue)return!1;if(null==oldValue||null==newValue)return!0;var p;for(p in oldValue)if(ObjectUtil.has(oldValue,p)&&(!ObjectUtil.has(newValue,p)||this.hasItemChange(context,oldValue[p],newValue[p])))return!0;for(p in newValue)if(ObjectUtil.has(newValue,p)&&!ObjectUtil.has(oldValue,p))return!0;return!1},this.hasItemChange=function(context,oldValue,newValue){return this._itemChangeComparator?!!this._itemChangeComparator.call(context.target,oldValue,newValue):oldValue!==newValue&&(oldValue===oldValue||newValue===newValue)}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"contrib/jg_lib/properties/ObjectProperty":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Property=__webpack_require__("contrib/jg_lib/properties/Property"),Class=__webpack_require__("contrib/jg_lib/Class"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil");return Class(module.id,Property,function(ObjectProperty,base){this._itemType=null,this._itemTypeChecker=null,this._itemNullValue=null,this._allowNull=!1,this._itemReadFilter=null,this._itemWriteFilter=null,this.constructor=function(name,itemType,defaultValue){if(null!=itemType&&!Class.isFunction(itemType))throw new Error("Parameter itemType must be of type Function.");this._itemType=itemType||null,this._itemTypeChecker=itemType?Class.getTypeChecker(itemType):null,itemType===Number?this._itemNullValue=NaN:itemType===Boolean?this._itemNullValue=!1:this._itemNullValue=null,null==defaultValue&&(defaultValue={}),base.constructor.call(this,name,Object,defaultValue)},this.itemType=function(){return this._itemType},this.allowNull=function(value){if(!arguments.length)return this._allowNull;if(null!=value&&!Class.isBoolean(value))throw new Error("Parameter allowNull must be of type Boolean.");return this._allowNull=value===!0,this},this.itemReadFilter=function(value){if(!arguments.length)return this._itemReadFilter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter itemReadFilter must be of type Function.");return this._itemReadFilter=value||null,this},this.itemWriteFilter=function(value){if(!arguments.length)return this._itemWriteFilter;if(null!=value&&!Class.isFunction(value))throw new Error("Parameter itemWriteFilter must be of type Function.");return this._itemWriteFilter=value||null,this},this.get=function(target){var itemValue,itemFilterValue,value=base.get.call(this,target),itemNullValue=this._itemNullValue,itemReadFilter=this._itemReadFilter,itemValueMap={};for(var p in value)if(ObjectUtil.has(value,p)){if(itemValue=value[p],itemReadFilter&&(itemFilterValue=itemReadFilter.call(target,itemValue),itemFilterValue!==itemValue)){if(!this.isValidItemType(itemFilterValue))throw new Error('Value returned from itemReadFilter for property "'+this.name()+'" must be of type '+this.getItemTypeName()+".");itemValue=itemFilterValue}null==itemValue&&(itemValue=itemNullValue),itemValueMap[p]=itemValue}return itemValueMap},this.set=function(target,value){var itemValue,itemFilterValue,allowNull=this._allowNull,itemNullValue=this._itemNullValue,itemWriteFilter=this._itemWriteFilter,itemValueMap={};for(var p in value)if(ObjectUtil.has(value,p)){if(itemValue=value[p],null==itemValue){if(!allowNull)continue;itemValue=itemNullValue}if(itemWriteFilter&&(itemFilterValue=itemWriteFilter.call(target,itemValue),itemFilterValue!==itemValue)){if(!this.isValidItemType(itemFilterValue))throw new Error('Value returned from itemWriteFilter for property "'+this.name()+'" must be of type '+this.getItemTypeName()+".");itemValue=itemFilterValue}itemValueMap[p]=itemValue}base.set.call(this,target,itemValueMap)},this.getTypeName=function(){return"Object<"+this.getItemTypeName()+">"},this.getItemTypeName=function(){return this._itemType?Class.getName(this._itemType)||this.name()+".itemType":"*"},this.isValidType=function(value){if(null==value)return!0;if(!Class.isObject(value))return!1;for(var p in value)if(ObjectUtil.has(value,p)&&!this.isValidItemType(value[p]))return!1;return!0},this.isValidItemType=function(value){return null==value||!this._itemTypeChecker||this._itemTypeChecker(value)}})}.call(exports,__webpack_require__,exports,module),/*!
	 * Copyright (c) 2007-2016 Jason Gatt
	 * 
	 * Released under the MIT license:
	 * http://opensource.org/licenses/MIT
	 */
!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/ArrayParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Map=__webpack_require__("contrib/jg_lib/utils/Map"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils"),StringParser=__webpack_require__("splunk/parsers/StringParser");return Class(module.id,Parser,function(ArrayParser,base){var _R_INDEX=/^(0|[1-9][0-9]*)(?:\.|$)/,_instances=new Map;ArrayParser.getInstance=function(elementParser){var instance=_instances.get(elementParser);return instance||(instance=new ArrayParser(elementParser),_instances.set(elementParser,instance)),instance};var _extractIndexAttributes=function(attributes){var indexAttributes,index,match,indexAttributesMap={};for(var attr in attributes)ObjectUtil.has(attributes,attr)&&!ParseUtils.isEmpty(attributes[attr])&&(match=attr.match(_R_INDEX),match&&(index=match[1],indexAttributes=ObjectUtil.get(indexAttributesMap,index),indexAttributes||(indexAttributes=indexAttributesMap[index]={}),indexAttributes[attr.substring(match[0].length)]=attributes[attr]));var indexAttributesList=ObjectUtil.pairs(indexAttributesMap);if(!indexAttributesList.length)return null;indexAttributesList.sort(_indexPairComparator);for(var i=0,l=indexAttributesList.length;i<l;i++)indexAttributesList[i]=indexAttributesList[i][1];return indexAttributesList},_mergeIndexAttributes=function(attributes,index,indexAttributes){index=""+index;for(var attr in indexAttributes)ObjectUtil.has(indexAttributes,attr)&&!ParseUtils.isEmpty(indexAttributes[attr])&&(attributes[index+(attr?"."+attr:"")]=indexAttributes[attr])},_indexPairComparator=function(pair1,pair2){return pair1[0]-pair2[0]};this.elementParser=null,this.constructor=function(elementParser){if(null==elementParser)throw new Error("Parameter elementParser must be non-null.");if(!(elementParser instanceof Parser))throw new Error("Parameter elementParser must be of type "+Class.getName(Parser)+".");this.elementParser=elementParser},this.deserialize=function(attributes){if(!this.hasNestedFormat())return base.deserialize.call(this,attributes);if(null==attributes)throw new Error("Parameter attributes must be non-null.");var indexAttributes=_extractIndexAttributes(attributes);if(!indexAttributes)return null;for(var arr=[],elementParser=this.elementParser,i=0,l=indexAttributes.length;i<l;i++)arr.push(elementParser.deserialize(indexAttributes[i]));return arr},this.serialize=function(value){if(!this.hasNestedFormat())return base.serialize.call(this,value);if(null==value||!Class.isArray(value)||!value.length)return null;for(var indexAttributes,attributes={},elementParser=this.elementParser,index=0,i=0,l=value.length;i<l;i++)indexAttributes=elementParser.serialize(value[i]),indexAttributes&&(_mergeIndexAttributes(attributes,index,indexAttributes),index++);return attributes},this.hasNestedFormat=function(){return this.elementParser.hasNestedFormat()},this.stringToValue=function(str){var arr=ParseUtils.prepareArray(str);if(!arr)return null;for(var elementParser=this.elementParser,i=0,l=arr.length;i<l;i++)arr[i]=elementParser.stringToValue(arr[i]);return arr},this.valueToString=function(value){var arr=null!=value&&Class.isArray(value)?value:null;if(!arr)return null;for(var elementValue,str="",elementParser=this.elementParser,i=0,l=arr.length;i<l;i++)elementValue=arr[i],str&&(str+=","),str+=elementParser instanceof StringParser?ParseUtils.escapeString(elementParser.valueToString(elementValue)):elementParser.valueToString(elementValue);return"["+str+"]"}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/StringParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Parser=__webpack_require__("splunk/parsers/Parser");return Class(module.id,Parser,function(StringParser,base){var _instance=null;StringParser.getInstance=function(){return _instance||(_instance=new StringParser),_instance},this.stringToValue=function(str){return null!=str&&Class.isString(str)?str:null},this.valueToString=function(value){return null!=value&&Class.isString(value)?value:null}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/BooleanParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils");return Class(module.id,Parser,function(BooleanParser,base){var _instance=null;BooleanParser.getInstance=function(){return _instance||(_instance=new BooleanParser),_instance},this.stringToValue=function(str){return str=ParseUtils.trimWhiteSpace(str),str&&(str=str.toLowerCase()),"true"===str||"t"===str||"1"===str},this.valueToString=function(value){return value===!0?"true":"false"}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/ColorParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils");return Class(module.id,Parser,function(ColorParser,base){var _instance=null;ColorParser.getInstance=function(){return _instance||(_instance=new ColorParser),_instance},this.stringToValue=function(str){return str=ParseUtils.trimWhiteSpace(str),str?Color.fromString(str):null},this.valueToString=function(value){return value instanceof Color?value.toString(value.a<1?"rgba":"hex"):null}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/parsers/ObjectParser":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Map=__webpack_require__("contrib/jg_lib/utils/Map"),ObjectUtil=__webpack_require__("contrib/jg_lib/utils/ObjectUtil"),Parser=__webpack_require__("splunk/parsers/Parser"),ParseUtils=__webpack_require__("splunk/parsers/ParseUtils"),StringParser=__webpack_require__("splunk/parsers/StringParser");return Class(module.id,Parser,function(ObjectParser,base){var _instances=new Map;ObjectParser.getInstance=function(elementParser){var instance=_instances.get(elementParser);return instance||(instance=new ObjectParser(elementParser),_instances.set(elementParser,instance)),instance},this.elementParser=null,this.constructor=function(elementParser){if(null==elementParser)throw new Error("Parameter elementParser must be non-null.");if(!(elementParser instanceof Parser))throw new Error("Parameter elementParser must be of type "+Class.getName(Parser)+".");this.elementParser=elementParser},this.stringToValue=function(str){var obj=ParseUtils.prepareObject(str);if(!obj)return null;var elementParser=this.elementParser;for(var key in obj)ObjectUtil.has(obj,key)&&(obj[key]=elementParser.stringToValue(obj[key]));return obj},this.valueToString=function(value){var obj=null!=value&&Class.isObject(value)?value:null;if(!obj)return null;var str="",elementParser=this.elementParser;for(var key in obj)ObjectUtil.has(obj,key)&&(str&&(str+=","),str+=ParseUtils.escapeString(key)+":",str+=elementParser instanceof StringParser?ParseUtils.escapeString(elementParser.valueToString(obj[key])):elementParser.valueToString(obj[key]));return"{"+str+"}"}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/utils/GeoJsonUtils":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class");return Class(module.id,function(GeoJsonUtils){GeoJsonUtils.createFromBoundingBox=function(s,w,n,e){return s=Number(s),w=Number(w),n=Number(n),e=Number(e),{type:"MultiPolygon",coordinates:[[[[w,s],[e,s],[e,n],[w,n]]]]}}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/controls/ResetZoomControl":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),_=__webpack_require__("require/underscore"),Leaflet=__webpack_require__("shim/leaflet"),Class=__webpack_require__("contrib/jg_lib/Class"),LatLon=__webpack_require__("splunk/mapping/LatLon"),ControlBase=__webpack_require__("splunk/mapping/controls/ControlBase");__webpack_require__("splunk/vectors/Rect"),__webpack_require__("splunk/vectors/Text"),__webpack_require__("splunk/vectors/Viewport");return Class(module.id,ControlBase,function(ResetZoomControl,base){this.constructor=function(options){this.leafletOptions=options,base.constructor.call(this)},this.setOriginalZoom=function(originalZoom){this.leafletControl.originalZoom=parseInt(originalZoom,10)},this.setOriginalCenter=function(originalCenter){originalCenter=originalCenter.replace("(",""),originalCenter=originalCenter.replace(")","");var latLonArr=originalCenter.split(","),lat=parseFloat(latLonArr[0]),lon=parseFloat(latLonArr[1]);this.leafletControl.originalCenter=new LatLon(lat,lon)},this.createLeafletControl=function(){return new LeafletResetZoom(this.leafletOptions)},this.onAddedToMap=function(map){base.onAddedToMap.call(this,map),this.leafletControl.setMap(map)};var LeafletResetZoom=Leaflet.Control.extend({options:{position:"topleft"},linkTemplate:'<a class="leaflet-reset-zoom" href="#" title="<%= resetZoomText %>" style="width: 15px; height:15px; padding: 2px; "> <svg version="1.1"\t                    id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t                    width="15px" height="15px" viewBox="0 0 15 15" enable-background="new 0 0 15 15" xml:space="preserve">\t                    <g>\t                        <ellipse fill="#333333" cx="7.586" cy="7.287" rx="2.313" ry="2.33"/>\t                        <path fill="#333333" d="M7.586,13.525c-3.384,0-6.136-2.753-6.136-6.136s2.753-6.136,6.136-6.136c3.385,0,6.136,2.753,6.136,6.136\t                            S10.969,13.525,7.586,13.525z M7.586,2.712c-2.579,0-4.677,2.098-4.677,4.677s2.098,4.677,4.677,4.677\t                            c2.58,0,4.677-2.098,4.677-4.677S10.165,2.712,7.586,2.712z"/>\t                        <rect y="6.429" fill="#333333" width="2.143" height="2.143"/>\t                        <rect x="12.857" y="6.429" fill="#333333" width="2.143" height="2.143"/>\t                        <rect x="6.429" y="12.857" fill="#333333" width="2.143" height="2.143"/>\t                        <rect x="6.429" fill="#333333" width="2.143" height="2.143"/>\t                    </g>\t                </svg></a>',initialize:function(options){this._button={},this.setButton();var mouseOverText=_("Reset to original position and zoom").t();if(this.linkTemplate=_.template(this.linkTemplate),this.linkTemplate=this.linkTemplate({resetZoomText:mouseOverText}),this.originalZoom=options.originalZoom?parseInt(options.originalZoom,10):2,options.originalCenter){this.originalCenter=options.originalCenter.replace("(",""),this.originalCenter=this.originalCenter.replace(")","");var latLonArr=this.originalCenter.split(","),lat=parseFloat(latLonArr[0]),lon=parseFloat(latLonArr[1]);this.originalCenter=new LatLon(lat,lon)}else this.originalZoom=2},onAdd:function(map){this._map=map;var container=Leaflet.DomUtil.create("div","leaflet-reset-zoom leaflet-control-zoom");return this._container=container,this._update(),this._container},setButton:function(){var button={text:_("Reset Zoom").t()};this._button=button,this._update()},_update:function(){this._map&&(this._container.innerHTML="",this._makeButton(this._button))},_makeButton:function(button){var newButton=Leaflet.DomUtil.create("div","leaflet-reset-zoom",this._container);""!==button.text&&$(newButton).append(this.linkTemplate),$(newButton).find("a").on("focus",function(){$(this).css("background-color","rgba(212, 221, 254, 0.75)")}),$(newButton).find("a").on("focusout",function(){$(this).css("background-color","rgba(255, 255, 255, 0.75")}),$(newButton).on("click",function(e){e.stopPropagation(),e.preventDefault(),this.map.set("center",this.originalCenter),this.map.set("zoom",this.originalZoom)}.bind(this)),$(newButton).dblclick(function(e){e.stopPropagation()})},setMap:function(map){this.map=map}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Rect":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Shape=__webpack_require__("splunk/vectors/Shape"),VectorElement=__webpack_require__("splunk/vectors/VectorElement");return Class(module.id,Shape,function(Rect,base){this.constructor=function(x,y,width,height){base.constructor.call(this)},this.x=function(value){return this},this.y=function(value){return this},this.width=function(value){return this},this.height=function(value){return this};var SVGRect=Class(function(SVGRect){this.constructor=function(x,y,width,height){base.constructor.call(this,"rect"),null!=x&&this.x(x),null!=y&&this.y(y),null!=width&&this.width(width),null!=height&&this.height(height)},this.x=function(value){return null!=value&&value>-(1/0)&&value<1/0?this.element.setAttribute("x",value):this.element.removeAttribute("x"),this},this.y=function(value){return null!=value&&value>-(1/0)&&value<1/0?this.element.setAttribute("y",value):this.element.removeAttribute("y"),this},this.width=function(value){return null!=value&&value<1/0?this.element.setAttribute("width",Math.max(value,0)):this.element.removeAttribute("width"),this},this.height=function(value){return null!=value&&value<1/0?this.element.setAttribute("height",Math.max(value,0)):this.element.removeAttribute("height"),this}}),VMLRect=Class(function(VMLRect){this.constructor=function(x,y,width,height){base.constructor.call(this,"rect"),null!=x&&this.x(x),null!=y&&this.y(y),null!=width&&this.width(width),null!=height&&this.height(height)},this.x=function(value){return null!=value&&value>-(1/0)&&value<1/0?this.element.style.left=Math.round(value)+"px":this.element.style.left="",this},this.y=function(value){return null!=value&&value>-(1/0)&&value<1/0?this.element.style.top=Math.round(value)+"px":this.element.style.top="",this},this.width=function(value){return null!=value&&value<1/0?this.element.style.width=Math.round(Math.max(value,0))+"px":this.element.style.width="",this},this.height=function(value){return null!=value&&value<1/0?this.element.style.height=Math.round(Math.max(value,0))+"px":this.element.style.height="",this}});VectorElement.mixin(this,SVGRect,VMLRect)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/vectors/Text":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),Rectangle=__webpack_require__("contrib/jg_lib/geom/Rectangle"),Shape=__webpack_require__("splunk/vectors/Shape"),VectorElement=__webpack_require__("splunk/vectors/VectorElement");return Class(module.id,Shape,function(Text,base){this.constructor=function(x,y,text){base.constructor.call(this)},this.x=function(value){return this},this.y=function(value){return this},this.text=function(value){return this},this.alignmentBaseline=function(value){return this},this.baselineShift=function(value){return this},this.direction=function(value){return this},this.dominantBaseline=function(value){return this},this.fontFamily=function(value){return this},this.fontSize=function(value){return this},this.fontSizeAdjust=function(value){return this},this.fontStretch=function(value){return this},this.fontStyle=function(value){return this},this.fontVariant=function(value){return this},this.fontWeight=function(value){return this},this.glyphOrientationHorizontal=function(value){return this},this.glyphOrientationVertical=function(value){return this},this.kerning=function(value){return this},this.letterSpacing=function(value){return this},this.textAnchor=function(value){return this},this.textDecoration=function(value){return this},this.textRendering=function(value){return this},this.unicodeBidi=function(value){return this},this.wordSpacing=function(value){return this},this.writingMode=function(value){return this},this.getBounds=function(){return new Rectangle};var SVGText=Class(function(SVGText){this.constructor=function(x,y,text){base.constructor.call(this,"text"),this.fillColor(0),null!=x&&this.x(x),null!=y&&this.y(y),null!=text&&this.text(text)},this.x=function(value){return null!=value&&value>-(1/0)&&value<1/0?this.element.setAttribute("x",value):this.element.removeAttribute("x"),this},this.y=function(value){return null!=value&&value>-(1/0)&&value<1/0?this.element.setAttribute("y",value):this.element.removeAttribute("y"),this},this.text=function(value){return this.element.textContent=value?value:"",this},this.alignmentBaseline=function(value){return value?this.element.setAttribute("alignment-baseline",value):this.element.removeAttribute("alignment-baseline"),this},this.baselineShift=function(value){return value?this.element.setAttribute("baseline-shift",value):this.element.removeAttribute("baseline-shift"),this},this.direction=function(value){return value?this.element.setAttribute("direction",value):this.element.removeAttribute("direction"),this},this.dominantBaseline=function(value){return value?this.element.setAttribute("dominant-baseline",value):this.element.removeAttribute("dominant-baseline"),this},this.fontFamily=function(value){return value?this.element.setAttribute("font-family",value):this.element.removeAttribute("font-family"),this},this.fontSize=function(value){return value?this.element.setAttribute("font-size",value):this.element.removeAttribute("font-size"),this},this.fontSizeAdjust=function(value){return value?this.element.setAttribute("font-size-adjust",value):this.element.removeAttribute("font-size-adjust"),this},this.fontStretch=function(value){return value?this.element.setAttribute("font-stretch",value):this.element.removeAttribute("font-stretch"),this},this.fontStyle=function(value){return value?this.element.setAttribute("font-style",value):this.element.removeAttribute("font-style"),this},this.fontVariant=function(value){return value?this.element.setAttribute("font-variant",value):this.element.removeAttribute("font-variant"),this},this.fontWeight=function(value){return value?this.element.setAttribute("font-weight",value):this.element.removeAttribute("font-weight"),this},this.glyphOrientationHorizontal=function(value){return value?this.element.setAttribute("glyph-orientation-horizontal",value):this.element.removeAttribute("glyph-orientation-horizontal"),this},this.glyphOrientationVertical=function(value){return value?this.element.setAttribute("glyph-orientation-vertical",value):this.element.removeAttribute("glyph-orientation-vertical"),this},this.kerning=function(value){return value?this.element.setAttribute("kerning",value):this.element.removeAttribute("kerning"),this},this.letterSpacing=function(value){return value?this.element.setAttribute("letter-spacing",value):this.element.removeAttribute("letter-spacing"),this},this.textAnchor=function(value){return value?this.element.setAttribute("text-anchor",value):this.element.removeAttribute("text-anchor"),this},this.textDecoration=function(value){return value?this.element.setAttribute("text-decoration",value):this.element.removeAttribute("text-decoration"),this},this.textRendering=function(value){return value?this.element.setAttribute("text-rendering",value):this.element.removeAttribute("text-rendering"),this},this.unicodeBidi=function(value){return value?this.element.setAttribute("unicode-bidi",value):this.element.removeAttribute("unicode-bidi"),this},this.wordSpacing=function(value){return value?this.element.setAttribute("word-spacing",value):this.element.removeAttribute("word-spacing"),this},this.writingMode=function(value){return value?this.element.setAttribute("writing-mode",value):this.element.removeAttribute("writing-mode"),this},this.getBounds=function(){try{var box=this.element.getBBox();return new Rectangle(box.x,box.y,box.width,box.height)}catch(e){return new Rectangle}}}),VMLText=Class(function(VMLText){});VectorElement.mixin(this,SVGText,VMLText)})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/axis/NumericAxis":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__("contrib/jg_lib/Class"),BaseAxis=__webpack_require__("splunk/mapping/axis/BaseAxis");return Class(module.id,BaseAxis,function(NumericAxis,base){this.valueToAbsolute=function(value){if(null===value||""===value)return NaN;var absoluteVal=Number(value);return absoluteVal>-(1/0)&&absoluteVal<1/0?absoluteVal:NaN},this.absoluteToValue=function(absolute){return absolute},this.processValues=function(values){for(var processedValues=[],i=0;i<values.length;i++){var processedValue=this.valueToAbsolute(values[i]);isNaN(processedValue)||processedValues.push(processedValue)}return processedValues}})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/controls/NumericalLegend":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),_=__webpack_require__("require/underscore"),i18n=__webpack_require__("stubs/i18n"),Leaflet=__webpack_require__("shim/leaflet"),Class=__webpack_require__("contrib/jg_lib/Class"),Pass=__webpack_require__("contrib/jg_lib/async/Pass"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),BaseAxis=__webpack_require__("splunk/mapping/axis/BaseAxis"),ControlBase=__webpack_require__("splunk/mapping/controls/ControlBase"),ColorPalette=__webpack_require__("splunk/palettes/ColorPalette"),MathUtils=(__webpack_require__("splunk/palettes/ListColorPalette"),__webpack_require__("util/math_utils")),svgUtil=__webpack_require__("util/svg");return Class(module.id,ControlBase,function(NumericalLegend,base){var _LABEL_BOTTOM_PADDING=5,_LABEL_HEIGHT=16,_LEGEND_LEFT_MARGIN=12,_PIXEL_PER_CHARACTER_ESTIMATE=7,_LEGEND_RIGHT_MARGIN=12,_LABEL_X=35,_SWATCH_X=12,_SWATCH_WIDTH=16,_SWATCH_LABEL_SPACE=_LABEL_X-_SWATCH_X-_SWATCH_WIDTH,_SWATCH_HEIGHT=12,_LEGEND_SPACING=_LEGEND_LEFT_MARGIN+_SWATCH_WIDTH+_SWATCH_LABEL_SPACE+_LEGEND_RIGHT_MARGIN,_TEXT_HEIGHT=10,_INITIAL_Y=20;this.computeExtendedPass=new Pass("computeExtended",.121),this.axis=new ObservableProperty("axis",BaseAxis,null).onChange(function(e){e.target===this?(e.oldValue&&e.oldValue.unregister(this),e.newValue&&(e.newValue.register(this),this.invalidate("computeExtendedPass")),this.invalidate("renderPass")):!e.property||e.property!==e.target.containedMinimum&&e.property!==e.target.containedMaximum?!e.property||e.property!==e.target.extendedMinimum&&e.property!==e.target.extendedMaximum||this.invalidate("renderPass"):this.invalidate("computeExtendedPass")}),this.bins=new ObservableProperty("bins",Number,5).writeFilter(function(value){return isNaN(value)?5:Math.min(Math.max(Math.floor(value),1),9)}).onChange(function(e){this.invalidate("computeExtendedPass"),this.invalidate("renderPass")}),this.neutralPoint=new ObservableProperty("neutralPoint",Number,NaN).writeFilter(function(value){return value>-(1/0)&&value<1/0?value:NaN}).onChange(function(e){this.invalidate("computeExtendedPass"),this.invalidate("renderPass")}),this.colorPalette=new ObservableProperty("colorPalette",ColorPalette,null).onChange(function(e){this.invalidate("renderPass")}),this.selectedField=new ObservableProperty("selectedField",String,null).onChange(function(e){this.invalidate("renderPass")}),this.constructor=function(options){this.leafletOptions=options?options:{},base.constructor.call(this)},this.computeExtended=function(){var axis=this.get("axis");if(axis){var containedMinimum=axis.get("containedMinimum"),containedMaximum=axis.get("containedMaximum");if(!_.isFinite(containedMinimum)||!_.isFinite(containedMaximum))return void axis.provideExtendedRange(this,NaN,NaN);var nearestPowerOfTen,extendedBinSize,bestFitMultiplier,bins=this.getInternal("bins"),neutralPoint=this.getInternal("neutralPoint"),useNeutralPoint=!_.isNaN(neutralPoint),axisHasRange=containedMaximum>containedMinimum,containedRange=containedMaximum-containedMinimum,allowedMultipliers=[1,2,2.5,3,4,5,6,7,7.5,8,9,10];if(axisHasRange){var rawBinSize=containedRange/bins;nearestPowerOfTen=MathUtils.nearestPowerOfTen(rawBinSize),bestFitMultiplier=_(allowedMultipliers).find(function(multiplier){return multiplier*nearestPowerOfTen>=rawBinSize}),extendedBinSize=bestFitMultiplier*nearestPowerOfTen}else extendedBinSize=MathUtils.nearestPowerOfTen(containedMinimum||1);var extendedMinimum,extendedMaximum,halfRange;if(axisHasRange)if(useNeutralPoint)halfRange=extendedBinSize*(bins/2),extendedMinimum=neutralPoint-halfRange,extendedMaximum=neutralPoint+halfRange;else for(extendedMinimum=Math.floor(containedMinimum/nearestPowerOfTen)*nearestPowerOfTen,extendedMaximum=extendedMinimum+bins*extendedBinSize;extendedMaximum<containedMaximum;)bestFitMultiplier=allowedMultipliers[_(allowedMultipliers).indexOf(bestFitMultiplier)+1]||bestFitMultiplier+1,extendedBinSize=bestFitMultiplier*nearestPowerOfTen,extendedMaximum=extendedMinimum+bins*extendedBinSize;else halfRange=extendedBinSize*(bins/2),extendedMinimum=containedMinimum-halfRange,extendedMaximum=containedMinimum+halfRange;axis.provideExtendedRange(this,extendedMinimum,extendedMaximum)}},this.render=function(){var container=this.leafletControl.getContainer();if($(container).empty(),this.getInternal("isVisible")){var axis=this.get("axis");if(axis){var minimum=axis.get("extendedMinimum"),maximum=axis.get("extendedMaximum");if(minimum!==1/0&&maximum!==-(1/0)){var bins=this.getInternal("bins"),height=_LABEL_HEIGHT*bins+_INITIAL_Y-_SWATCH_HEIGHT+_LABEL_BOTTOM_PADDING,width=_LEGEND_LEFT_MARGIN;this.svg=svgUtil.createElement("svg").attr("height",height).attr("fill","rgba(0,0,0,1)");for(var y,swatchColor,swatchLabel,lower,upper,paletteRatio,labelsGroup=svgUtil.createElement("g").attr("class","svg-labels").attr("height",height),colorsGroup=svgUtil.createElement("g").attr("class","svg-colors"),backgroundRect=svgUtil.createElement("rect").attr("class","background").attr("height",height).attr("fill","rgb(255,255,255)").attr("fill-opacity","0.75"),binSize=(maximum-minimum)/bins,colorPalette=this.getInternal("colorPalette"),selectedField=this.getInternal("selectedField"),longestLabel="",paletteSpan=Math.max(bins-1,0),i=0;i<bins;i++)y=_INITIAL_Y+i*_LABEL_HEIGHT,lower=MathUtils.stripFloatingPointErrors(minimum+i*binSize),upper=MathUtils.stripFloatingPointErrors(lower+binSize),swatchLabel=i18n.format_decimal(lower)+" - "+i18n.format_decimal(upper),colorPalette?(paletteRatio=paletteSpan>0?i/paletteSpan:0,swatchColor=colorPalette.getItem(paletteRatio,paletteSpan)||new Color):swatchColor=new Color,labelsGroup.append(this._drawRow({label:swatchLabel,y:y,lower:lower},selectedField)),colorsGroup.append(this._drawColor(y-_TEXT_HEIGHT,swatchColor,lower,selectedField)),swatchLabel.length>longestLabel.length&&(longestLabel=swatchLabel);width+=_LEGEND_SPACING+longestLabel.length*_PIXEL_PER_CHARACTER_ESTIMATE,$(this.svg).attr("width",width),$(backgroundRect).attr("width",width),this.svg.append(backgroundRect),this.svg.append(labelsGroup),this.svg.append(colorsGroup),$(container).append(this.svg),this._adjustLegend(width)}}}},this.getContainer=function(){return this.leafletControl.getContainer()},this.createLeafletControl=function(){return new LeafletNumericalLegend(this.leafletOptions)},this._adjustLegend=function(){for(var labels=$(this.svg[0]).find(".svg-label text"),longestLabelElem=labels[0],longestLabelWidth=0,i=0;i<labels.length;i++)labels[i].getBBox().width>longestLabelWidth&&(longestLabelElem=labels[i],longestLabelWidth=longestLabelElem.getBBox().width);if(longestLabelElem){var newWidth=_LEGEND_SPACING+longestLabelWidth;$(this.svg).attr("width",newWidth),$(this.svg).find(".background").attr("width",newWidth)}},this._drawRow=function(value,selectedField){var labelGroup,labelText,isUnselected=null!=selectedField&&selectedField!==""+value.lower;return labelGroup=svgUtil.createElement("g").attr("class","svg-label legend-label legend-elem").data("fieldName",value.lower),labelText=svgUtil.createElement("text").attr({y:value.y,x:_LABEL_X}).attr("fill-opacity",isUnselected?.3:1).text(value.label).css({"font-size":"12px","font-weight":"regular",fill:"#333333","padding-top":"12px",cursor:"default"}),labelGroup.append(labelText),labelGroup},this._drawColor=function(y,color,fieldName,selectedField){var isUnselected=null!=selectedField&&selectedField!==""+fieldName,fillColor=color.toString("rgb"),rect=svgUtil.createElement("rect").attr("height",_SWATCH_HEIGHT).attr("width",_SWATCH_WIDTH).attr("y",y).attr("x",_SWATCH_X).attr("fill",isUnselected?"rgb(51,51,51)":fillColor).attr("fill-opacity",isUnselected?.1:1).attr("class","legend-color legend-elem").data("fieldName",fieldName).attr("stroke",isUnselected?"rgb(51,51,51)":fillColor).attr("stroke-opacity",isUnselected?.1:1).css("cursor","default");return"rgb(255,255,255)"===fillColor&&rect.attr("stroke","rgb(204,204,204)"),rect};var LeafletNumericalLegend=Leaflet.Control.extend({options:{position:"bottomright"},initialize:function(options){this.container=Leaflet.DomUtil.create("div","legend"),$(this.container).css("pointer-events","visiblepainted")},onAdd:function(map){return this.container},getContainer:function(){return this.container}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunk/mapping/controls/CategoricalVisualLegend":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__("shim/jquery"),Leaflet=__webpack_require__("shim/leaflet"),Class=__webpack_require__("contrib/jg_lib/Class"),Color=__webpack_require__("contrib/jg_lib/graphics/Color"),ObservableProperty=__webpack_require__("contrib/jg_lib/properties/ObservableProperty"),Legend=__webpack_require__("splunk/charting/Legend"),ControlBase=__webpack_require__("splunk/mapping/controls/ControlBase"),ColorPalette=__webpack_require__("splunk/palettes/ColorPalette"),svgUtil=__webpack_require__("util/svg");
return Class(module.id,ControlBase,function(CategoricalVisualLegend,base){var _LABEL_HEIGHT=16,_LABEL_BOTTOM_PADDING=5,_LEGEND_BOTTOM_PADDING=15,_LEGEND_LEFT_MARGIN=12,_PIXEL_PER_CHARACTER_ESTIMATE=7,_LEGEND_RIGHT_MARGIN=12,_LABEL_X=35,_SWATCH_X=12,_SWATCH_WIDTH=16,_SWATCH_LABEL_SPACE=_LABEL_X-_SWATCH_X-_SWATCH_WIDTH,_SWATCH_HEIGHT=12,_LEGEND_SPACING=_LEGEND_LEFT_MARGIN+_SWATCH_WIDTH+_SWATCH_LABEL_SPACE+_LEGEND_RIGHT_MARGIN,_TEXT_HEIGHT=10,_INITIAL_Y=20,_LEGEND_MAX_HEIGHT=200-_LEGEND_BOTTOM_PADDING-_INITIAL_Y;this.colorPalette=new ObservableProperty("colorPalette",ColorPalette,null).onChange(function(e){this.invalidate("renderPass")}),this.legend=new ObservableProperty("legend",Legend,null).onChange(function(e){this.invalidate("renderPass")}),this.maxHeight=new ObservableProperty("maxHeight",Number,1/0).onChange(function(e){this.invalidate("renderPass")}),this.clip=new ObservableProperty("clip",Boolean,(!1)).onChange(function(e){this.invalidate("renderPass")}),this.selectedField=new ObservableProperty("selectedField",String,null).onChange(function(e){this.invalidate("renderPass")}),this.render=function(){var container=this.leafletControl.getContainer();if($(container).empty(),this.getInternal("isVisible")){var legend=this.getInternal("legend"),labels=[];if(legend&&(labels=legend.get("actualLabels")),labels&&labels.length>0){var height=_LABEL_HEIGHT*labels.length+_INITIAL_Y-_SWATCH_HEIGHT+_LABEL_BOTTOM_PADDING;height=Math.min(height,this.getInternal("maxHeight")-_INITIAL_Y-_LABEL_BOTTOM_PADDING),this.svg=svgUtil.createElement("svg").attr("height",height);var labelsGroup=svgUtil.createElement("g").attr("class","svg-labels").attr("height",height),colorsGroup=svgUtil.createElement("g").attr("class","svg-colors"),backgroundRect=svgUtil.createElement("rect").attr("class","background").attr("height",height).attr("fill","rgb(255,255,255)").attr("fill-opacity","0.75");this.getInternal("clip")&&(this.svg.append('\t                        <defs>\t                            <clipPath id="choropleth-legend-clip">\t                                <rect class="clip" x="0" y="0"></rect>\t                            </clipPath>\t                        </defs>'),this.svg.find(".clip").attr("height",height),labelsGroup.attr("clip-path","url(#choropleth-legend-clip)"),colorsGroup.attr("clip-path","url(#choropleth-legend-clip)"));for(var selectedField=this.getInternal("selectedField"),width=_LEGEND_LEFT_MARGIN,longestLabel="",i=0;i<labels.length;i++){0==i&&(longestLabel=labels[i]),labels[i].length>longestLabel.length&&(longestLabel=labels[i]);var y=_INITIAL_Y+i*_LABEL_HEIGHT;labelsGroup.append(this._drawRow({label:labels[i],y:y},selectedField)),colorsGroup.append(this._drawColor(y-_TEXT_HEIGHT,i,labels[i],selectedField))}width+=_LEGEND_SPACING+longestLabel.length*_PIXEL_PER_CHARACTER_ESTIMATE,$(this.svg).attr("width",width),$(backgroundRect).attr("width",width),height>_LEGEND_MAX_HEIGHT&&($(container).css("overflow-y","scroll"),$(container).css("overflow-x","hidden"),$(container).css("height",_LEGEND_MAX_HEIGHT)),this.svg.append(backgroundRect),this.svg.append(labelsGroup),this.svg.append(colorsGroup),$(container).append(this.svg),this._adjustLegend()}}},this.getContainer=function(){return this.leafletControl.getContainer()},this.createLeafletControl=function(){return new LeafletCategoricalLegend(this.leafletOptions)},this._adjustLegend=function(){for(var labels=$(this.svg[0]).find(".svg-label text"),longestLabelElem=labels[0],longestLabelWidth=0,i=0;i<labels.length;i++)labels[i].getBBox().width>longestLabelWidth&&(longestLabelElem=labels[i],longestLabelWidth=longestLabelElem.getBBox().width);if(longestLabelElem){var newWidth=_LEGEND_SPACING+longestLabelWidth;$(this.svg).attr("width",newWidth),$(this.svg).find(".background").attr("width",newWidth),this.getInternal("clip")&&this.svg.find(".clip").attr("width",newWidth)}},this._drawColor=function(y,i,label,selectedField){var isUnselected=null!=selectedField&&selectedField!==""+label,legend=this.getInternal("legend");if(legend){var colorPalette=this.getInternal("colorPalette"),color="rgb(0,0,0)";if(colorPalette){var paletteSpan=Math.max(legend.getNumLabels()-1,0),paletteRatio=paletteSpan>0?legend.getLabelIndex(label)/paletteSpan:0;color=(colorPalette.getItem(paletteRatio,paletteSpan,label)||new Color).toString("rgb")}var rect=svgUtil.createElement("rect").attr("height",_SWATCH_HEIGHT).attr("width",_SWATCH_WIDTH).attr("y",y).attr("x",_SWATCH_X).attr("class","legend-color legend-elem").attr("stroke",isUnselected?"rgb(51,51,51)":color).attr("stroke-opacity",isUnselected?.1:1).attr("fill",isUnselected?"rgb(51,51,51)":color).attr("fill-opacity",isUnselected?.1:1).data("fieldName",label).css("cursor","default");return"rgb(255,255,255)"===color&&rect.attr("stroke","rgb(204,204,204)"),rect}},this._drawRow=function(value,selectedField){var labelGroup,labelText,isUnselected=null!=selectedField&&selectedField!==""+value.label;return labelGroup=svgUtil.createElement("g").attr("class","svg-label legend-label legend-elem").data("fieldName",value.label),labelText=svgUtil.createElement("text").attr({y:value.y,x:_LABEL_X}).attr("fill-opacity",isUnselected?.3:1).text(value.label).css({"font-size":"12px",fill:"#333333","font-weight":"regular","padding-top":"12px",cursor:"default"}),labelGroup.append(labelText),labelGroup};var LeafletCategoricalLegend=Leaflet.Control.extend({options:{position:"bottomright"},initialize:function(options){this.container=Leaflet.DomUtil.create("div","legend"),Leaflet.DomEvent.disableClickPropagation(this.container),$(this.container).css("pointer-events","visiblepainted")},onAdd:function(map){return this.container},getContainer:function(){return this.container}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"util/theme_utils":function(module,exports,__webpack_require__){"use strict";function getCurrentTheme(){return window.__splunk_page_theme__||defaultTheme}function getXmlEditorTheme(){var pageTheme=getCurrentTheme();return"dark"===pageTheme?"ace/theme/xml-dark":"ace/theme/chrome"}function getSearchEditorTheme(){var pageTheme=getCurrentTheme();return"dark"===pageTheme?"dark":"light"}__webpack_require__(1),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCurrentTheme=getCurrentTheme,exports.getXmlEditorTheme=getXmlEditorTheme,exports.getSearchEditorTheme=getSearchEditorTheme;var defaultTheme="light"},"views/shared/map/Master.pcss":function(module,exports,__webpack_require__){var content=__webpack_require__(920);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(459)(content,{});content.locals&&(module.exports=content.locals)},"splunk/mapping/layers/VectorLayerBase":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Leaflet=__webpack_require__("shim/leaflet"),Class=__webpack_require__("contrib/jg_lib/Class"),Rectangle=__webpack_require__("contrib/jg_lib/geom/Rectangle"),FunctionUtil=__webpack_require__("contrib/jg_lib/utils/FunctionUtil"),LayerBase=__webpack_require__("splunk/mapping/layers/LayerBase"),Group=__webpack_require__("splunk/vectors/Group"),Viewport=__webpack_require__("splunk/vectors/Viewport");return Class(module.id,LayerBase,function(VectorLayerBase,base){this.vectorContainer=null,this.vectorBounds=null,this._isZooming=!1,this.constructor=function(){base.constructor.call(this),this._leafletMap_move=FunctionUtil.bind(this._leafletMap_move,this),this._leafletMap_zoomstart=FunctionUtil.bind(this._leafletMap_zoomstart,this),this._leafletMap_zoomend=FunctionUtil.bind(this._leafletMap_zoomend,this),this.vectorContainer=this.leafletLayer.vectorContainer,this.vectorBounds={minX:0,minY:0,maxX:0,maxY:0}},this.createLeafletLayer=function(){return new LeafletVectorLayer},this.renderOverride=function(map){this._isZooming||this.vectorContainer.display(null)},this.onAddedToMap=function(map){base.onAddedToMap.call(this,map);var leafletMap=map.leafletMap;this.vectorContainer.hasSVG?leafletMap.on("move",this._leafletMap_move):leafletMap.on("moveend",this._leafletMap_move),leafletMap.on("viewreset",this._leafletMap_move),leafletMap.on("zoomstart",this._leafletMap_zoomstart),leafletMap.on("zoomend",this._leafletMap_zoomend),this.vectorBounds=leafletMap._vectorLayerBounds,this.vectorContainer.display("none")},this.onRemovedFromMap=function(map){var leafletMap=map.leafletMap;this.vectorContainer.hasSVG?leafletMap.off("move",this._leafletMap_move):leafletMap.off("moveend",this._leafletMap_move),leafletMap.off("viewreset",this._leafletMap_move),leafletMap.off("zoomstart",this._leafletMap_zoomstart),leafletMap.off("zoomend",this._leafletMap_zoomend),this.vectorBounds={minX:0,minY:0,maxX:0,maxY:0},base.onRemovedFromMap.call(this,map)},this._leafletMap_move=function(e){this.invalidate("renderPass")},this._leafletMap_zoomstart=function(e){this._isZooming=!0,this.vectorContainer.display("none")},this._leafletMap_zoomend=function(e){this._isZooming=!1,this.invalidate("renderPass")};var LeafletVectorLayer=Leaflet.Class.extend({includes:[Leaflet.Mixin.Events],options:{clickable:!0},vectorContainer:null,initialize:function(options){Leaflet.Util.setOptions(this,options),this.vectorContainer=new Group},onAdd:function(map){this._map=map,map._initVectorLayerViewport(),this.vectorContainer.appendTo(map._vectorLayerViewport)},onRemove:function(map){this._map=null,this.vectorContainer.remove()}});Leaflet.Map.include({_initVectorLayerViewport:function(){if(!this._vectorLayerRoot){var root=this._vectorLayerRoot=document.createElement("div");root.style.position="absolute",this._panes.overlayPane.appendChild(root);var viewport=this._vectorLayerViewport=new Viewport;viewport.appendTo(root),this._vectorLayerBounds={minX:0,minY:0,maxX:0,maxY:0},viewport.hasSVG?this.on("move",this._updateVectorLayerBounds):this.on("moveend",this._updateVectorLayerBounds),this._updateVectorLayerBounds()}},_updateVectorLayerBounds:function(){var root=this._vectorLayerRoot,viewport=this._vectorLayerViewport,bounds=this._vectorLayerBounds,padding=viewport.hasSVG?0:.5,size=this.getSize(),panePos=Leaflet.DomUtil.getPosition(this._mapPane),min=panePos.multiplyBy(-1)._subtract(size.multiplyBy(padding)),max=min.add(size.multiplyBy(1+2*padding)),width=max.x-min.x,height=max.y-min.y;bounds.minX=min.x,bounds.minY=min.y,bounds.maxX=max.x,bounds.maxY=max.y,Leaflet.DomUtil.setPosition(root,min),viewport.width(width),viewport.height(height),viewport.viewBox(new Rectangle(min.x,min.y,width,height))}})})}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});